(function(e){function t(t){for(var s,r,o=t[0],c=t[1],l=t[2],h=0,d=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,o=1;o<i.length;o++){var c=i[o];0!==n[c]&&(s=!1)}s&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var s={},n={app:0},a=[];function r(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=s,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},1480:function(e,t){},"25b6":function(e,t,i){},"29d8":function(e,t,i){},"2fa3":function(e,t,i){"use strict";i.r(t),i.d(t,"parseQueryString",(function(){return n})),i.d(t,"formatAmount",(function(){return a})),i.d(t,"countDecimals",(function(){return r})),i.d(t,"formatPrice",(function(){return o})),i.d(t,"padNumber",(function(){return c})),i.d(t,"ago",(function(){return l})),i.d(t,"getHms",(function(){return u})),i.d(t,"uniqueName",(function(){return h})),i.d(t,"movingAverage",(function(){return d})),i.d(t,"formatTime",(function(){return p})),i.d(t,"camelToSentence",(function(){return _})),i.d(t,"snakeToSentence",(function(){return m})),i.d(t,"setValueByDotNotation",(function(){return f})),i.d(t,"slugify",(function(){return g})),i.d(t,"getVisibleRange",(function(){return v}));i("c975"),i("a15b"),i("fb6a"),i("b680"),i("d3b7"),i("4d63"),i("ac1f"),i("25f0"),i("5319"),i("841c"),i("1276"),i("498a");var s=i("4360");function n(){var e;try{e=JSON.parse('{"'+decodeURI(location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(i){e={}}for(var t in e)try{e[t]=JSON.parse(e[t])}catch(i){}return e}function a(e,t){var i=e<0;return e=Math.ceil(1e9*Math.abs(e))/1e9,e=e>=1e6?+(e/1e6).toFixed(isNaN(t)?1:t)+"M":e>=1e5?+(e/1e3).toFixed(isNaN(t)?0:t)+"K":e>=1e3?+(e/1e3).toFixed(isNaN(t)?1:t)+"K":s["a"].state.settings.decimalPrecision?e.toFixed(s["a"].state.settings.decimalPrecision):+e.toFixed(4),i?"-"+e:e}function r(e){return Math.floor(e)===e?0:e.toString().split(".")[1].length||0}function o(e){return e=+e||0,s["a"].state.settings.decimalPrecision?e.toFixed(s["a"].state.settings.decimalPrecision):s["a"].state.app.optimalDecimal?e.toFixed(s["a"].state.app.optimalDecimal):e.toFixed(2)}function c(e,t){var i="000000000"+e;return i.substr(i.length-t)}function l(e){var t,i,s=Math.floor((new Date-e)/1e3);return i=(t=Math.floor(s/31536e3))>1?t+"y":(t=Math.floor(s/2592e3))>=1?t+"m":(t=Math.floor(s/86400))>=1?t+"d":(t=Math.floor(s/3600))>=1?t+"h":(t=Math.floor(s/60))>=1?t+"m":Math.ceil(s)+"s",i}function u(e,t){if(isNaN(e)||null===e)return null;var i=e<0?"-":"";e=Math.abs(e);var s=Math.floor(e/1e3/3600),n=Math.floor(e/1e3%3600/60),a=Math.floor(e/1e3%3600%60),r="";return r+=t&&r.length||!(s>0)?"":i+s+"h"+(!t&&n?", ":""),r+=t&&r.length||!(n>0)?"":i+n+"m"+(!t&&a?", ":""),r+=t&&r.length||!(a>0)?"":i+a+"s",(!r.length||!t&&e<6e4&&e>1e3*a)&&(r+=(r.length?", ":"")+i+(e-1e3*a)+"ms"),r.trim()}function h(e,t){var i=e.substr(),s=1;while(-1!==t.indexOf(e))e=i+ ++s;return e}function d(e,t,i){return i*t+(1-i)*e}function p(e){var t=new Date(1e3*e);return t.getDate()+"/"+(t.getMonth()+1)+" "+t.toTimeString().split(" ")[0]}function _(e){return e=e.replace(/([A-Z])/g," $1"),e.charAt(0).toUpperCase()+e.slice(1)}function m(e){return e=e.replace(/_/g," "),e.charAt(0).toUpperCase()+e.slice(1)}var f=function e(t,i,s){if(1!==i.length){if(0===i.length)throw"error";return t[i[0]]||(t[i[0]]={}),e(t[i[0]],i.slice(1),s)}t[i[0]]=s},g=function(e){var t="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;",i="aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",s=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(s,(function(e){return i.charAt(t.indexOf(e))})).replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},v=function(e,t){var i=e.timeScale().getVisibleRange();if(i){var s=e.timeScale().scrollPosition();return s>0&&(i.to=Math.floor((i.to+s*t)/t)*t),{from:i.from,to:i.to,median:i.from+(i.to-i.from)/2}}}},"36a1":function(e,t,i){},"3b93":function(e,t,i){"use strict";i("9970")},4360:function(e,t,i){"use strict";i("ac1f"),i("1276");var s,n=i("2b0e"),a=i("2f62"),r=i("2fa3"),o={updateStat:function(e,t){var i=e.commit,s=e.state,n=t.index,a=t.prop,r=t.value;if(s.statsCounters[n][a]!==r){var o="";o+="boolean"===typeof r?"TOGGLE_STAT":"SET_STAT_"+a.toUpperCase(),i(o,{index:n,value:r})}},setSeriePreference:function(e,t){var i=e.commit,s=e.state,n=t.id,a=t.key,r=t.value;try{r=JSON.parse(r)}catch(o){}s.series[n]&&s.series[n][a]===r||i("SET_SERIE_OPTION",{id:n,key:a,value:r})}},c=(i("c975"),i("d81d"),i("a434"),i("b0c0"),i("d3b7"),i("25f0"),i("466d"),i("498a"),{SET_PAIR:function(e,t){console.log("SET_PAIR",t.toString().toUpperCase()),e.pair=t.toString().toUpperCase(),this.state.app.pairs=e.pair.split("+")},SET_QUOTE_AS_PREFERED_CURRENCY:function(e,t){e.preferQuoteCurrencySize=!!t},SET_MAX_ROWS:function(e,t){e.maxRows=t},TOGGLE_SLIPPAGE:function(e){var t=[!1,"bps","price"],i=Math.max(0,t.indexOf(e.showSlippage));e.showSlippage=t[(i+1)%t.length]},TOGGLE_AGGREGATION:function(e,t){e.aggregateTrades=!!t},TOGGLE_LOGOS:function(e,t){e.showLogos=!!t},TOGGLE_LIQUIDATIONS_ONLY:function(e,t){e.liquidationsOnly=!!t},TOGGLE_COUNTERS:function(e,t){e.showCounters=!!t},TOGGLE_STATS:function(e,t){e.showStats=!!t},TOGGLE_STAT:function(e,t){var i=t.index,s=t.value,a=e.statsCounters[i];a.enabled=!!s,n["a"].set(e.statsCounters,i,a)},SET_STAT_OUTPUT:function(e,t){var i=t.index,s=t.value,a=e.statsCounters[i];a.output=s,n["a"].set(e.statsCounters,i,a)},SET_STAT_NAME:function(e,t){var i=t.index,s=t.value,a=e.statsCounters[i],o=e.statsCounters.map((function(e){return e.name}));o.splice(i,1),a.name=Object(r["uniqueName"])(s,o),n["a"].set(e.statsCounters,i,a)},SET_STAT_COLOR:function(e,t){var i=t.index,s=t.value,a=e.statsCounters[i];a.color=s,n["a"].set(e.statsCounters,i,a)},SET_STAT_PRECISION:function(e,t){var i=t.index,s=t.value,a=e.statsCounters[i];s=parseInt(s),a.precision=isNaN(s)?null:s,n["a"].set(e.statsCounters,i,a)},SET_STAT_PERIOD:function(e,t){var i=t.index,s=t.value,a=e.statsCounters[i],r=parseInt(s);isNaN(r)?a.period=null:(/[\d.]+s/.test(s)?r*=1e3:/[\d.]+h/.test(s)?r*=36e5:r*=6e4,a.period=r),n["a"].set(e.statsCounters,i,a)},CREATE_STAT:function(e){e.statsCounters.push({name:Object(r["uniqueName"])("COUNTER",e.statsCounters.map((function(e){return e.name}))),output:"vbuy + vsell",enabled:!1})},REMOVE_STAT:function(e,t){e.statsCounters.splice(t,1)},SET_STATS_PERIOD:function(e,t){var i=parseInt(t)||0;/[\d.]+s/.test(t)?i*=1e3:/[\d.]+h/.test(t)?i*=36e5:i*=6e4,e.statsPeriod=i},TOGGLE_STATS_CHART:function(e,t){e.statsChart=!!t},TOGGLE_STATS_TIMEFRAME:function(e,t){e.statsGraphsTimeframe=isNaN(+t)?1e3:t},TOGGLE_STATS_LENGTH:function(e,t){e.statsGraphsLength=isNaN(+t)?50:t},REPLACE_COUNTERS:function(e,t){e.countersSteps=t.sort((function(e,t){return e-t}))},TOGGLE_COUNTERS_COUNT:function(e,t){e.countersCount=!!t},TOGGLE_THRESHOLDS_TABLE:function(e,t){e.showThresholdsAsTable=!!t},SET_THRESHOLD_AMOUNT:function(e,t){var i=e.thresholds[t.index];i&&("string"===typeof t.value&&/m|k$/i.test(t.value)&&(/m$/i.test(t.value)?i.amount=1e6*parseFloat(t.value):i.amount=1e3*parseFloat(t.value)),i.amount=+t.value,n["a"].set(e.thresholds,t.index,i))},SET_THRESHOLD_GIF:function(e,t){var i=e.thresholds[t.index];i&&(t.value.trim().length?i.gif=t.value:(t.value=i.gif,t.isDeleted=!0,i.gif=null),n["a"].set(e.thresholds,t.index,i))},SET_THRESHOLD_COLOR:function(e,t){var i=e.thresholds[t.index];i&&(i[t.side]=t.value,n["a"].set(e.thresholds,t.index,i))},ADD_THRESHOLD:function(e){e.thresholds.push({amount:2*e.thresholds[e.thresholds.length-1].amount,buyColor:"rgb(0, 255, 0)",sellColor:"rgb(255, 0, 0)"})},SET_DECIMAL_PRECISION:function(e,t){e.decimalPrecision=t},DELETE_THREDELETE_THRESHOLD:function(e,t){e.thresholds.splice(t,1)},ENABLE_EXCHANGE:function(e,t){n["a"].set(e.exchanges[t],"disabled",!1)},DISABLE_EXCHANGE:function(e,t){n["a"].set(e.exchanges[t],"disabled",!0)},SHOW_EXCHANGE:function(e,t){n["a"].set(e.exchanges[t],"hidden",!1)},HIDE_EXCHANGE:function(e,t){n["a"].set(e.exchanges[t],"hidden",!0)},TOGGLE_EXCHANGE_VISIBILITY:function(e,t){n["a"].set(e.exchanges[t],"hidden",!0!==e.exchanges[t].hidden)},TOGGLE_SETTINGS_PANEL:function(e,t){var i=e.settings.indexOf(t);-1===i?e.settings.push(t):e.settings.splice(i,1)},TOGGLE_AUDIO:function(e,t){e.useAudio=!!t},TOGGLE_AUDIO_TEN_PERCENT:function(e,t){e.audioIncludeInsignificants=!!t},SET_AUDIO_VOLUME:function(e,t){e.audioVolume=t},SET_AUDIO_PITCH:function(e,t){e.audioPitch=t},SET_TIMEFRAME:function(e,t){e.timeframe=t},SET_EXCHANGE_THRESHOLD:function(e,t){n["a"].set(e.exchanges[t.exchange],"threshold",+t.threshold)},SET_EXCHANGE_MATCH:function(e,t){n["a"].set(e.exchanges[t.exchange],"match",t.match)},TOGGLE_CHART:function(e,t){e.showChart=!!t},SET_CHART_HEIGHT:function(e,t){e.chartHeight=t||null},SET_SIDEBAR_WIDTH:function(e,t){e.sidebarWidth=t||null},SET_CHART_REFRESH_RATE:function(e,t){e.chartRefreshRate=+t||0},SET_TIMEZONE_OFFSET:function(e,t){e.timezoneOffset=+t||0},TOGGLE_SERIE:function(e,t){var i=t.id,s=t.value;e.series[i]||(e.series[i]={}),n["a"].set(e.series[i],"enabled",!!s)},SET_SERIE_OPTION:function(e,t){var i=t.id,s=t.key,a=t.value;e.series[i]||(e.series[i]={}),n["a"].set(e.series[i],s,a)},SET_SERIE_TYPE:function(e,t){var i=t.id,s=t.value;e.series[i]||(e.series[i]={}),n["a"].set(e.series[i],"type",s)},SET_CHART_PRICE_MARGINS:function(e,t){e.series.price||(e.series.price={}),e.series.price={scaleMargins:t}},TOGGLE_EXCHANGES_BAR:function(e,t){e.showExchangesBar=!!t}}),l=(i("5319"),i("b85c")),u=i("c9d9"),h=i("b49a"),d=Object(r["parseQueryString"])();try{s=JSON.parse(localStorage.getItem("settings"))||{}}catch(k){console.log("[store] failed to load settings"),s={}}var p={};if(u["a"]){var _=window.location.hostname.match(/^([\d\w\-_]+)\..*\./i),m=["beta","www"];_&&_.length>=2&&-1===m.indexOf(_[1])&&(p.pair=_[1].replace(/_/g,"+").toUpperCase())}if(s.timeframe>1e3&&(s.timeframe/=1e3),s.statsCounters){var f,g=Object(l["a"])(s.statsCounters);try{for(g.s();!(f=g.n()).done;){var v=f.value;v.output=v.output.replace(/buyCount/g,"cbuy").replace(/sellCount/g,"csell").replace(/buyAmount/g,"vbuy").replace(/sellAmount/g,"vsell")}}catch(w){g.e(w)}finally{g.f()}}var b=Object.assign({},h,p,s,d),E={namespaced:!0,state:b,actions:o,mutations:c},O={pairs:[],showSearch:!1,actives:[],activeSeries:[],notices:[],isLoading:!1,supportedPairs:[],indexedProducts:{},proxyUrl:null,apiUrl:null,version:"DEV",buildDate:"now"},y={refreshExchange:function(e,t){var i=e.commit,s=!this.state.settings.exchanges[t]||this.state.settings.exchanges[t].match&&!this.state.settings.exchanges[t].disabled&&!this.state.settings.exchanges[t].hidden;i("EXCHANGE_UPDATED",{exchange:t,active:s})},showNotice:function(e,t){var i=e.commit,s=e.dispatch;s("hideNotice",t.id),!1!==t.delay&&(t.hideTimeout=setTimeout((function(){s("hideNotice",t.id)}),t.delay||2e3)),i("CREATE_NOTICE",t)},hideNotice:function(e,t){for(var i=e.commit,s=0;s<this.state.app.notices.length;s++)this.state.app.notices[s].id===t&&i("REMOVE_NOTICE",this.state.app.notices[s])}},C={SET_EXCHANGE_MATCH:function(e,t){n["a"].set(e.exchanges[t.exchange],"match",t.match)},EXCHANGE_UPDATED:function(e,t){var i=t.exchange,s=t.active;this.state.settings.exchanges[i]||n["a"].set(this.state.settings.exchanges,i,{});var a=e.actives.indexOf(i);s&&-1===a?e.actives.push(i):s||-1===a||e.actives.splice(a,1)},TOGGLE_LOADING:function(e,t){e.isLoading=!!t},CREATE_NOTICE:function(e,t){e.notices.push(t)},REMOVE_NOTICE:function(e,t){var i=e.notices.indexOf(t);-1!==i&&(t.hideTimeout&&clearTimeout(t.hideTimeout),e.notices.splice(i,1))},TOGGLE_SEARCH:function(e,t){e.showSearch=!!t},SET_OPTIMAL_DECIMAL:function(e,t){e.optimalDecimal=t},SET_API_URL:function(e,t){e.apiUrl=t},SET_PROXY_URL:function(e,t){e.proxyUrl=t},SET_API_SUPPORTED_PAIRS:function(e,t){e.apiSupportedPairs=t?"string"===typeof t?t.split(",").map((function(e){return e.trim()})):t:[]},SET_VERSION:function(e,t){e.version=t},SET_BUILD_DATE:function(e,t){e.buildDate=t},INDEX_PRODUCTS:function(e,t){var i,s=t.pairs,n=t.exchange,a=Object(l["a"])(s);try{for(a.s();!(i=a.n()).done;){var r=i.value;e.indexedProducts[r]?(e.indexedProducts[r].count++,-1===e.indexedProducts[r].exchanges.indexOf(n)&&e.indexedProducts[r].exchanges.push(n)):e.indexedProducts[r]={value:r,count:1,exchanges:[n]}}}catch(w){a.e(w)}finally{a.f()}}},T={namespaced:!0,state:O,actions:y,mutations:C};console.log(r),n["a"].use(a["a"]);var S,x=new a["a"].Store({modules:{app:T,settings:E}});x.state.settings.pair&&x.state.settings.pair.length&&(x.state.app.pairs=x.state.settings.pair.split("+")),x.subscribe((function(e,t){/^settings/.test(e.type)&&(clearTimeout(S),S=setTimeout((function(){console.log(e,"save..");var i,s=JSON.parse(JSON.stringify(t.settings));switch(localStorage.setItem("settings",JSON.stringify(s)),e.type){case"settings/SHOW_EXCHANGE":case"settings/HIDE_EXCHANGE":case"settings/TOGGLE_EXCHANGE_VISIBILITY":case"settings/ENABLE_EXCHANGE":case"settings/DISABLE_EXCHANGE":case"settings/SET_EXCHANGE_MATCH":i="string"===typeof e.payload.exchange?e.payload.exchange:e.payload,x.dispatch("app/refreshExchange",i);break}}),200))}));t["a"]=x},"4a04":function(e,t,i){"use strict";i("6412")},"4ee8":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQ5JREFUeNrslz0KwjAUgJNCF3EoiIuniIu7eJF6BE9kLyLuLvYULiJ0EJdC8QWe4NA0eT91sQ9CWkj7ffnhJTHm38MKvs2hLPD5AaX9pcAHnuF7x5WwCnAjkbBKcLYERSBDeB5p16JEpymQCidL2BHgJAk7EjxZIiZQQJkJc80LSsMR0IBHJYYEVspZ90YVWArmvm8t3M0UU1AW4XO3uULllDj1/HRZhzJdKJxiR91Qqg1FpShQsVIxTMMRqlIKh+Hfc0bAx8HPn2Tu8R/87RhGwe8JZ8aa8PAt9L4RH0gYEklw0pGMIJEMJx9KQcKhRBFo0iC8FicihgQZzr6Y9Eiw4KKr2ZeE4cKn8PEWYACxq1U+/EnHbQAAAABJRU5ErkJggg=="},"56d7":function(e,t,i){"use strict";i.r(t);i("ac1f"),i("466d"),i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{loading:e.isLoading},attrs:{id:"app","data-prefer":e.preferQuoteCurrencySize?"quote":"base","data-base":e.baseCurrency,"data-quote":e.quoteCurrency,"data-symbol":e.symbol,"data-pair":e.pair}},[i("div",{staticClass:"notices"},e._l(e.notices,(function(e,t){return i("Notice",{key:t,attrs:{notice:e}})})),1),e.showSettings?i("Settings",{on:{close:function(t){e.showSettings=!1}}}):e._e(),i("div",{staticClass:"app__wrapper"},[e.showSearch?i("div",{ref:"searchWrapper",staticClass:"app__search",on:{click:function(t){t.target===e.$refs.searchWrapper&&e.$store.commit("app/TOGGLE_SEARCH",!1)}}},[i("Autocomplete",{attrs:{load:e.search,selected:e.pairs},on:{submit:function(t){e.$store.commit("settings/SET_PAIR",t.join("+")),e.$store.commit("app/TOGGLE_SEARCH",!1)}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[i("span",[e._v(e._s(s.value)+" "),i("div",{staticClass:"badge"},[e._v(e._s(s.exchanges.join(", ")))])])]}}],null,!1,1471341488)})],1):e._e(),i("Header",{attrs:{price:e.price},on:{toggleSettings:function(t){e.showSettings=!e.showSettings}}}),i("div",{staticClass:"app__layout"},[i("div",{staticClass:"app__left"},[e.showChart?i("Chart"):e._e(),e.showChart&&e.showExchangesBar?i("Exchanges"):e._e()],1),i("div",{staticClass:"app__right"},[e.showCounters?i("Counters"):e._e(),e.showStats?i("Stats"):e._e(),i("TradeList")],1)])],1),i("dialogs-wrapper")],1)},a=[],r=(i("4de4"),i("c975"),i("13d5"),i("b64b"),i("d3b7"),i("07ac"),i("4d63"),i("25f0"),i("5319"),i("b85c")),o=i("5530"),c=i("2f62"),l=i("2fa3"),u=(i("99af"),i("4160"),i("a15b"),i("d81d"),i("fb6a"),i("a434"),i("3ca3"),i("159b"),i("ddb0"),i("53ca")),h=i("bc3a"),d=i.n(h),p=(i("498a"),i("d4ec")),_=i("bee2"),m=i("45eb"),f=i("7e84"),g=i("262e"),v=i("2caf"),b=(i("1276"),i("ba10")),E=i.n(b),O=i("4360"),y=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this),s.indexedProducts=[],s.connected=!1,s.valid=!1,s.price=null,s.error=null,s.shouldBeConnected=!1,s.reconnectionDelay=1e3,s._pair=[],s.options=Object.assign({},e||{}),s}return Object(_["a"])(i,[{key:"initialize",value:function(){try{var e=JSON.parse(localStorage.getItem(this.id));if(e&&+new Date-e.timestamp<6048e5&&("okex"!==this.id||e.timestamp>1560235687982)){if(e.data&&"object"===Object(u["a"])(e.data)&&Object.prototype.hasOwnProperty.call(e.data,"products"))for(var t in e.data)this[t]=e.data[t];else this.products=e.data;(!this.products||Array.isArray(this.products)&&!this.products.length||"object"===Object(u["a"])(this.products)&&!Object.keys(this.products).length)&&(this.products=null)}else console.info("[".concat(this.id,"] products data expired"))}catch(i){console.error("[".concat(this.id,"] unable to retrieve stored products"),i)}this.indexProducts()}},{key:"connect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&this.disconnect(),this.valid)return this.api?(console.warn("previous connection not fully closed"),new Promise((function(t,i){e.connectUponCloseResolver={resolve:t,reject:i}})).then(this.connect.bind(this))):(this.connectUponCloseResolver&&(this.connectUponCloseResolver.reject(),delete this.connectUponCloseResolver),this.shouldBeConnected=!0,console.log("[".concat(this.id,"] ").concat(t?"re":"","connecting... (").concat(this.pairs.join(", "),")")),!0)}},{key:"disconnect",value:function(){return clearTimeout(this.reconnectionTimeout),this.shouldBeConnected=!1,this.price=null,this.error=null,!0}},{key:"reconnect",value:function(){var e=this;clearTimeout(this.reconnectionTimeout),this.connected||(console.log("[".concat(this.id,"] schedule reconnection (").concat(this.reconnectionDelay," ms)")),this.reconnectionTimeout=setTimeout((function(){e.connected||e.connect(!0)}),this.reconnectionDelay),this.reconnectionDelay*=2)}},{key:"emitOpen",value:function(e){this.connected=!0,this.error=!1,this.reconnectionDelay=1e3,this.emit("open",e)}},{key:"queueTrades",value:function(e){e&&e.length&&(this.price=e[e.length-1].price,this.emit("trades",e))}},{key:"toFixed",value:function(e,t){var i=Math.pow(10,t);return Math.ceil(e*i)/i}},{key:"emitError",value:function(e){this.error=e.message||"Unknown error",this.emit("error")}},{key:"emitClose",value:function(e){this.connected=!1,this.api&&delete this.api,this.connectUponCloseResolver&&(this.connectUponCloseResolver.resolve(),delete this.connectUponCloseResolver),this.emit("close",e)}},{key:"getUrl",value:function(){return"function"===typeof this.options.url?this.options.url.apply(this,arguments):this.options.url}},{key:"formatLiveTrades",value:function(e){return e}},{key:"formatProducts",value:function(e){return e}},{key:"validatePair",value:function(e){var t=this;return this.valid=!1,"undefined"===typeof this.products?this.fetchProducts().then((function(){return t.validatePair(e)})):e&&(!e||(this.pair=e)&&this.pairs.length)?(this.valid=!0,this.emit("match",this.pair),Promise.resolve()):(console.log("[".concat(this.id,"] unknown pair ").concat(e)),this.emit("error",new Error("Unknown pair ".concat(e))),this.emit("match",null),Promise.resolve())}},{key:"refreshProducts",value:function(){return localStorage.removeItem(this.id),this.products=null,this.fetchProducts()}},{key:"indexProducts",value:function(){this.indexedProducts=[],this.products&&(Array.isArray(this.products)?this.indexedProducts=this.products.slice(0,this.products.length):"object"===Object(u["a"])(this.products)&&(this.indexedProducts=Object.keys(this.products)),O["a"].commit("app/INDEX_PRODUCTS",{pairs:this.indexedProducts,exchange:this.id}))}},{key:"fetchProducts",value:function(){var e=this;if(!this.endpoints||!this.endpoints.PRODUCTS)return this.products=[],Promise.resolve();var t="function"===typeof this.endpoints.PRODUCTS?this.endpoints.PRODUCTS(this.pair):this.endpoints.PRODUCTS;return Array.isArray(t)||(t=[t]),console.log("[".concat(this.id,"] fetching products..."),t),new Promise((function(i){return Promise.all(t.map((function(e){e=e.split("|");var t=e.length>1?e.shift():"GET",i=e[0];return new Promise((function(e){setTimeout((function(){e(fetch("".concat(O["a"].state.app.proxyUrl?O["a"].state.app.proxyUrl:"").concat(i),{method:t}).then((function(e){return e.json()})).catch((function(e){return console.log(e),null})))}),500)}))}))).then((function(t){if(console.log("[".concat(e.id,"] received API products response => format products")),-1!==t.indexOf(null)?t=null:1===t.length&&(t=t[0]),t){var s=e.formatProducts(t)||[];if("object"===Object(u["a"])(s)&&Object.prototype.hasOwnProperty.call(s,"products"))for(var n in s)e[n]=s[n];else e.products=s;console.log("[".concat(e.id,"] storing products"),e.products),localStorage.setItem(e.id,JSON.stringify({timestamp:+new Date,data:s}))}else e.products=null;e.indexProducts(),i(e.products)}))}))}},{key:"pair",set:function(e){var t=this;this.products&&e?this._pair=e.split("+").map((function(e){return t.matchPairName&&"function"===typeof t.matchPairName?t.matchPairName(e):Array.isArray(t.products)&&-1!==t.products.indexOf(e)?e:"object"===Object(u["a"])(t.products)&&t.products[e]||null})).filter((function(e){return!!e})):this._pair=[]},get:function(){return this._pair[0]}},{key:"pairs",get:function(){return this._pair}}]),i}(E.a),C=y,T=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="kraken",s.endpoints={PRODUCTS:"https://api.kraken.com/0/public/AssetPairs",TRADES:function(){return"https://api.kraken.com/0/public/Trades?pair=".concat(s.pair)}},s.options=Object.assign({url:function(){return"wss://ws.kraken.com"}},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){e.api.send(JSON.stringify({event:"subscribe",pair:[e.pair],subscription:{name:"trade"}})),e.emitOpen(i),t()},e.api.onclose=e.emitClose.bind(e),e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){var t=this;return!!(e&&e[1]&&e[1].length)&&e[1].map((function(e){return{exchange:t.id,timestamp:1e3*e[2],price:+e[0],size:+e[1],side:"b"===e[3]?"buy":"sell"}}))}},{key:"matchPairName",value:function(e){return e=e.trim().replace("/",""),!!(-1!==this.products.indexOf(e)||(e=e.replace("BTC","XBT"))&&-1!==this.products.indexOf(e))&&(-1===e.indexOf("/")&&(e=e.slice(0,e.length-3)+"/"+e.slice(e.length-3,e.length)),e)}},{key:"formatProducts",value:function(e){return Object.keys(e.result).map((function(t){return e.result[t].altname}))}}]),i}(C),S=T,x=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="bitmex",s.endpoints={PRODUCTS:"https://www.bitmex.com/api/v1/instrument/active",TRADES:function(){return"https://www.bitmex.com/api/v1/trade?symbol=".concat(s.pair,"&reverse=true&count=500")}},s.options=Object.assign({url:function(){return"wss://www.bitmex.com/realtime?subscribe=".concat(s.pairs.map((function(e){return"trade:".concat(e)})),",").concat(s.pairs.map((function(e){return"liquidation:".concat(e)})))}},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.quotedInUSD=/USD$/.test(e.pair)||/^XBT/.test(e.pair),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){e.emitOpen(i),t()},e.api.onclose=e.emitClose.bind(e),e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){var t=this;if(e&&e.data&&e.data.length){if("liquidation"===e.table&&"insert"===e.action)return e.data.map((function(e){return{exchange:t.id,timestamp:+new Date,price:e.price,size:e.leavesQty/(t.quotedInUSD?e.price:1),side:"Buy"===e.side?"buy":"sell",liquidation:!0}}));if("trade"===e.table&&"insert"===e.action)return e.data.map((function(e){return{exchange:t.id,timestamp:+new Date(e.timestamp),price:e.price,size:e.size/(t.quotedInUSD?e.price:1),side:"Buy"===e.side?"buy":"sell"}}))}return!1}},{key:"formatProducts",value:function(e){return e.map((function(e){return e.symbol}))}},{key:"matchPairName",value:function(e){return(-1!==this.products.indexOf(e)||!(!(e=e.replace("BTC","XBT"))||-1===this.products.indexOf(e)))&&e}}]),i}(C),k=x,w=i("d7ac"),P=i.n(w),D=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="huobi",s.types=[],s.contractTypesAliases={this_week:"CW",next_week:"NW",quarter:"CQ",next_quarter:"NQ"},s.endpoints={PRODUCTS:["https://api.huobi.pro/v1/common/symbols","https://api.hbdm.com/api/v1/contract_contract_info","https://api.hbdm.com/swap-api/v1/swap_contract_info"]},s.products&&"undefined"===typeof s.specs&&delete s.products,s.matchPairName=function(e){var t=s.products[e]||s.products[e.replace(/USD$/,"USDT")];if(!t)for(var i in s.products)if(e===s.products[i]){t=s.products[i];break}return t&&(-1!==t.indexOf("-")?s.types[t]="swap":-1!==t.indexOf("_")?s.types[t]="futures":s.types[t]="spot"),t||!1},s.options=Object.assign({url:function(e){return"futures"===s.types[e]?"wss://www.hbdm.com/ws":"swap"===s.types[e]?"wss://api.hbdm.com/swap-ws":"wss://api.huobi.pro/ws"}},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl(e.pair)),e.api.binaryType="arraybuffer",e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(t.data))},e.api.onopen=function(i){var s,n=Object(r["a"])(e.pairs);try{for(n.s();!(s=n.n()).done;){var a=s.value;e.api.send(JSON.stringify({sub:"market."+("futures"===e.types[a]?a.toUpperCase():a.toLowerCase())+".trade.detail",id:a}))}}catch(o){n.e(o)}finally{n.f()}e.emitOpen(i),t()},e.api.onclose=e.emitClose.bind(e),e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){var t=this,i=JSON.parse(P.a.inflate(e,{to:"string"}));if(i)if(i.ping)this.api.send(JSON.stringify({pong:i.ping}));else if(i.tick&&i.tick.data&&i.tick.data.length){var s=i.ch.replace(/market.(.*).trade.detail/,"$1");return i.tick.data.map((function(e){var i=+e.amount;return"undefined"!==typeof t.specs[s]&&(i=i*t.specs[s]/e.price),{exchange:t.id,timestamp:e.ts,price:+e.price,size:i,side:e.direction}}))}}},{key:"formatProducts",value:function(e){var t=this,i={},s={},n=["spot","futures","swap"];return e.forEach((function(e,a){e.data.forEach((function(e){var r;switch(n[a]){case"spot":r=(e["base-currency"]+e["quote-currency"]).toUpperCase(),i[r]=r;break;case"futures":r=e.symbol+"_"+t.contractTypesAliases[e.contract_type],i[e.symbol+"USD-"+e.contract_type.toUpperCase()]=r,i[e.contract_code]=r,s[r]=+e.contract_size;break;case"swap":i[e.symbol+"USD-PERPETUAL"]=e.contract_code,n[e.contract_code]="swap",s[e.contract_code]=+e.contract_size;break}}))})),{products:i,specs:s}}}]),i}(C),A=D,R=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="binance",s.endpoints={PRODUCTS:"https://api.binance.com/api/v1/ticker/allPrices",TRADES:function(){return"https://api.binance.com/api/v1/trades?symbol=".concat(s.pair.toUpperCase())}},s.matchPairName=function(e){return e=e.replace(/USD$/,"USDT"),-1!==s.products.indexOf(e)&&e.toLowerCase()},s.options=Object.assign({url:function(){return"wss://stream.binance.com:9443/ws/"+s.pair+"@aggTrade"}},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){e.emitOpen(i),t()},e.api.onclose=e.emitClose.bind(e),e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){return!!e&&[{exchange:this.id,timestamp:e.E,price:+e.p,size:+e.q,side:e.m?"sell":"buy"}]}},{key:"formatProducts",value:function(e){return e.map((function(e){return e.symbol}))}}]),i}(C),M=R,L=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="binance_futures",s.endpoints={PRODUCTS:"https://fapi.binance.com/fapi/v1/exchangeInfo"},s.matchPairName=function(e){return-1!==s.products.indexOf(e)?e.toLowerCase():(e=e.replace(/USD$/,"USDT"),-1!==s.products.indexOf(e)&&e.toLowerCase())},s.options=Object.assign({url:function(){return"wss://fstream.binance.com/stream?streams=".concat(s.pairs.map((function(e){return"".concat(e,"@aggTrade/").concat(e,"@forceOrder")})).join("/"))}},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){e.emitOpen(i),t()},e.api.onclose=e.emitClose.bind(e),e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){if(e&&e.data){if("aggTrade"===e.data.e)return[{exchange:this.id,timestamp:e.data.T,price:+e.data.p,size:+e.data.q,side:e.data.m?"sell":"buy"}];if("forceOrder"===e.data.e)return[{exchange:this.id,timestamp:e.data.o.T,price:+e.data.o.p,size:+e.data.o.q,side:"BUY"===e.data.o.S?"buy":"sell",liquidation:!0}]}return!1}},{key:"formatProducts",value:function(e){return e.symbols.map((function(e){return e.symbol}))}}]),i}(C),j=L,I=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="bitfinex",s.endpoints={PRODUCTS:"https://api.bitfinex.com/v1/symbols",TRADES:function(){return"https://api.bitfinex.com/v2/trades/t".concat(s.pair,"/hist?limit=1000")}},s.matchPairName=function(e){return-1!==s.products.indexOf(e)&&e},s.options=Object.assign({url:"wss://api.bitfinex.com/ws/2"},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){e.api.send(JSON.stringify({event:"subscribe",channel:"trades",symbol:"t"+e.pair})),e.emitOpen(i),t()},e.api.onclose=e.emitClose.bind(e),e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){if(e&&"te"===e[1])return[{exchange:this.id,timestamp:+new Date(e[2][1]),price:+e[2][3],size:Math.abs(e[2][2]),side:e[2][2]<0?"sell":"buy"}]}},{key:"formatProducts",value:function(e){return e.map((function(e){return e.toUpperCase()}))}}]),i}(C),U=I,B=(i("b0c0"),function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="bitstamp",s.endpoints={PRODUCTS:"https://www.bitstamp.net/api/v2/trading-pairs-info/",TRADES:function(){return"https://www.bitstamp.net/api/v2/transactions/".concat(s.pair)}},s.matchPairName=function(e){return-1!==s.products.indexOf(e)&&e.toLowerCase()},s.options=Object.assign({url:function(){return"wss://ws.bitstamp.net"}},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){var s,n=Object(r["a"])(e.pairs);try{for(n.s();!(s=n.n()).done;){var a=s.value;e.api.send(JSON.stringify({event:"bts:subscribe",data:{channel:"live_trades_"+a}}))}}catch(o){n.e(o)}finally{n.f()}e.emitOpen(i),t()},e.api.onclose=function(t){e.emitClose(t),clearInterval(e.keepalive)},e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){var t=e.data;if(t&&t.amount)return[{exchange:this.id,timestamp:+new Date(t.microtimestamp/1e3),price:t.price,size:t.amount,side:0===t.type?"buy":"sell"}]}},{key:"formatProducts",value:function(e){return e.map((function(e){return e.name.replace("/","")}))}}]),i}(C)),N=B,$=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="gdax",s.endpoints={PRODUCTS:"https://api.pro.coinbase.com/products",TRADES:function(){return"https://api.pro.coinbase.com/products/".concat(s.pair,"/trades")}},s.matchPairName=function(e){if(Array.isArray(s.products)){if(-1!==s.products.indexOf(e))return e.substr(0,3)+"-"+e.substr(3,e.length)}else if(s.products&&"object"===Object(u["a"])(s.products)&&s.products[e])return s.products[e];return!1},s.options=Object.assign({url:"wss://ws-feed.pro.coinbase.com"},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){e.api.send(JSON.stringify({type:"subscribe",channels:[{name:"matches",product_ids:[e.pair]}]})),e.emitOpen(i),t()},e.api.onclose=e.emitClose.bind(e),e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){e&&e.size>0&&this.queueTrades([{exchange:this.id,timestamp:+new Date(e.time),price:+e.price,size:+e.size,side:"buy"===e.side?"sell":"buy"}])}},{key:"formatProducts",value:function(e){return e.reduce((function(e,t){return e[t.base_currency+t.quote_currency]=t.id,e}),{})}}]),i}(C),H=$,G=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="hitbtc",s.endpoints={PRODUCTS:"https://api.hitbtc.com/api/2/public/symbol",TRADES:function(){return"https://api.hitbtc.com/api/2/public/trades/".concat(s.pair,"?sort=DESC&limit=500")}},s.options=Object.assign({url:"wss://api.hitbtc.com/api/2/ws"},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){e.api.send(JSON.stringify({method:"subscribeTrades",params:{symbol:e.pair}})),t(),e.emitOpen(i)},e.api.onclose=e.emitClose.bind(e),e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){var t=this;if(e)return"updateTrades"===e.method&&e.params&&e.params.data&&e.params.data.length?e.params.data.map((function(e){return{exchange:t.id,timestamp:+new Date(e.timestamp),price:+e.price,size:+e.quantity,side:e.side}})):void 0}},{key:"formatProducts",value:function(e){return e.map((function(e){return e.id}))}}]),i}(C),W=G,q=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="okex",s.types=[],s.tradeStack=[],s.dispatchTradesTimeout=null,s.endpoints={PRODUCTS:["https://www.okex.com/api/spot/v3/instruments","https://www.okex.com/api/swap/v3/instruments","https://www.okex.com/api/futures/v3/instruments"],TRADES:function(){return"https://www.okex.com/api/v1/trades.do?symbol=".concat(s.pair)}},s.products&&"undefined"===typeof s.specs&&delete s.products,s.matchPairName=function(e){var t=s.products[e]||s.products[e.replace(/USDT/i,"USD")];if(!t)for(var i in s.products)if(e===s.products[i]){t=s.products[i];break}return t&&(/\d+$/.test(t)?s.types[t]="futures":/-SWAP$/.test(t)?s.types[t]="swap":s.types[t]="spot"),t||!1},s.options=Object.assign({url:"wss://real.okex.com:8443/ws/v3"},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.binaryType="arraybuffer",e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(t.data))},e.api.onopen=function(i){e.api.send(JSON.stringify({op:"subscribe",args:e.pairs.map((function(t){return"".concat(e.types[t],"/trade:").concat(t)}))})),e.keepalive=setInterval((function(){e.api.send("ping")}),3e4),e.emitOpen(i),t()},e.api.onclose=function(t){e.emitClose(t),clearInterval(e.keepalive)},e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&(clearInterval(this.keepalive),this.api&&this.api.readyState<2&&this.api.close())}},{key:"formatLiveTrades",value:function(e){var t,i=this;try{t=e instanceof String?JSON.parse(e):JSON.parse(P.a.inflateRaw(e,{to:"string"}))}catch(s){return}if(t&&t.data&&t.data.length)return t.data.map((function(e){var t;return t="undefined"!==typeof i.specs[e.instrument_id]?(e.size||e.qty)*i.specs[e.instrument_id]/e.price:e.size,{exchange:i.id,timestamp:+new Date(e.timestamp),price:+e.price,size:+t,side:e.side}}))}},{key:"formatProducts",value:function(e){var t={},i={},s=["spot","swap","futures"];return e.forEach((function(e,n){e.forEach((function(e){var a=((e.base_currency?e.base_currency:e.underlying_index)+("spot"===s[n]?e.quote_currency.replace(/usdt$/i,"USD"):e.quote_currency)).toUpperCase();switch(s[n]){case"spot":t[a]=e.instrument_id;break;case"swap":t[a+"-SWAP"]=e.instrument_id,i[e.instrument_id]=+e.contract_val;break;case"futures":t[a+"-"+e.alias.toUpperCase()]=e.instrument_id,i[e.instrument_id]=+e.contract_val;break}}))})),{products:t,specs:i}}},{key:"pad",value:function(e,t){var i="000000000"+e;return i.substr(i.length-t)}}]),i}(C),K=q,z=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="poloniex",s.endpoints={PRODUCTS:"https://www.poloniex.com/public?command=returnTicker",TRADES:function(){return function(){return"https://poloniex.com/public?command=returnTradeHistory&currencyPair=".concat(s.pair,"&start=").concat(+new Date/1e3-900,"&end=").concat(+new Date/1e3)}}},s.options=Object.assign({url:"wss://api2.poloniex.com"},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){e.api.send(JSON.stringify({command:"subscribe",channel:e.pair})),e.emitOpen(i),t()},e.api.onclose=e.emitClose.bind(e),e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){var t=this;if(e&&3===e.length)return e[2]&&e[2].length?e[2].filter((function(e){return"t"===e[0]})).map((function(e){return{exchange:t.id,timestamp:+new Date(1e3*e[5]),price:+e[3],size:+e[4],side:e[2]?"buy":"sell"}})):void 0}},{key:"formatProducts",value:function(e){var t={};return Object.keys(e).forEach((function(e){t[e.split("_").reverse().join("").replace(/USDT$/,"USD")]=e})),t}}]),i}(C),F=z,V=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="deribit",s.endpoints={PRODUCTS:"https://www.deribit.com/api/v1/public/getinstruments"},s.options=Object.assign({url:function(){return"wss://www.deribit.com/ws/api/v2"}},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){e.skip=!0,e.api.send(JSON.stringify({method:"public/subscribe",params:{channels:["trades."+e.pair+".raw"]}})),e.keepalive=setInterval((function(){e.api.send(JSON.stringify({method:"public/ping"}))}),6e4),e.emitOpen(i),t()},e.api.onclose=function(t){e.emitClose(t),clearInterval(e.keepalive)},e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){var t=this;if(e.params&&e.params.data&&e.params.data.length)return e.params.data.map((function(e){var i={exchange:t.id,timestamp:+e.timestamp,price:+e.price,size:e.amount/e.price,side:e.direction};return e.liquidation&&(i.liquidation=!0),i}))}},{key:"formatProducts",value:function(e){return e.result.reduce((function(e,t){return e["perpetual"===t.settlement?t.baseCurrency+t.currency:t.instrumentName]=t.instrumentName,e}),{})}}]),i}(C),J=V,Q=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="bybit",s.products=["BTCUSD","ETHUSD","EOSUSD","XRPUSD"],s.endpoints={},s.options=Object.assign({url:function(){return"wss://stream.bybit.com/realtime"}},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(){e.skip=!0,e.api.send(JSON.stringify({op:"subscribe",args:["trade"]})),e.emitOpen(event),t()},e.api.onclose=function(t){e.emitClose(t)},e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){var t=this;if(e.data&&e.topic==="trade."+this.pair&&e.data.length)return e.data.map((function(e){return{exchange:t.id,timestamp:+new Date(e.timestamp),price:+e.price,size:e.size/e.price,side:"Buy"===e.side?"buy":"sell"}}))}},{key:"formatProducts",value:function(e){return e.result.reduce((function(e,t){return e["perpetual"===t.settlement?t.baseCurrency+t.currency:t.instrumentName]=t.instrumentName,e}),{})}}]),i}(C),X=Q,Y=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(e){var s;return Object(p["a"])(this,i),s=t.call(this,e),s.id="ftx",s.endpoints={PRODUCTS:"https://ftx.com/api/markets"},s.matchPairName=function(e){var t=s.products[e];if(!t)for(var i in s.products)if(e===s.products[i]){t=s.products[i];break}return t||!1},s.options=Object.assign({url:function(){return"wss://ftx.com/ws/"}},s.options),s.initialize(),s}return Object(_["a"])(i,[{key:"connect",value:function(){var e=this,t=Object(m["a"])(Object(f["a"])(i.prototype),"connect",this).call(this);return t?t instanceof Promise?t:new Promise((function(t,i){e.api=new WebSocket(e.getUrl()),e.api.onmessage=function(t){return e.queueTrades(e.formatLiveTrades(JSON.parse(t.data)))},e.api.onopen=function(i){e.skip=!0;var s,n=Object(r["a"])(e.pairs);try{for(n.s();!(s=n.n()).done;){var a=s.value;e.api.send(JSON.stringify({op:"subscribe",channel:"trades",market:a}))}}catch(o){n.e(o)}finally{n.f()}e.keepalive=setInterval((function(){e.api.send(JSON.stringify({op:"ping"}))}),15e3),e.emitOpen(i),t()},e.api.onclose=function(t){e.emitClose(t),clearInterval(e.keepalive)},e.api.onerror=function(){e.emitError({message:"".concat(e.id," disconnected")}),i()}})):Promise.reject()}},{key:"disconnect",value:function(){Object(m["a"])(Object(f["a"])(i.prototype),"disconnect",this).call(this)&&this.api&&this.api.readyState<2&&this.api.close()}},{key:"formatLiveTrades",value:function(e){var t=this;if(e&&e.data&&e.data.length)return e.data.map((function(e){var i={exchange:t.id,timestamp:+new Date(e.time),price:+e.price,size:e.size,side:e.side};return e.liquidation&&(i.liquidation=!0),i}))}},{key:"formatProducts",value:function(e){return e.result.reduce((function(e,t){var i=t.name.replace("/","SPOT").replace(/-PERP$/g,"-USD").replace(/[/-]/g,"");return e[i]=t.name,e}),{})}}]),i}(C),Z=Y,ee={},te={},ie={vbuy:0,vsell:0,lbuy:0,lsell:0,cbuy:0,csell:0},se=[],ne=null,ae=[],re=new s["a"]({data:function(){return{exchanges:[new k,new U,new M,new j,new N,new H,new F,new S,new K,new J,new A,new W,new X,new Z]}},computed:{pair:function(){return O["a"].state.settings.pair},timeframe:function(){return O["a"].state.settings.timeframe},exchangesSettings:function(){return O["a"].state.settings.exchanges},showChart:function(){return O["a"].state.settings.showChart},showSlippage:function(){return O["a"].state.settings.showSlippage},chartRange:function(){return O["a"].state.settings.chartRange},aggregateTrades:function(){return O["a"].state.settings.aggregateTrades},apiUrl:function(){return O["a"].state.app.apiUrl},proxyUrl:function(){return O["a"].state.app.proxyUrl},apiSupportedPairs:function(){return O["a"].state.app.apiSupportedPairs},actives:function(){return O["a"].state.app.actives},isLoading:function(){return O["a"].state.app.isLoading},preferQuoteCurrencySize:function(){return O["a"].state.settings.preferQuoteCurrencySize},showStats:function(){return O["a"].state.settings.showStats},showCounters:function(){return O["a"].state.settings.showCounters}},created:function(){var e=this;window.testapi=function(){e.testapi()},window.emitTrade=function(t,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t=t||"bitmex",null===i&&(i=e.getExchangeById(t).price);var r={exchange:t,timestamp:+new Date,price:i,size:s,side:n?"buy":"sell"};1===a&&(r.liquidation=!0),console.log(i*s,Object(l["formatAmount"])(i*s)),e.$emit("trades",[r]),e.$emit("trades.aggr",[r])},O["a"].subscribe((function(t){switch(t.type){case"app/EXCHANGE_UPDATED":ae=e.actives.slice(0,e.actives.length);break;case"settings/TOGGLE_STATS":case"settings/TOGGLE_COUNTERS":e.showStats||e.showCounters||!ne?(e.showStats||e.showCounters&&!ne)&&e.setupSumsInterval():e.clearSumsInterval();break}})),this.exchanges.forEach((function(t){t.on("trades",(function(i){if(i&&i.length){var s=i.length,n=e.aggregateTrades,a=e.showSlippage;if(n){for(var r=+new Date,o=0;o<s;o++){var c=i[o];if(null!==ne&&-1!==ae.indexOf(c.exchange)){var l=(e.preferQuoteCurrencySize?c.price:1)*c.size;ie.timestamp||(ie.timestamp=c.timestamp),c.liquidation?ie["l"+c.side]+=l:(ie["c"+c.side]++,ie["v"+c.side]+=l)}if(c.liquidation)se.push(c);else{if(c.ref=te[t.id]||c.price,te[t.id]=c.price,ee[t.id]){var u=ee[t.id];if(u.timestamp===c.timestamp&&u.side===c.side){u.size+=c.size,u.price+=c.price*c.size,u.high=Math.max(u.high||u.price/u.size,c.price),u.low=Math.min(u.low||u.price/u.size,c.price);continue}u.price/=u.size,a&&e.calculateSlippage(ee[t.id]),se.push(u)}ee[t.id]=Object.assign({},c),ee[t.id].timeout=r+50,ee[t.id].high=Math.max(c.ref,c.price),ee[t.id].low=Math.min(c.ref,c.price),ee[t.id].price*=ee[t.id].size}}e.$emit("trades",i)}else{for(var h=0;h<s;h++){var d=i[h];if(null!==ne&&-1!==ae.indexOf(d.exchange)){var p=(e.preferQuoteCurrencySize?d.price:1)*d.size;ie.timestamp||(ie.timestamp=d.timestamp),d.liquidation?ie["l"+d.side]+=p:(ie["c"+d.side]++,ie["v"+d.side]+=p)}a&&e.calculateSlippage(i[h]),se.push(i[h])}e.$emit("trades",i)}}})),t.on("open",(function(){e.$emit("connected",t.id)})),t.on("close",(function(){e.$emit("disconnected",t.id),t.shouldBeConnected&&!e.exchangesSettings[t.id].disabled&&t.reconnect(e.pair)})),t.on("match",(function(e){O["a"].commit("settings/SET_EXCHANGE_MATCH",{exchange:t.id,match:e})})),t.on("error",(function(){})),O["a"].dispatch("app/refreshExchange",t.id)}))},methods:{initialize:function(){console.log("[sockets] initializing ".concat(this.exchanges.length," exchange(s)")),setTimeout(this.connectExchanges.bind(this)),this.clearSumsInterval(),(O["a"].state.settings.showCounters||O["a"].state.settings.showStats)&&this.setupSumsInterval(),setInterval(this.emitAggr.bind(this),100)},connectExchanges:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.disconnectExchanges(),t||this.pair||O["a"].dispatch("app/showNotice",{type:"error",title:"No pair."}),t&&(this.pair=t.toUpperCase()),console.log("[socket.connect] connecting to ".concat(this.pair)),O["a"].dispatch("app/showNotice",{type:"info",title:"Fetching the latest products, please wait."}),Promise.all(this.exchanges.map((function(t){return t.validatePair(e.pair)}))).then((function(){var t=e.exchanges.filter((function(e){return e.valid}));if(t.length){var i=t.length;console.log("[socket.connect] ".concat(i," successfully matched with ").concat(e.pair)),t=t.filter((function(t){return!e.exchangesSettings[t.id].disabled})),O["a"].dispatch("app/showNotice",{type:"info",title:"Connecting to ".concat(t.length," exchange").concat(t.length>1?"s":"")}),console.log("[socket.connect] batch connect to ".concat(t.map((function(e){return e.id})).join(" / "))),Promise.all(t.map((function(e){return e.connect()}))).then((function(){O["a"].dispatch("app/showNotice",{type:"success",title:"Subscribed to ".concat(e.pair," on ").concat(t.length," exchange").concat(t.length>1?"s":"")+(t.length<i?" (".concat(i-t.length," hidden)"):"")})}))}else O["a"].dispatch("app/showNotice",{type:"error",delay:!1,title:"Cannot find ".concat(e.pair,", sorry")})}))},disconnectExchanges:function(){console.log("[socket.connect] disconnect exchanges asynchronously"),this.exchanges.forEach((function(e){return e.disconnect()}))},getExchangeById:function(e){var t,i=Object(r["a"])(this.exchanges);try{for(i.s();!(t=i.n()).done;){var s=t.value;if(s.id===e)return s}}catch(n){i.e(n)}finally{i.f()}return null},setupSumsInterval:function(){console.log("[socket] setup sums interval"),ne=setInterval(this.emitSums.bind(this),1e3)},clearSumsInterval:function(){ne&&(console.log("[socket] clear sums interval"),clearInterval(ne),ne=null)},emitSums:function(){ie.timestamp&&(this.$emit("sums",ie),ie.timestamp=null,ie.vbuy=0,ie.vsell=0,ie.cbuy=0,ie.csell=0,ie.lbuy=0,ie.lsell=0)},emitAggr:function(){for(var e=+new Date,t=Object.keys(ee),i=0;i<t.length;i++){var s=ee[t[i]];e>s.timeout&&(s.price/=s.size,this.calculateSlippage(s),se.push(s),delete ee[t[i]])}se.length&&(this.$emit("trades.aggr",se),se.splice(0,se.length))},calculateSlippage:function(e){var t=this.showSlippage;return"price"===t?e.slippage=-1*(e.ref-e.price):"bps"===t&&(e.slippage=Math.floor((e.high-e.low)/e.low*1e4)),e.slippage},canFetch:function(){return this.apiUrl&&(!this.apiSupportedPairs||-1!==this.apiSupportedPairs.indexOf(this.pair))},getApiUrl:function(e,t){var i=this.apiUrl;return i=i.replace(/\{from\}/,e),i=i.replace(/\{to\}/,t),i=i.replace(/\{timeframe\}/,1e3*this.timeframe),i=i.replace(/\{pair\}/,this.pair.toLowerCase()),i=i.replace(/\{exchanges\}/,this.actives.join("+")),i},fetchHistoricalData:function(e,t){var i=this,s=this.getApiUrl(e,t);return this.lastFetchUrl===s?Promise.reject():(this.lastFetchUrl=s,O["a"].commit("app/TOGGLE_LOADING",!0),this.$emit("fetchStart",t-e),new Promise((function(n,a){d.a.get(s,{onDownloadProgress:function(e){i.$emit("loadingProgress",{loaded:e.loaded,total:e.total,progress:e.loaded/e.total}),i._fetchedBytes+=e.loaded}}).then((function(s){if(!s.data||"object"!==Object(u["a"])(s.data))return a();var r=s.data.format,o=s.data.results;if(!o.length)return a();switch(s.data.format){case"point":var c=i.normalisePoints(o);e=c.from,t=c.to,o=c.data;break;default:break}var l={format:r,data:o,from:e,to:t};i.$emit("historical",l),n(l)})).catch((function(e){e&&O["a"].dispatch("app/showNotice",{type:"error",message:"API error (".concat(e.response&&e.response.data&&e.response.data.error?e.response.data.error:e.message||"unknown error",")")}),a()})).then((function(){i._fetchedTime+=t-e,i.$emit("fetchEnd",t-e),O["a"].commit("app/TOGGLE_LOADING",!1)}))})))},normalisePoints:function(e){if(!e||!e.length)return e;for(var t=+new Date(e[0].time)/1e3,i=[],s={},n=e.length-1;n>=0;n--)s[e[n].exchange]=e[n].open,"undefined"!==typeof e[n].vol_buy&&(e[n].vbuy=e[n].vol_buy,e[n].vsell=e[n].vol_sell,e[n].cbuy=e[n].count_buy,e[n].csell=e[n].count_sell,e[n].lbuy=e[n].liquidation_buy,e[n].lsell=e[n].liquidation_sell),e[n].timestamp=+new Date(e[n].time)/1e3,delete e[n].time,delete e[n].count,delete e[n].vol,"undefined"!==typeof e[n].vol_buy&&(delete e[n].vol_buy,delete e[n].vol_sell,delete e[n].count_buy,delete e[n].count_sell,delete e[n].liquidation_buy,delete e[n].liquidation_sell),e[n].time===t&&(delete s[e[n].exchange],i.push(e[n].exchange));for(var a in s)e.unshift({timestamp:t,exchange:a,open:s[a],high:s[a],low:s[a],close:s[a],vbuy:0,vsell:0,lbuy:0,lsell:0,cbuy:0,csell:0}),i.push(a);return{data:e,exchanges:i,from:e[0].timestamp,to:e[e.length-1].timestamp}}}}),oe=re,ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:"notice -"+e.notice.type},[i("span",{staticClass:"notice__icon icon-"}),i("div",{staticClass:"notice__title"},[e._v(e._s(e.notice.title))]),e.notice.message?i("div",{staticClass:"notice__message",domProps:{innerHTML:e._s(e.notice.message)}}):e._e()])},le=[],ue={props:["notice"],data:function(){return{}},mounted:function(){this._onClick=this.click.bind(this),this.$el.addEventListener("click",this._onClick)},beforeDestroy:function(){this.$el.removeEventListener("click",this._onClick)},methods:{click:function(){this.notice.click?this.notice.click(this):this.hide()},hide:function(){this.$store.dispatch("app/hideNotice",this.notice.id)}}},he=ue,de=i("2877"),pe=Object(de["a"])(he,ce,le,!1,null,null,null),_e=pe.exports,me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"header",attrs:{id:"header"}},[i("div",{staticClass:"header__wrapper"},[i("div",{staticClass:"header__title"},[e.pair?i("span",{staticClass:"pair"},[e._v(e._s(e.pair))]):e._e(),e._v(" "),i("span",{staticClass:"icon-quote"}),e._v(" "),i("span",{domProps:{innerHTML:e._s(e.price||"SignificantTrades")}})]),i("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],attrs:{type:"button",title:"Search"},on:{click:function(t){return e.$store.commit("app/TOGGLE_SEARCH",!e.showSearch)}}},[i("span",{staticClass:"icon-search"})]),e.showChart?i("dropdown",{attrs:{options:e.timeframes,selected:e.timeframe,placeholder:"tf."},on:{output:function(t){return e.$store.commit("settings/SET_TIMEFRAME",+t)}}}):e._e(),e.isPopupMode?e._e():i("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],attrs:{type:"button",title:"Open as popup"},on:{click:e.togglePopup}},[i("span",{staticClass:"icon-external-link"})]),i("button",{class:{active:e.useAudio},attrs:{type:"button"},on:{click:function(t){return e.$store.commit("settings/TOGGLE_AUDIO",!e.useAudio)}}},[i("span",{staticClass:"icon-volume-muted"})]),i("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("toggleSettings")}}},[i("span",{staticClass:"icon-cog"})])],1)])},fe=[],ge={props:["price"],data:function(){return{fetchLabel:"Fetch timeframe",isPopupMode:null!==window.opener,showTimeframeDropdown:!1,timeframeLabel:"15m",timeframes:{}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])("settings",["pair","useAudio","showChart","timeframe"])),Object(c["b"])("app",["showSearch"])),created:function(){var e=this;this._fetchLabel=this.fetchLabel.substr();var t=+new Date;[1,3,5,10,15,30,60,180,300,900].forEach((function(i){return e.timeframes[i]=Object(l["ago"])(t-1e3*i)})),this.updateTimeframeLabel()},methods:{setTimeframe:function(e){var t=this;document.activeElement.blur(),this.updateTimeframeLabel(e),setTimeout((function(){t.$store.commit("settings/SET_TIMEFRAME",e)}),50)},updateTimeframeLabel:function(e){this.timeframeLabel=Object(l["ago"])(+new Date-1e3*(e||this.timeframe))},togglePopup:function(){window.open(window.location.href,"sig".concat(this.pair),"toolbar=no,status=no,width=350,height=500"),setTimeout((function(){window.close()}),500)}}},ve=ge,be=(i("3b93"),Object(de["a"])(ve,me,fe,!1,null,null,null)),Ee=be.exports,Oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"autocomplete"},[i("div",{staticClass:"autocomplete__wrapper"},[i("div",{staticClass:"autocomplete__items"},[e._l(e.items,(function(t,s){return i("div",{key:s,staticClass:"autocomplete__item",domProps:{textContent:e._s(t)},on:{click:function(t){return e.removeItem(s)}}})})),i("div",{ref:"input",staticClass:"autocomplete__input",attrs:{contenteditable:"",placeholder:e.placeholder},on:{focus:e.open,input:function(t){return e.search(t.target.innerText)},keydown:e.handleKeydown}})],2),i("button",{staticClass:"btn -blue autocomplete__submit",class:{active:e.items.length>0},on:{click:e.submit}},[i("i",{staticClass:"icon-check"})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"autocomplete__dropdown"},e._l(e.availableOptions,(function(t,s){return i("div",{key:s,staticClass:"autocomplete__option",class:{active:e.activeOptionIndex===s},on:{click:function(t){return e.addItem(s)}}},[e._t("default",[e._v(e._s(t))],{item:t})],2)})),0)])},ye=[],Ce=(i("841c"),{props:{placeholder:{type:String,default:"Type something..."},load:{type:Function},selected:{type:Array,default:new Array}},data:function(){return{isOpen:!1,activeOptionIndex:null,options:[],items:[]}},computed:{availableOptions:function(){var e=this;return this.options.filter((function(t){return-1===e.items.indexOf(t&&"object"===Object(u["a"])(t)?t.value:t)}))}},created:function(){this.items=this.selected.slice(0,this.selected.length)},mounted:function(){setTimeout(this.focus.bind(this))},methods:{search:function(e){console.log("search",e),this.activeOptionIndex=null,this.load&&(Array.isArray(this.load)?this.options=this.load.filter((function(t){return-1!==t.indexOf(e)})):"function"===typeof this.load&&(this.options=this.load(e)),this.options||(this.options=[]),this.options.splice(50,this.options.length),this.options.length?(this.activeOptionIndex=0,this.open()):this.close())},open:function(){!this.isOpen&&this.options.length&&(this.bindClickOutside(),this.isOpen=!0)},close:function(){this.isOpen&&(this.unbindClickOutside(),console.log("close"),this.isOpen=!1)},addItem:function(e){var t=this.availableOptions[e],i=t&&"object"===Object(u["a"])(t)?t.value:t;i&&-1===this.items.indexOf(i)&&(this.items.push(i),this.$refs.input.innerText="",this.activeOptionIndex=null)},removeItem:function(e){this.items.splice(e,1)},handleKeydown:function(e){switch(e.which){case 13:event.preventDefault(),null!==this.activeOptionIndex?this.addItem(this.activeOptionIndex):this.items.length&&!this.$refs.input.innerText.length&&this.submit();break;case 8:this.items.length&&!this.$refs.input.innerText.length&&(this.removeItem(this.items.length-1),event.preventDefault());break;case 38:case 40:this.options.length&&(38===e.which?this.activeOptionIndex=Math.max(0,this.activeOptionIndex-1):40===e.which&&(null===this.activeOptionIndex?this.activeOptionIndex=0:this.activeOptionIndex=Math.min(this.availableOptions.length-1,this.activeOptionIndex+1)));break}},submit:function(){this.items.length&&this.$emit("submit",this.items)},focus:function(){if(this.$refs.input.focus(),"undefined"!==typeof window.getSelection&&"undefined"!=typeof document.createRange){var e=document.createRange();e.selectNodeContents(this.$refs.input),e.collapse(!1);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else if("undefined"!=typeof document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(this.$refs.input),i.collapse(!1),i.select()}this.$refs.input.innerText.length&&this.search(this.$refs.input.innerText)},bindClickOutside:function(){var e=this;this._clickOutsideHandler||(this._clickOutsideHandler=function(t){e.$el===t.target||e.$el.contains(t.target)||e.close()}.bind(this),document.addEventListener("mousedown",this._clickOutsideHandler))},unbindClickOutside:function(){this._clickOutsideHandler&&(document.removeEventListener("mousedown",this._clickOutsideHandler),delete this._clickOutsideHandler)}}}),Te=Ce,Se=Object(de["a"])(Te,Oe,ye,!1,null,null,null),xe=Se.exports,ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings__container stack__container",attrs:{id:"settings"},on:{mousedown:function(t){t.target===e.$el&&e.$emit("close")}}},[i("div",{staticClass:"stack__scroller"},[i("div",{staticClass:"stack__wrapper"},[i("a",{staticClass:"stack__toggler icon-cross",attrs:{href:"#"},on:{click:function(t){return e.$emit("close")}}}),i("div",{staticClass:"form-group settings-pair mb8"},[i("label",[e._v(" Pair "),i("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info-circle",attrs:{title:"The pair to aggregate from"}})]),i("input",{staticClass:"form-control",attrs:{type:"string",placeholder:"BTCUSD"},domProps:{value:e.pair},on:{change:function(t){return e.$store.commit("settings/SET_PAIR",t.target.value)}}}),e.showPairSubdomainHelp?i("small",{staticClass:"help-text mt8"},[i("i",{staticClass:"icon-info-circle"}),e._v(" Consider using "),i("a",{attrs:{href:"https://"+e.pair.replace(/\+/g,"_").toLowerCase()+".aggr.trade"}},[e._v("https://"+e._s(e.pair.replace(/\+/g,"_").toLowerCase())+".aggr.trade")]),e._v(" to hook your settings to "),i("strong",[e._v(e._s(e.pair))]),e._v(" indefinitely ! ")]):e._e()]),i("div",{staticClass:"mb8"},[i("div",{staticClass:"form-group mb8"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control -auto",attrs:{title:"Size display preference"}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.preferQuoteCurrencySize},on:{change:function(t){return e.$store.commit("settings/SET_QUOTE_AS_PREFERED_CURRENCY",t.target.checked)}}}),i("div",{attrs:{on:"quote",off:"base"}}),i("span",[e._v(" Prefer "),i("strong",[e._v(e._s(e.preferQuoteCurrencySize?"quote":"base"))]),e._v(" ( "),i("i",{class:e.preferQuoteCurrencySize?"icon-quote":"icon-base"}),e._v(" ) currency ")])])])]),i("div",{staticClass:"settings__title",class:{closed:e.settings.indexOf("list")>-1},on:{click:function(t){return e.$store.commit("settings/TOGGLE_SETTINGS_PANEL","list")}}},[e._v(" Trades list "),i("i",{staticClass:"icon-up"})]),i("div",{staticClass:"mb8"},[i("div",{staticClass:"column"},[i("div",{staticClass:"form-group -fill"},[i("label",[e._v(" Max rows "),i("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info-circle",attrs:{title:"Numbers of trades to keep visible"}})]),i("input",{staticClass:"form-control",attrs:{type:"number",min:"0",max:"1000",step:"1"},domProps:{value:e.maxRows},on:{change:function(t){return e.$store.commit("settings/SET_MAX_ROWS",t.target.value)}}})]),i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"form-group -tight",attrs:{title:"Show exchange's logo when available"}},[i("label",[e._v("Logo")]),i("label",{staticClass:"checkbox-control checkbox-control-input flex-right"},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.showLogos},on:{change:function(t){return e.$store.commit("settings/TOGGLE_LOGOS",t.target.checked)}}}),i("div")])]),i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"form-group -tight",attrs:{title:"Toggle aggregation"}},[i("label",[e._v("Aggr.")]),i("label",{staticClass:"checkbox-control -aggr checkbox-control-input flex-right",on:{change:function(t){return e.$store.commit("settings/TOGGLE_AGGREGATION",t.target.checked)}}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.aggregateTrades}}),i("div")])]),i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"form-group -tight",attrs:{title:"ONLY show liquidation"}},[e._m(0),i("label",{staticClass:"checkbox-control -rip checkbox-control-input flex-right",on:{change:function(t){return e.$store.commit("settings/TOGGLE_LIQUIDATIONS_ONLY",t.target.checked)}}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.liquidationsOnly}}),i("div")])]),i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"form-group -tight",attrs:{title:"price"===e.showSlippage?"Show slippage in $":"bps"===e.showSlippage?"Show slippage in basis point (bps)":"Slippage disabled"}},[i("label",[e._v("Slipp.")]),i("label",{staticClass:"checkbox-control -slippage checkbox-control-input flex-right",on:{click:function(t){return t.stopPropagation(),e.$store.commit("settings/TOGGLE_SLIPPAGE")}}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.showSlippage}}),i("div"),"price"===e.showSlippage?i("span",[i("i",{staticClass:"icon-dollar"})]):e._e(),"bps"===e.showSlippage?i("span",[i("i",{staticClass:"icon-bps",staticStyle:{"font-size":"1.5em"}})]):e._e()])])])]),i("div",{staticClass:"settings__title",class:{closed:e.settings.indexOf("thresholds")>-1},on:{click:function(t){return e.$store.commit("settings/TOGGLE_SETTINGS_PANEL","thresholds")}}},[e._v(" Thresholds ("+e._s(e.thresholds.length)+") "),i("i",{staticClass:"icon-up"})]),i("div",{staticClass:"settings-thresholds settings-section mb8"},[i("div",{staticClass:"settings-section__controls"},[i("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"settings-thresholds__display-toggle",attrs:{href:"javascript:void(0);",title:"Switch thresholds display"},on:{click:function(t){return e.$store.commit("settings/TOGGLE_THRESHOLDS_TABLE",!e.showThresholdsAsTable)}}},[e._v(e._s(e.showThresholdsAsTable?"slider":"table"))]),e._v(" | "),i("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"settings-section__add",attrs:{href:"javascript:void(0);",title:"Add threshold"},on:{click:function(t){return e.$store.commit("settings/ADD_THRESHOLD")}}},[e._v(" Add "),i("i",{staticClass:"icon-add"})])]),i("Thresholds",{ref:"thresholdsComponent"})],1),i("div",{staticClass:"settings__title",class:{closed:e.settings.indexOf("audio")>-1},on:{click:function(t){return e.$store.commit("settings/TOGGLE_SETTINGS_PANEL","audio")}}},[e._v(" Audio "),i("i",{staticClass:"icon-up"})]),i("div",{staticClass:"settings-audio mb8 -activable column",class:{active:e.useAudio}},[i("div",{staticClass:"form-group -tight"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control -on-off checkbox-control-input flex-right",attrs:{title:"Enable audio"}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.useAudio},on:{change:function(t){return e.$store.commit("settings/TOGGLE_AUDIO",t.target.checked)}}}),i("div")])]),i("div",{staticClass:"form-group -tight"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control checkbox-control-input flex-right",attrs:{title:"Include orders down to 10% of significant orders"}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.audioIncludeInsignificants},on:{change:function(t){return e.$store.commit("settings/TOGGLE_AUDIO_TEN_PERCENT",t.target.checked)}}}),i("div",{staticClass:"icon-expand"})])]),i("div",{staticClass:"form-group -fill"},[i("input",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top"},expression:"{ placement: 'top' }"}],attrs:{type:"range",min:"0",max:"10",step:".1",title:"ajust gain ("+e.audioVolume+")"},domProps:{value:e.audioVolume},on:{change:function(t){return e.$store.commit("settings/SET_AUDIO_VOLUME",t.target.value)}}})]),i("div",{staticClass:"form-group -fill"},[i("input",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"top"},expression:"{ placement: 'top' }"}],attrs:{type:"range",min:".25",max:"2.5",step:".05",title:"ajust pitch ("+e.audioPitch+")"},domProps:{value:e.audioPitch},on:{change:function(t){return e.$store.commit("settings/SET_AUDIO_PITCH",t.target.value)}}})])]),i("div",{staticClass:"settings__title",class:{closed:e.settings.indexOf("stats")>-1},on:{click:function(t){return e.$store.commit("settings/TOGGLE_SETTINGS_PANEL","stats")}}},[e._v(" Stats "),i("i",{staticClass:"icon-up"})]),i("div",{staticClass:"settings-stats settings-section mb8 -activable column mb8",class:{active:e.showStats}},[i("div",{staticClass:"settings-section__controls"},[i("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"settings-controls__add",attrs:{href:"javascript:void(0);",title:"Add a stat"},on:{click:function(t){e.$store.commit("settings/CREATE_STAT"),e.openStat(e.statsCounters.length-1)}}},[e._v(" Add "),i("i",{staticClass:"icon-add"})])]),i("div",{staticClass:"form-group -tight"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control -on-off checkbox-control-input flex-right",attrs:{title:"Enable stats"}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.showStats},on:{change:function(t){return e.$store.commit("settings/TOGGLE_STATS",t.target.checked)}}}),i("div")])]),i("div",{staticClass:"form-group -fill"},[i("div",{staticClass:"column"},[i("div",{staticClass:"form-group -fill"},[i("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Period (minutes)"},domProps:{value:e.statsPeriodStringified},on:{change:function(t){return e.$store.commit("settings/SET_STATS_PERIOD",t.target.value)}}})]),i("div",{staticClass:"form-group -tight"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control checkbox-control-input flex-right",attrs:{title:"Enable graph"}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.statsChart},on:{change:function(t){return e.$store.commit("settings/TOGGLE_STATS_CHART",t.target.checked)}}}),i("div")])])]),e._l(e.statsCounters,(function(t,s){return i("div",{key:s,staticClass:"column mt8"},[i("div",{staticClass:"form-group -tight"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control -on-off checkbox-control-input flex-right",attrs:{title:"Enable counter"}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.enabled},on:{change:function(t){return e.$store.dispatch("settings/updateStat",{index:s,prop:"enabled",value:t.target.checked})}}}),i("div")])]),i("div",{staticClass:"form-group -fill -center"},[e._v(" "+e._s(t.name)+" ")]),i("div",{staticClass:"form-group -tight"},[i("button",{staticClass:"btn -green",on:{click:function(t){return e.openStat(s)}}},[i("i",{staticClass:"icon-edit"})])])])}))],2)]),i("div",{staticClass:"settings__title",class:{closed:e.settings.indexOf("counters")>-1},on:{click:function(t){return e.$store.commit("settings/TOGGLE_SETTINGS_PANEL","counters")}}},[e._v(" Counter "),i("i",{staticClass:"icon-up"})]),i("div",{staticClass:"settings-counters mb8 -activable column",class:{active:e.showCounters}},[i("div",{staticClass:"form-group -tight"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control -on-off checkbox-control-input flex-right",attrs:{title:"Enable counters"}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.showCounters},on:{change:function(t){return e.$store.commit("settings/TOGGLE_COUNTERS",t.target.checked)}}}),i("div")])]),i("div",{staticClass:"form-group -tight"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control -count-or-volume checkbox-control-input flex-right",attrs:{title:"Sum amount of trades instead of volume"}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.countersCount},on:{change:function(t){return e.$store.commit("settings/TOGGLE_COUNTERS_COUNT",t.target.checked)}}}),i("div")])]),i("div",{staticClass:"form-group -fill"},[i("input",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"form-control",attrs:{title:"Counters step separed by a comma (ie: 1m, 5m, 10m, 15m)",type:"string",placeholder:"Enter a set of timeframe (ie 1m, 15m)"},domProps:{value:e.countersStepsStringified},on:{change:function(t){return e.replaceCounters(t.target.value)}}})])]),i("div",{staticClass:"settings__title",class:{closed:e.settings.indexOf("chart")>-1},on:{click:function(t){return e.$store.commit("settings/TOGGLE_SETTINGS_PANEL","chart")}}},[e._v(" Chart "),i("i",{staticClass:"icon-up"})]),i("div",{staticClass:"settings-chart mb8 -activable column",class:{active:e.showChart}},[i("div",{staticClass:"form-group -tight"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control -on-off checkbox-control-input flex-right",attrs:{title:"Enable chart"}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.showChart},on:{change:function(t){return e.$store.commit("settings/TOGGLE_CHART",t.target.checked)}}}),i("div")])]),i("div",{staticClass:"-fill"},[i("div",{staticClass:"form-group mb8"},[i("span",[e._v(" Refresh chart every "),i("editable",{attrs:{content:e.chartRefreshRate},on:{output:function(t){return e.$store.commit("settings/SET_CHART_REFRESH_RATE",t)}}}),e._v(" ms ")],1)]),i("div",{staticClass:"form-group mb8"},[i("span",[i("label",{staticClass:"checkbox-control flex-left"},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:!!e.timezoneOffset},on:{change:function(t){e.$store.commit("settings/SET_TIMEZONE_OFFSET",e.timezoneOffset?0:6e4*(new Date).getTimezoneOffset()*-1)}}}),i("div"),i("span",[e._v("Show local time")])])])])])]),i("div",{staticClass:"settings__title",class:{closed:e.settings.indexOf("exchanges")>-1},on:{click:function(t){return e.$store.commit("settings/TOGGLE_SETTINGS_PANEL","exchanges")}}},[e._v(" Exchanges "),i("i",{staticClass:"icon-up"})]),i("div",{staticClass:"form-group"},[i("div",{staticClass:"settings-exchanges"},[e._l(e.exchanges,(function(e,t){return i("Exchange",{key:t,attrs:{exchange:e}})})),e.exchanges.length?e._e():i("div",{staticClass:"mb8"},[e._v("You are not connected to any exchanges")])],2)]),i("div",{staticClass:"settings__title",class:{closed:e.settings.indexOf("other")>-1},on:{click:function(t){return e.$store.commit("settings/TOGGLE_SETTINGS_PANEL","other")}}},[e._v(" Other "),i("i",{staticClass:"icon-up"})]),i("div",{staticClass:"mb8"},[i("div",{staticClass:"form-group mb8"},[i("label",{staticClass:"checkbox-control"},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:!!e.decimalPrecision},on:{change:function(t){return e.$store.commit("settings/SET_DECIMAL_PRECISION",e.decimalPrecision?null:2)}}}),i("div"),i("span",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),e.currentTarget.children[0].focus()}}},[e._v(" Round up to "),i("editable",{attrs:{placeholder:"auto",content:e.decimalPrecision},on:{output:function(t){return e.$store.commit("settings/SET_DECIMAL_PRECISION",t)}}}),e._v(" decimal(s) ")],1)])]),i("div",{staticClass:"form-group mb8"},[i("label",{staticClass:"checkbox-control"},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.showExchangesBar},on:{change:function(t){return e.$store.commit("settings/TOGGLE_EXCHANGES_BAR",t.target.checked)}}}),i("div"),i("span",[e._v("Show exchanges bar")])])])]),i("div",{staticClass:"mt15 settings__footer flex-middle"},[i("div",{staticClass:"form-group"},[e.version?i("div",[i("span",[e._v(" v"+e._s(e.version)+" "),i("sup",{staticClass:"version-date"},[e._v(e._s(e.buildDate))])]),i("i",{staticClass:"divider"},[e._v("|")]),i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.reset()}}},[e._v("reset")]),i("i",{staticClass:"divider"},[e._v("|")]),i("a",{attrs:{target:"_blank",href:"https://github.com/Tucsky/SignificantTrades",title:"Run your own instance !"}},[e._v("github")]),i("i",{staticClass:"divider"},[e._v("|")]),i("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{animateFill:!1,interactive:!0,theme:"blue"},expression:"{\n                animateFill: false,\n                interactive: true,\n                theme: 'blue'\n              }"}],attrs:{target:"_blank",href:"bitcoin:3PK1bBK8sG3zAjPBPD7g3PL14Ndux3zWEz"}},[e._v("donate")])]):e._e()])])])])])},we=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"condensed"},[i("small",[e._v("Rip only")])])}],Pe=i("c9d9"),De=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings-exchange",class:{"-active":e.exchange.connected,"-enabled":!e.settings.disabled,"-loading":!e.settings.disabled&&!e.exchange.connected&&e.exchange.valid,"-error":e.exchange.error,"-unmatched":!e.exchange.valid,"-invisible":e.settings.hidden,"-expanded":e.expanded}},[i("div",{staticClass:"settings-exchange__header",on:{click:e.toggleExchange}},[isNaN(e.exchangeMultiplier)||1===e.exchangeMultiplier?e._e():i("span",{staticClass:"settings-exchange__threshold"},[e._v(e._s(e.$root.formatAmount(e.minimumThreshold*e.exchangeMultiplier)))]),i("div",{staticClass:"settings-exchange__identity"},[i("div",{staticClass:"settings-exchange__name"},[e._v(e._s(e.exchange.id.replace("_"," ")))]),e.exchange.error?i("small",{staticClass:"settings-exchange__error"},[e._v(" "+e._s(e.exchange.error)+" ")]):e._e(),e.exchange.price?i("small",{staticClass:"settings-exchange__price",domProps:{innerHTML:e._s(e.$root.formatPrice(e.exchange.price))}}):e._e()]),i("div",{staticClass:"settings-exchange__controls"},[i("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"settings-exchange__visibility",attrs:{title:e.exchange.hidden?"Show":"Hide (from everything)"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.$store.commit("settings/TOGGLE_EXCHANGE_VISIBILITY",e.exchange.id)}}},[i("i",{staticClass:"icon-eye"})]),i("button",{staticClass:"settings-exchange__more",on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.expanded=!e.expanded}}},[i("i",{staticClass:"icon-down"})])])]),e.expanded?i("div",{staticClass:"settings-exchange__detail"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"column",staticStyle:{"justify-content":"space-between"}},[i("span",{staticClass:"condensed"},[e._v("Adj. threshold:")]),1!==e.exchanges[e.exchange.id].threshold?i("span",[e._v(e._s(e.$root.formatAmount(e.minimumThreshold*e.exchangeMultiplier)))]):e._e()]),i("slider",{attrs:{step:1e-4,min:0,max:2,value:e.exchanges[e.exchange.id].threshold},on:{reset:function(t){return e.$store.commit("settings/SET_EXCHANGE_THRESHOLD",{exchange:e.exchange.id,threshold:1})},output:function(t){return e.$store.commit("settings/SET_EXCHANGE_THRESHOLD",{exchange:e.exchange.id,threshold:t})}}})],1),e.exchange.indexedProducts.length?i("div",{staticClass:"form-group mt8"},[e.canRefreshProducts?i("button",{staticClass:"btn -red -small",on:{click:e.refreshProducts}},[e._v(" Refresh products ("+e._s(e.exchange.indexedProducts.length)+") ")]):e._e()]):e._e()]):e._e()])},Ae=[],Re={data:function(){return{canRefreshProducts:!0,expanded:!1}},props:["exchange"],computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])("settings",["pair","exchanges"])),{},{settings:function(){return this.$store.state.settings.exchanges[this.exchange.id]},minimumThreshold:function(){return this.$store.state.settings.thresholds[0].amount},exchangeMultiplier:function(){return"undefined"===typeof this.$store.state.settings.exchanges[this.exchange.id].threshold?1:this.$store.state.settings.exchanges[this.exchange.id].threshold}}),methods:{toggleExchange:function(){this.settings.disabled?(this.exchange.connect(this.pair),this.$store.commit("settings/ENABLE_EXCHANGE",this.exchange.id)):(this.exchange.disconnect(),this.$store.commit("settings/DISABLE_EXCHANGE",this.exchange.id))},refreshProducts:function(){var e=this;this.canRefreshProducts=!1,setTimeout((function(){e.canRefreshProducts=!0}),3e3),this.exchange.refreshProducts().then((function(){e.exchange.pair=e.pair,e.exchange.connect(),e.$store.dispatch("app/showNotice",{type:"success",title:"".concat(e.exchange.id,"'s products refreshed")})}))}}},Me=Re,Le=(i("c10c"),Object(de["a"])(Me,De,Ae,!1,null,null,null)),je=Le.exports,Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"thresholds",class:{"-dragging":e.dragging,"-rendering":e.rendering}},[null!==e.picking?i("verte",{ref:"picker",style:{opacity:0,position:"absolute"},attrs:{display:"widget",draggable:!0,picker:"square",model:"rgb",colorHistory:e.colors,value:e.thresholds[e.picking.index][e.picking.side]},on:{input:e.updateColor}}):e._e(),e.showThresholdsAsTable?i("table",{staticClass:"thresholds-table"},e._l(e.thresholds,(function(t,s){return i("tr",{key:"threshold-"+s},[i("td",{staticClass:"thresholds-table__input"},[i("input",{attrs:{type:"number",placeholder:"Amount*"},domProps:{value:e.thresholds[s].amount},on:{change:function(t){return e.$store.commit("settings/SET_THRESHOLD_AMOUNT",{index:s,value:t.target.value})}}}),i("i",{staticClass:"icon icon-currency"})]),i("td",{staticClass:"thresholds-table__input"},[i("input",{attrs:{type:"text",placeholder:"Giphy"},domProps:{value:e.thresholds[s].gif},on:{change:function(t){return e.$store.commit("settings/SET_THRESHOLD_GIF",{index:s,value:t.target.value})}}})]),i("td",{staticClass:"thresholds-table__color",style:{backgroundColor:e.thresholds[s].buyColor},on:{click:function(t){return e.openPicker("buyColor",s,t)}}}),i("td",{staticClass:"thresholds-table__color",style:{backgroundColor:e.thresholds[s].sellColor},on:{click:function(t){return e.openPicker("sellColor",s,t)}}}),i("td",{staticClass:"thresholds-table__delete",on:{click:function(t){return e.deleteThreshold(s)}}},[i("i",{staticClass:"icon-cross"})])])})),0):i("div",{staticClass:"thresholds-slider"},[i("div",{staticClass:"thresholds-gradients"},[i("div",{ref:"buysGradient",staticClass:"thresholds-gradients__buys"}),i("div",{ref:"sellsGradient",staticClass:"thresholds-gradients__sells"})]),i("div",{ref:"thresholdContainer",staticClass:"thresholds-slider__bar"},e._l(e.thresholds,(function(t,s){return i("div",{key:"threshold-"+s,staticClass:"thresholds-slider__handler",class:{"-selected":e.selectedIndex===s},attrs:{"data-amount":e.$root.formatAmount(t.amount,2)}})})),0),null!==e.selectedIndex?i("div",{ref:"thresholdPanel",staticClass:"threshold-panel",class:{"-minimum":0===e.selectedIndex},style:{transform:"translateX("+this.panelOffsetPosition+"px)"},on:{click:function(t){e.editing=!0}}},[i("div",{staticClass:"threshold-panel__caret",style:{transform:"translateX("+this.panelCaretPosition+"px)"}}),i("a",{staticClass:"threshold-panel__close icon-cross",attrs:{href:"#"},on:{click:function(t){e.selectedIndex=null,e.editing=!1,e.picking=null}}}),i("h3",[e._v(" if amount > "),i("editable",{attrs:{content:e.thresholds[e.selectedIndex].amount},on:{output:function(t){return e.$store.commit("settings/SET_THRESHOLD_AMOUNT",{index:e.selectedIndex,value:t})}}})],1),i("div",{staticClass:"form-group mb8 threshold-panel__gif"},[i("label",[e._v("Show themed gif")]),e._m(0),i("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.thresholds[e.selectedIndex].gif},on:{change:function(t){return e.$store.commit("settings/SET_THRESHOLD_GIF",{index:e.selectedIndex,value:t.target.value})}}})]),i("div",{staticClass:"form-group mb8 threshold-panel__colors"},[i("label",[e._v("Custom colors")]),i("small",{staticClass:"help-text"},[e._v("Will show colored line")]),i("div",{staticClass:"column"},[i("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"form-group",attrs:{title:"When buy"}},[i("input",{staticClass:"form-control",style:{backgroundColor:e.thresholds[e.selectedIndex].buyColor},attrs:{type:"text"},domProps:{value:e.thresholds[e.selectedIndex].buyColor},on:{change:function(t){return e.$store.commit("settings/SET_THRESHOLD_COLOR",{index:e.selectedIndex,side:"buyColor",value:t.target.value})},click:function(t){return e.openPicker("buyColor",e.selectedIndex,t)}}})]),i("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"form-group",attrs:{title:"When sell"}},[i("input",{staticClass:"form-control",style:{backgroundColor:e.thresholds[e.selectedIndex].sellColor},attrs:{type:"text"},domProps:{value:e.thresholds[e.selectedIndex].sellColor},on:{change:function(t){return e.$store.commit("settings/SET_THRESHOLD_COLOR",{index:e.selectedIndex,side:"sellColor",value:t.target.value})},click:function(t){return e.openPicker("sellColor",e.selectedIndex,t)}}})])])])]):e._e()])],1)},Ue=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("small",{staticClass:"help-text"},[e._v(" Random gif based on "),i("a",{attrs:{href:"https://gfycat.com",target:"_blank"}},[e._v("Gifycat")]),e._v(" keyword ")])}],Be=(i("b680"),i("3835")),Ne=["#F44336","#FF9800","#ffeb3b","#4caf50","#009688","#00bcd4","#2196F3","#673ab7","#9c27b0","#e91e63","#FFCDD2","#FFE0B2","#FFF9C4","#C8E6C9","#B2DFDB","#B2EBF2","#BBDEFB","#D1C4E9","#E1BEE7","#F8BBD0","#ef9a9a","#FFCC80","#FFF59D","#A5D6A7","#80cbc4","#80DEEA","#90CAF9","#B39DDB","#CE93D8","#f48fb1","#E57373","#ffb74d","#FFF176","#81c784","#4db6ac","#4dd0e1","#64B5F6","#9575cd","#ba68c8","#f06292","#EF5350","#FFA726","#ffee58","#66BB6A","#26a69a","#26c6da","#42A5F5","#7e57c2","#ab47bc","#ec407a","#D32F2F","#F57C00","#fbc02d","#388e3c","#00796b","#0097A7","#1976D2","#512da8","#7b1fa2","#C2185B","#B71C1C","#e65100","#F57F17","#1B5E20","#004D40","#006064","#0d47a1","#311B92","#4A148C","#880e4f"];function $e(e,t,i){var s=i,n=2*s-1,a=(n/1+1)/2,r=1-a,o=[Math.round(t[0]*a+e[0]*r),Math.round(t[1]*a+e[1]*r),Math.round(t[2]*a+e[2]*r)];return o}function He(e,t){var i=1-e[3];return e[0]=Math.round(255*(e[3]*(e[0]/255)+i*(t[0]/255))),e[1]=Math.round(255*(e[3]*(e[1]/255)+i*(t[1]/255))),e[2]=Math.round(255*(e[3]*(e[2]/255)+i*(t[2]/255))),e.splice(3,1),e}function Ge(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(function(e,t,i,s){return t+t+i+i+s+s}));var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:null}function We(e,t){return"undefined"!==typeof e[3]&&t&&(e=He(e,t)),Math.sqrt(e[0]*e[0]*.241+e[1]*e[1]*.691+e[2]*e[2]*.068)}function qe(e,t){var i=e.match(/rgba?\((\d+)[\s,]*(\d+)[\s,]*(\d+)(?:[\s,]*([\d.]+))?\)/),s=[+i[1],+i[2],+i[3]];return"undefined"!==typeof i[4]&&(s.push(+i[4]),t&&(s=He(s,t))),s}function Ke(){var e=getComputedStyle(document.getElementById("app")).backgroundColor;return e=-1!==e.indexOf("#")?Ge(e):qe(e),e}function ze(e,t){var i=Math.round,s=Object(Be["a"])(e,4),n=s[0],a=s[1],r=s[2],o=s[3],c=t<0,l=c?0:t*Math.pow(255,2);return c=c?1+t:1-t,"rgb"+(o?"a(":"(")+i(Math.pow(c*Math.pow(n,2)+l,.5))+","+i(Math.pow(c*Math.pow(a,2)+l,.5))+","+i(Math.pow(c*Math.pow(r,2)+l,.5))+(o?","+o:")")}window.getColorByWeight=$e;var Fe,Ve,Je,Qe,Xe,Ye,Ze={data:function(){return{rendering:!0,dragging:null,picking:null,editing:null,selectedIndex:null,selectedElement:null,panelCaretPosition:0,panelOffsetPosition:0}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])("settings",["thresholds","showThresholdsAsTable","preferQuoteCurrencySize"])),{},{colors:function(){return Ne}}),created:function(){var e=this;this.onStoreMutation=this.$store.subscribe((function(t){switch(t.type){case"settings/TOGGLE_SETTINGS_PANEL":case"settings/TOGGLE_THRESHOLDS_TABLE":e.picking&&e.closePicker(event),("settings/TOGGLE_SETTINGS_PANEL"===t.type&&"thresholds"===t.payload||"settings/TOGGLE_THRESHOLDS_TABLE"===t.type&&!1===t.payload)&&(e.rendering=!0,setTimeout((function(){e.refreshHandlers(),e.refreshGradients()}),100));break;case"settings/SET_THRESHOLD_AMOUNT":e.reorderThresholds(),e.refreshHandlers();break;case"settings/SET_THRESHOLD_COLOR":e.refreshGradients();break;case"settings/ADD_THRESHOLD":e.refreshHandlers();break}}))},mounted:function(){this.showThresholdsAsTable||(this.refreshHandlers(),this.refreshGradients()),this._startDrag=this.startDrag.bind(this),this.$el.addEventListener(Pe["b"]?"touchstart":"mousedown",this._startDrag,!1),this._doDrag=this.doDrag.bind(this),window.addEventListener(Pe["b"]?"touchmove":"mousemove",this._doDrag,!1),this._endDrag=this.endDrag.bind(this),window.addEventListener(Pe["b"]?"touchend":"mouseup",this._endDrag,!1),this._doResize=this.refreshHandlers.bind(this),window.addEventListener("resize",this._doResize,!1)},beforeDestroy:function(){window.removeEventListener(Pe["b"]?"touchmove":"mousemove",this._doDrag),window.removeEventListener(Pe["b"]?"touchend":"mouseup",this._endDrag),window.removeEventListener("resize",this._doResize),this.onStoreMutation()},methods:{startDrag:function(e){if(e.target.classList.contains("thresholds-slider__handler")){var t=e.pageX;e.touches&&e.touches.length&&(t=e.touches[0].pageX),this.selectedIndex=Array.prototype.slice.call(e.target.parentNode.children).indexOf(e.target),this.selectedIndex>-1&&(this.selectedElement=e.target),setTimeout(this.refreshCaretPosition.bind(this,e.target)),this.dragStartedAt={timestamp:+new Date,position:t}}},doDrag:function(e){var t=e.pageX;if(e.touches&&e.touches.length&&(t=e.touches[0].pageX),null!==this.selectedElement&&this.dragStartedAt&&!(new Date-this.dragStartedAt.timestamp<1e3&&Math.abs(this.dragStartedAt.position-t)<3)){this.dragging=!0;var i=Math.max(0,Math.log(this.minimum+1)||0),s=i/Math.log(this.maximum+1)*this.width,n=Math.max(this.width/3*-1,Math.min(1.5*this.width,t-this.offsetLeft)),a=Math.exp((s+n/this.width*(this.width-s))/this.width*Math.log(this.maximum+1))-1;t<this.offsetLeft?(a=this.thresholds[this.selectedIndex].amount-.1*(this.thresholds[this.selectedIndex].amount-a),n=0):t>this.offsetLeft+this.width&&(a=this.thresholds[this.selectedIndex].amount-.1*(this.thresholds[this.selectedIndex].amount-a),n=this.width),a<0&&(a=0),this.selectedElement.style.transform="translateX("+n+"px)",this.refreshCaretPosition(),this.thresholds[this.selectedIndex].amount=+Object(l["formatPrice"])(a)}},endDrag:function(e){this.selectedElement&&(this.dragging&&this.$store.commit("settings/SET_THRESHOLD_AMOUNT",{index:this.selectedIndex,value:this.thresholds[this.selectedIndex].amount}),this.picking&&this.closePicker(e),this.selectedElement=null,this.reorderThresholds(),this.refreshHandlers(),this.refreshGradients()),this.dragging=!1},refreshHandlers:function(){var e=this.thresholds.map((function(e){return e.amount}));if(this.minimum=this.thresholds[0].amount,this.maximum=Math.max.apply(null,e),!this.showThresholdsAsTable){var t=this.$refs.thresholdContainer.getBoundingClientRect();this.offsetTop=t.top,this.offsetLeft=t.left,this.width=this.$refs.thresholdContainer.clientWidth;for(var i=this.$refs.thresholdContainer.children,s=Math.max(0,Math.log(this.minimum+1)||0),n=Math.log(this.maximum+1)-s,a=0;a<this.thresholds.length;a++){var r=i[a],o=this.thresholds[a],c=Math.log(o.amount+1)-s,l=this.width*(c/n);r.style.transform="translateX("+l+"px)"}this.rendering=!1}},refreshCaretPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedElement,t=parseFloat(e.style.transform.replace(/[^\d.]/g,""))||0,i=this.$refs.thresholdPanel.clientWidth,s=12,n=(this.width-i)/2+s;this.panelOffsetPosition=-n+2*n*(t/this.width),this.panelCaretPosition=s+(i-2*s)*(t/this.width)},refreshGradients:function(){if(!this.showThresholdsAsTable){for(var e=Math.max(0,Math.log(this.minimum+1)||0),t=Math.log(this.maximum+1),i=[],s=[],n=0;n<this.thresholds.length;n++){var a=0===n?0:n===this.thresholds.length-1?100:((Math.log(this.thresholds[n].amount+1)-e)/(t-e)*100).toFixed(2);i.push("".concat(this.thresholds[n].buyColor," ").concat(a,"%")),s.push("".concat(this.thresholds[n].sellColor," ").concat(a,"%"))}this.$refs.buysGradient.style.backgroundImage="linear-gradient(to right, ".concat(i.join(", "),")"),this.$refs.sellsGradient.style.backgroundImage="linear-gradient(to right, ".concat(s.join(", "),")")}},reorderThresholds:function(){var e;if(null!==this.selectedIndex&&(e=this.thresholds[this.selectedIndex]),this.$store.state.thresholds=this.thresholds.sort((function(e,t){return e.amount-t.amount})),e)for(var t=0;t<this.thresholds.length;t++)e.amount===this.thresholds[t].amount&&e.gif===this.thresholds[t].gif&&(this.selectedIndex=t)},deleteThreshold:function(e){this.thresholds.length<=2||this.$store.commit("settings/DELETE_THRESHOLD",e)},openPicker:function(e,t,i){var s=this;if(this.picking&&this.picking.index===t&&this.picking.side===e)return this.closePicker(i);this.thresholds[t][e]||this.$store.commit("settings/SET_THRESHOLD_COLOR",{index:t,side:e,value:"#ffffff"}),this.picking&&this.picking.target.classList.remove("-active"),this.picking={side:e,index:t,target:i.target},this.picking.target.classList.add("-active"),setTimeout((function(){var e=s.$el.getBoundingClientRect(),t=i.target.getBoundingClientRect(),n=Math.max(8,Math.min(s.$el.clientWidth-s.$refs.picker.$el.clientWidth-8,t.left+t.width-e.left-s.$refs.picker.$el.clientWidth)),a=t.top-e.top+1.3*i.target.clientHeight;s.$refs.picker.$el.style.top=a+"px",s.$refs.picker.$el.style.left=n+"px",s.$refs.picker.$el.style.position="absolute",s.$refs.picker.$el.style.opacity=1,s.$refs.picker.$el.style.zIndex=10,s.$refs.picker.fieldsIndex=1}),100),i.stopPropagation(),this._clickOutsideHandler||(this._clickOutsideHandler=function(e){s.$refs.picker.$el.contains(e.target)||s.closePicker()}.bind(this),document.addEventListener("mousedown",this._clickOutsideHandler))},closePicker:function(){this._clickOutsideHandler&&(document.removeEventListener("mousedown",this._clickOutsideHandler),delete this._clickOutsideHandler),this.picking.target.classList.remove("-active"),this.picking=null},updateColor:function(e){this.picking&&this.thresholds[this.picking.index]["".concat(this.picking.side,"Color")]!==e&&(console.log(this.thresholds[this.picking.index]["".concat(this.picking.side,"Color")]),this.$store.commit("settings/SET_THRESHOLD_COLOR",{index:this.picking.index,side:this.picking.side,value:e}))}}},et=Ze,tt=(i("cb65"),Object(de["a"])(et,Ie,Ue,!1,null,null,null)),it=tt.exports,st=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"serie-dialog dialog-mask",on:{mousedown:function(t){return e.cancelIfOutside(t)}}},[i("div",{staticClass:"dialog-content"},[i("header",[i("div",{staticClass:"title"},[e._v(e._s(e.title))]),i("div",{staticClass:"form-group"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control -on-off",attrs:{title:e.enabled?"Disable "+e.id:"Enable "+e.id},on:{change:function(t){return e.$store.dispatch("settings/updateStat",{index:e.id,prop:"enabled",value:t.target.checked})}}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.enabled}}),i("div")])])]),i("div",{staticClass:"dialog-body grid"},[i("div",{staticClass:"form-group mb8"},[i("label",[e._v("Name")]),i("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.model.name},on:{change:function(t){return e.$store.dispatch("settings/updateStat",{index:e.id,prop:"name",value:t.target.value})}}})]),i("div",{ref:"colorContainer",staticClass:"form-group -tight"},[i("label",[e._v("Color")]),i("verte",{attrs:{picker:"square",menuPosition:"left",model:"rgb",value:e.model.color},on:{input:function(t){return e.$store.dispatch("settings/updateStat",{index:e.id,prop:"color",value:t})}}})],1),i("div",{staticClass:"form-group mb8"},[i("label",[e._v("Period (m)")]),i("input",{staticClass:"form-control",attrs:{type:"text",placeholder:e.getHms(e.$store.state.settings.statsPeriod)},domProps:{value:e.getHms(e.model.period)},on:{change:function(t){return e.$store.dispatch("settings/updateStat",{index:e.id,prop:"period",value:t.target.value})}}})]),i("div",{staticClass:"form-group mb8"},[i("label",[e._v("Precision")]),i("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"auto"},domProps:{value:e.model.precision},on:{change:function(t){return e.$store.dispatch("settings/updateStat",{index:e.id,prop:"precision",value:t.target.value})}}})]),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:""}},[e._v("Value "),i("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info-circle",attrs:{title:"Javascript syntax, use build in variable such as vbuy/vsell (volume) cbuy/csell (trade count) lbuy/lsell (liquidation volume)"}})]),i("textarea",{staticClass:"form-control",attrs:{rows:"5"},domProps:{value:e.model.output},on:{change:function(t){return e.$store.dispatch("settings/updateStat",{index:e.id,prop:"output",value:t.target.value})}}}),i("p",{staticClass:"help-text mt-8"},[e._v(" Sum "),i("code",[e._v(e._s(e.model.output))]),e._v(" over "+e._s(e.getHms(e.model.period||e.$store.state.settings.statsPeriod))+" period ")])])])])])},nt=[],at={data:function(){return{title:"Stat",enabled:!0,model:{color:null,enabled:null,name:null,output:null,precision:null,period:null}}},created:function(){this.model=O["a"].state.settings.statsCounters[this.id]||{}},methods:{cancelIfOutside:function(e){e.target.classList.contains("dialog-mask")&&this.$close(!1)},getHms:function(e){return Object(l["getHms"])(e)}}},rt=at,ot=Object(de["a"])(rt,st,nt,!1,null,null,null),ct=ot.exports,lt=i("9935"),ut={components:{Exchange:je,Thresholds:it},data:function(){return{expanded:[]}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["b"])("app",["actives","version","buildDate"])),Object(c["b"])("settings",["pair","maxRows","decimalPrecision","showLogos","showSlippage","liquidationsOnly","aggregateTrades","preferQuoteCurrencySize","thresholds","showThresholdsAsTable","showCounters","showStats","statsPeriod","statsChart","statsCounters","countersSteps","countersCount","useAudio","audioIncludeInsignificants","audioVolume","audioPitch","timeframe","showChart","chartRefreshRate","timezoneOffset","showExchangesBar","settings","debug"])),{},{exchanges:function(){return oe.exchanges},showPairSubdomainHelp:function(e){if(!Pe["a"]||!e.pair)return!1;var t=window.location.hostname.match(/^([\d\w]+)\..*\./i);return!t||t.length<2||t[1].toLowerCase()!==e.pair.toLowerCase()}}),created:function(){this.stringifyCounters(),this.stringifyStatsPeriod(),document.body.classList.add("-translate")},beforeDestroy:function(){document.body.classList.remove("-translate")},methods:{reset:function(){window.localStorage&&window.localStorage.clear(),window.location.reload(!0)},stringifyStatsPeriod:function(){this.statsPeriodStringified=Object(l["ago"])(+new Date-(this.statsPeriod||0))},stringifyCounters:function(){var e=+new Date;this.countersStepsStringified=this.countersSteps.map((function(t){return Object(l["ago"])(e-t)})).join(", ")},replaceCounters:function(e){var t=e.split(",").map((function(e){return e=e.trim(),/[\d.]+s/.test(e)?1e3*parseFloat(e):/[\d.]+h/.test(e)?1e3*parseFloat(e)*60*60:1e3*parseFloat(e)*60})).filter((function(e,t,i){return i.indexOf(e)==t}));t.filter((function(e){return isNaN(e)})).length?this.$store.dispatch("app/showNotice",{type:"error",title:"Counters (".concat(e,") contains invalid steps.")}):(this.$store.commit("settings/REPLACE_COUNTERS",t),this.stringifyCounters())},openStat:function(e){var t=Object(lt["create"])(ct,"id");t(e)}}},ht=ut,dt=(i("d382"),Object(de["a"])(ht,ke,we,!1,null,null,null)),pt=dt.exports,_t=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{"-logos":this.showLogos,"-slippage":this.showSlippage},attrs:{id:"trades"}},[i("ul",{ref:"tradesContainer"}),e.tradesCount?e._e():i("div",{staticClass:"trade -empty"},[e._v("Nothing to show, yet.")])])},mt=[],ft=i("6502"),gt=i.n(ft),vt=function(){function e(){Object(p["a"])(this,e),this.timestamp=+new Date,this.connect()}return Object(_["a"])(e,[{key:"connect",value:function(){this.context=new(window.AudioContext||window.webkitAudioContext),this.queued=0;var e=new gt.a(this.context);this.output=new e.PingPongDelay({wetLevel:.6,feedback:.01,delayTimeLeft:175,delayTimeRight:100});var t=new e.Delay({feedback:.3,delayTime:80,wetLevel:.3,dryLevel:.5,cutoff:2e3,bypass:1}),i=new e.Compressor({threshold:-1,makeupGain:1,attack:1,release:0,ratio:4,knee:5,automakeup:!0,bypass:0}),s=new e.Filter({frequency:800,Q:10,gain:-10,filterType:"highpass",bypass:0});this.output.connect(s),s.connect(t),t.connect(i),i.connect(this.context.destination)}},{key:"tradeToSong",value:function(e,t,i){var s=this,n=+new Date,a=O["a"].state.settings.audioPitch;this.queued++,setTimeout((function(){s.queued--,"buy"===t?0===i?s.play(659.26*a,Math.sqrt(e)/10,.1+Math.sqrt(e)/10):1===i?(s.play(659.26*a,.05+Math.sqrt(e)/10,.1+.1*e),setTimeout((function(){return s.play(830.6*a,.05+Math.sqrt(e)/10,.1+.1*e)}),80)):(s.play(659.26*a,.05+Math.sqrt(e)/25,.1+.1*e),setTimeout((function(){return s.play(830.6*a,.05+Math.sqrt(e)/25,.1+.1*e)}),80),setTimeout((function(){return s.play(987.76*a,.05+Math.sqrt(e)/25,.1+.1*e)}),160),setTimeout((function(){return s.play(1318.52*a,.05+Math.sqrt(e)/10,.1+.1*e)}),240)):0===i?s.play(493.88*a,Math.sqrt(1.5*e)/10,.1+Math.sqrt(e)/10):1===i?(s.play(493.88*a,.05+Math.sqrt(1.5*e)/10,.1+.1*e),setTimeout((function(){return s.play(392*a,.05+Math.sqrt(1.5*e)/10,.1+.1*e)}),80)):(s.play(493.88*a,.05+Math.sqrt(e)/25,.1+.1*e),setTimeout((function(){return s.play(369.99*a,.05+Math.sqrt(1.5*e)/10,.2)}),80),setTimeout((function(){return s.play(293.66*a,.05+Math.sqrt(1.5*e)/10,.2)}),160),setTimeout((function(){return s.play(246.94*a,.05+Math.sqrt(1.5*e)/10,.1+.1*e)}),240))}),this.timestamp-n),this.timestamp=Math.max(this.timestamp,n)+(this.queued>10?this.queued>20?20:40:80)}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"triangle";if("running"===this.context.state){var n=this.context.currentTime,a=this.context.createOscillator(),r=this.context.createGain();a.frequency.value=e,a.type=s,a.onended=function(){a.disconnect()},r.connect(this.output),a.connect(r),i*=1.3;var o=Math.max(.02,Math.min(1,t))*O["a"].state.settings.audioVolume;r.gain.value=o,r.gain.setValueAtTime(r.gain.value,n),r.gain.exponentialRampToValueAtTime(.001,n+i),a.start(n),a.stop(n+i)}}},{key:"liquidation",value:function(e){var t=this,i=+new Date;this.queued++,setTimeout((function(){t.queued--,[329.63,329.63].forEach((function(i,s){e=Math.sqrt(e)/4,setTimeout((function(){return t.play(i,e,.25,"sine")}),80*s)}))}),this.timestamp-i),this.timestamp=Math.max(this.timestamp,i)+(this.queued>10?this.queued>20?20:40:80)}},{key:"disconnect",value:function(){this.context&&"running"===this.context.state&&this.context.close()}}]),e}(),bt=vt,Et=[],Ot={data:function(){return{tradesCount:0}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])("settings",["pair","maxRows","thresholds","exchanges","useAudio","showSlippage","liquidationsOnly","audioIncludeInsignificants","preferQuoteCurrencySize","decimalPrecision","showLogos"])),Object(c["b"])("app",["actives"])),created:function(){var e=this;Et=this.$store.state.app.actives.slice(0,this.$store.state.app.actives.length),this.retrieveStoredGifs(),this.prepareColorsSteps(),oe.$on("trades.aggr",this.onTrades),this.onStoreMutation=this.$store.subscribe((function(t,i){switch(t.type){case"app/EXCHANGE_UPDATED":Et=i.app.actives.slice(0,i.app.actives.length);break;case"settings/SET_PAIR":e.clearList();break;case"settings/TOGGLE_AUDIO":t.payload?e.sfx=new bt:e.sfx&&e.sfx.disconnect()&&delete e.sfx;break;case"settings/SET_THRESHOLD_GIF":e.fetchGifByKeyword(t.payload.value,t.payload.isDeleted);break;case"settings/SET_THRESHOLD_COLOR":case"settings/SET_THRESHOLD_AMOUNT":case"settings/DELETE_THRESHOLD":case"settings/ADD_THRESHOLD":e.prepareColorsSteps();break}}))},mounted:function(){var e=this;if(this.useAudio&&(this.sfx=new bt,"suspended"===this.sfx.context.state)){var t=function(){e.useAudio&&e.sfx.context.resume(),e.useAudio&&"suspended"===e.sfx.context.state||(window.removeEventListener("focus",t,!1),window.removeEventListener("blur",t,!1))}.bind(this);window.addEventListener("blur",t,!1),window.addEventListener("focus",t,!1)}this._timeAgoInterval=setInterval((function(){var t=e.$el.getElementsByClassName("-timestamp");if(t.length)for(var i,s=0;s<t.length;s++){var n=Object(l["ago"])(t[s].getAttribute("timestamp"));"undefined"===typeof i||i!==n?(n!==t[s].textContent&&(t[s].textContent=n),i=n):(t[s].textContent="",t[s].className="trade__date",s++)}}),1e3)},beforeDestroy:function(){oe.$off("trades.aggr",this.onTrades),this.onStoreMutation(),clearInterval(this._timeAgoInterval),this.sfx&&this.sfx.disconnect()},methods:{onTrades:function(e){for(var t=0;t<e.length;t++)if(-1!==Et.indexOf(e[t].exchange)){var i=e[t],s=i.size*(this.preferQuoteCurrencySize?i.price:1),n="undefined"!==typeof this.exchanges[i.exchange].threshold?+this.exchanges[i.exchange].threshold:1;if(i.liquidation){if(this.useAudio&&s>Qe*n*.1&&this.sfx.liquidation(s/Qe*n),s>=Je*n){var a='<i class="icon-currency"></i> <strong>'.concat(Object(l["formatAmount"])(s,1),"</strong>");a+='&nbsp;liq<span class="min-280">uidate</span>d <strong>'.concat("buy"===i.side?"SHORT":"LONG",'</strong> @ <i class="icon-quote"></i> ').concat(Object(l["formatPrice"])(i.price)),this.appendRow(i,s,n,"-liquidation",a)}}else this.liquidationsOnly||(s>=Je*n?this.appendRow(i,s,n):this.useAudio&&this.audioIncludeInsignificants&&s>=.1*Qe&&this.sfx.tradeToSong(s/(Qe*n),i.side,0))}},appendRow:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.tradesCount||this.$forceUpdate(),this.tradesCount++;var a=document.createElement("li");a.className=("trade "+s).trim(),a.className+=" -"+e.exchange,a.className+=" -"+e.side,e.exchange.length>10&&(a.className+=" -sm"),t>=Qe*i&&(a.className+=" -significant");for(var r=0;r<this.thresholds.length;r++)if(a.className+=" -level-"+r,!this.thresholds[r+1]||t<this.thresholds[r+1].amount*i){var o=Xe[Math.min(this.thresholds.length-2,r)],c=this.thresholds[r];c.gif&&Ye[c.gif]&&(a.style.backgroundImage="url('".concat(Ye[c.gif][Math.floor(Math.random()*(Ye[c.gif].length-1))]));var u=(Math.max(t,o.threshold)-o.threshold)/o.range,h=o[e.side][(u<.5?"from":"to")+"Luminance"],d=$e(o[e.side].from,o[e.side].to,u);a.style.backgroundColor="rgb("+d[0]+", "+d[1]+", "+d[2]+")",a.style.color=r>=1?h<175?"white":"black":ze(d,Math.max(.25,Math.min(1,t/Qe))*(h<175?1:-1)),this.useAudio&&t>=(this.audioIncludeInsignificants?.1*Qe:1*Je)*i&&this.sfx.tradeToSong(t/(Qe*i),e.side,r);break}if(!n){if(e.side!==Ve){var p=document.createElement("div");p.className="trade__side icon-side",a.appendChild(p)}Ve=e.side}var _=document.createElement("div");if(_.className="trade__exchange",_.innerText=e.exchange.replace("_"," "),_.setAttribute("title",e.exchange),a.appendChild(_),n){var m=document.createElement("div");m.className="trade__message",m.innerHTML=n,a.appendChild(m)}else{var f=document.createElement("div");f.className="trade__price",f.innerHTML='<span class="icon-quote"></span> <span>'.concat(Object(l["formatPrice"])(e.price),"</span>"),a.appendChild(f),"price"===this.showSlippage&&e.slippage/e.price>1e-4?f.setAttribute("slippage",(e.slippage>0?"+":"-")+document.getElementById("app").getAttribute("data-symbol")+Math.abs(e.slippage).toFixed(1)):"bps"===this.showSlippage&&e.slippage&&f.setAttribute("slippage",(e.slippage>0?"+":"-")+e.slippage);var g=document.createElement("div");g.className="trade__amount";var v=document.createElement("span");v.className="trade__amount__quote",v.innerHTML='<span class="icon-quote"></span> <span>'.concat(Object(l["formatAmount"])(e.price*e.size),"</span>");var b=document.createElement("span");b.className="trade__amount__base",b.innerHTML='<span class="icon-base"></span> <span>'.concat(Object(l["formatAmount"])(e.size),"</span>"),g.appendChild(v),g.appendChild(b),a.appendChild(g)}var E=document.createElement("div");E.className="trade__date";var O=1e3*Math.floor(e.timestamp/1e3);O!==Fe&&(Fe=O,E.setAttribute("timestamp",e.timestamp),E.innerText=Object(l["ago"])(O),E.className+=" -timestamp"),a.appendChild(E),this.$refs.tradesContainer.appendChild(a);while(this.tradesCount>this.maxRows)this.tradesCount--,this.$refs.tradesContainer.removeChild(this.$refs.tradesContainer.firstChild)},retrieveStoredGifs:function(e){var t=this;Ye={},this.thresholds.forEach((function(i){if(i.gif){var s=t.slug(i.gif),n=localStorage?JSON.parse(localStorage.getItem("threshold_"+s+"_gifs")):null;!e&&n&&+new Date-n.timestamp<6048e5?Ye[i.gif]=n.data:t.fetchGifByKeyword(i.gif)}}))},fetchGifByKeyword:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&Ye){var i=this.slug(e);if(t)return Ye[e]&&delete Ye[e],void localStorage.removeItem("threshold_"+i+"_gifs");fetch("https://api.giphy.com/v1/gifs/search?q="+e+"&rating=r&limit=100&api_key=b5Y5CZcpj9spa0xEfskQxGGnhChYt3hi").then((function(e){return e.json()})).then((function(t){if(t.data&&t.data.length){Ye[e]=[];var s,n=Object(r["a"])(t.data);try{for(n.s();!(s=n.n()).done;){var a=s.value;Ye[e].push(a.images.original.url)}}catch(o){n.e(o)}finally{n.f()}localStorage.setItem("threshold_"+i+"_gifs",JSON.stringify({timestamp:+new Date,data:Ye[e]}))}}))}},slug:function(e){return e.toLowerCase().trim().replace(/[^a-zA-Z0-9]+/g,"-")},prepareColorsSteps:function(){var e=Ke();Xe=[],Je=this.thresholds[0].amount,Qe=this.thresholds[1].amount;for(var t=0;t<this.thresholds.length-1;t++){var i=qe(this.thresholds[t].buyColor,e),s=qe(this.thresholds[t+1].buyColor,e),n=qe(this.thresholds[t].sellColor,e),a=qe(this.thresholds[t+1].sellColor,e);Xe.push({threshold:this.thresholds[t].amount,range:this.thresholds[t+1].amount-this.thresholds[t].amount,buy:{from:i,to:s,fromLuminance:We(i),toLuminance:We(s)},sell:{from:n,to:a,fromLuminance:We(n),toLuminance:We(a)}})}},clearList:function(){this.$refs.tradesContainer.innerHTML="",this.tradesCount=0}}},yt=Ot,Ct=(i("c961"),Object(de["a"])(yt,_t,mt,!1,null,null,null)),Tt=Ct.exports,St=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"chart"}},[i("div",{ref:"chartContainer",staticClass:"chart__container"}),i("div",{ref:"chartWidthHandler",staticClass:"chart__handler -width",on:{mousedown:function(t){return e.startManualResize(t,"width")},dblclick:function(t){return t.stopPropagation(),t.preventDefault(),e.resetWidth(t)}}}),i("div",{ref:"chartHeightHandler",staticClass:"chart__handler -height",on:{mousedown:function(t){return e.startManualResize(t,"height")},dblclick:function(t){return t.stopPropagation(),t.preventDefault(),e.resetHeight(t)}}}),i("div",{staticClass:"chart__series"},[e._l(e.activeSeries,(function(t,s){return i("SerieControl",{key:s,attrs:{id:t,legend:e.legend[t]}})})),e.availableSeries.length?i("dropdown",{staticClass:"available-series mt15 -left",attrs:{options:e.availableSeries,placeholder:"+ serie"},on:{output:function(t){return e.$store.commit("settings/TOGGLE_SERIE",{id:e.availableSeries[t],value:!0})}}}):e._e()],2),i("div",{staticClass:"chart__controls"},[i("button",{staticClass:"btn -small",on:{click:e.refreshChart}},[e._v("Refresh")])])])},xt=[],kt=(i("1480"),i("cd6d")),wt=i("9690"),Pt=i("9380"),Dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"serie"},[i("div",{staticClass:"serie__name",on:{click:e.edit}},[e._v(e._s(e.id))]),e.legend?i("div",{staticClass:"serie__legend"},[e._v(e._s(e.legend))]):e._e()])},At=[],Rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"serie-dialog dialog-mask",on:{mousedown:function(t){return e.cancelIfOutside(t)}}},[i("div",{staticClass:"dialog-content"},[i("header",[i("div",{staticClass:"title"},[e._v(e._s(e.title))]),i("div",{staticClass:"column -center"},[i("dropdown",{staticClass:"available-types -left -center",attrs:{selected:e.type,label:"Type",options:e.availableTypes,placeholder:"type"},on:{output:function(t){return e.$store.commit("settings/SET_SERIE_TYPE",{id:e.id,value:t})}}}),i("div",{staticClass:"form-group"},[i("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control -on-off",attrs:{title:e.enabled?"Disable "+e.id:"Enable "+e.id},on:{change:function(t){return e.$store.commit("settings/TOGGLE_SERIE",{id:e.id,value:t.target.checked})}}},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.enabled}}),i("div")])])],1)]),i("div",{staticClass:"dialog-body grid"},e._l(e.model,(function(t,s){return i("div",{key:s,staticClass:"form-group",class:{"w-100":"string"===t.type||"position"===t.type,"-tight":"boolean"===t.type||"color"===t.type,"-inline":"color"===t.type||"boolean"===t.type}},[!1!==t.label?i("label",[e._v(e._s(t.label))]):e._e(),"string"===t.type||"number"===t.type?[i("editable",{staticClass:"form-control",attrs:{content:t.value},on:{output:function(i){return e.validate(t,i)}}})]:e._e(),"color"===t.type?[i("verte",{attrs:{picker:"square",menuPosition:"left",model:"rgb",value:t.value,colorHistory:e.colors},on:{input:function(i){return e.validate(t,i)}}})]:e._e(),"boolean"===t.type?[i("label",{staticClass:"checkbox-control"},[i("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.value},on:{change:function(i){return e.validate(t,i.target.checked)}}}),i("div")])]:e._e(),"position"===t.type?[i("div",{staticClass:"column"},[i("div",{staticClass:"-fill"},[i("div",{staticClass:"text-center"},[e._v("Start")]),e._m(0,!0),i("input",{staticClass:"w-100",attrs:{type:"range",min:"0",max:"1",step:".1"},domProps:{value:t.value.top},on:{input:function(t){return e.setScale("top",t.target.value)}}})]),i("div",{staticClass:"-fill"},[i("div",{staticClass:"text-center"},[e._v("End")]),e._m(1,!0),i("input",{staticClass:"w-100  -reverse",attrs:{type:"range",min:"0",max:"1",step:".1"},domProps:{value:t.value.bottom},on:{input:function(t){return e.setScale("bottom",t.target.value)}}})])])]:e._e()],2)})),0)])])},Mt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column help-text"},[i("div",{staticClass:"text-left"},[e._v("Start at top")]),i("div",{staticClass:"text-right"},[e._v("Start at bottom")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"column help-text"},[i("div",{staticClass:"text-left"},[e._v("End at top")]),i("div",{staticClass:"text-right"},[e._v("End at bottom")])])}],Lt={scaleMargins:!1,color:"Couleur",lineWidth:"Line width",length:"Length"},jt={data:function(){return{title:"Serie",enabled:!0,type:"line",model:[],options:[],availableTypes:{line:"Line",histogram:"Histogram",candlestick:"Candlestick",bar:"Bar"}}},computed:{colors:function(){return Ne},userPreferences:function(){var e=O["a"].state.settings.series[this.id]||{};return e}},created:function(){this.title=Object(l["snakeToSentence"])(this.id),this.enabled="undefined"===typeof this.userPreferences.enabled||this.userPreferences.enabled,this.type="undefined"===typeof this.userPreferences.type?Pt["a"][this.id].type:this.userPreferences.type,this.refreshModel()},methods:{getType:function(e,t){var i="string";try{e=JSON.parse(e)}catch(s){}return"number"===typeof e?i="number":"boolean"===typeof e?i="boolean":/^rgba?/.test(e)||/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)?i="color":"scaleMargins"===t&&(i="position"),i},refreshModel:function(){for(var e in this.model.splice(0,this.model.length),Pt["a"][this.id].options||{})if(-1===["overlay","scaleGroup"].indexOf(e)){var t=Pt["a"][this.id].options[e],i=void 0;i="undefined"!==typeof this.userPreferences[e]?this.userPreferences[e]:t;var s=Lt[e];"undefined"===typeof s&&(s=Object(l["camelToSentence"])(e)),this.model.push({key:e,label:s,value:i,type:this.getType(t,e)})}},cancelIfOutside:function(e){e.target.classList.contains("dialog-mask")&&this.$close(!1)},validate:function(e,t){O["a"].dispatch("settings/setSeriePreference",{id:this.id,key:"string"===typeof e?e:e.key,value:t});var i=this.model.indexOf(e);-1!==i&&this.$set(this.model[i],"value",t)},setScale:function(e,t){var i=this.getOptionByKey("scaleMargins"),s={top:i.value.top,bottom:i.value.bottom};s[e]=+t||0,s.top+s.bottom>1&&(s[e]=1-s["top"===e?"bottom":"top"]),"price"===this.id&&O["a"].commit("settings/SET_CHART_PRICE_MARGINS",s),this.validate(i,s)},getOptionByKey:function(e){for(var t=0;t<this.model.length;t++)if(this.model[t].key===e)return this.model[t]},setType:function(e){this.validate("type",e)},getValue:function(e){var t=(O["a"].state.settings.series[this.id]||{})[e],i=Pt["a"][this.id].options[e];return"undefined"!==typeof t?t:i}}},It=jt,Ut=Object(de["a"])(It,Rt,Mt,!1,null,null,null),Bt=Ut.exports,Nt={props:["id","legend"],methods:{edit:function(){var e=Object(lt["create"])(Bt,"id");e(this.id)}}},$t=Nt,Ht=(i("4a04"),Object(de["a"])($t,Dt,At,!1,null,null,null)),Gt=Ht.exports,Wt=null,qt={components:{SerieControl:Gt},data:function(){return{resizing:{},fetching:!1,legend:{},seriesLayout:null}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["b"])("app",["actives","activeSeries"])),Object(c["b"])("settings",["debug","pair","timeframe","exchanges","chartHeight","sidebarWidth","chartRefreshRate","showExchangesBar","timezoneOffset","series"])),{},{availableSeries:function(){var e=this;return Object.keys(Pt["a"]).filter((function(t){return-1===e.activeSeries.indexOf(t)}))}}),created:function(){var e=this;Wt=new kt["a"],oe.$on("trades",this.onTrades),this.onStoreMutation=this.$store.subscribe((function(t){switch(t.type){case"settings/SET_TIMEZONE_OFFSET":Wt.clearChart(),Wt.renderVisibleChunks();break;case"app/EXCHANGE_UPDATED":Wt.renderVisibleChunks();break;case"settings/SET_PAIR":Wt.clear();break;case"settings/SET_TIMEFRAME":Wt.clear(),e.fetch();break;case"settings/SET_CHART_REFRESH_RATE":Wt.clearQueue(),Wt.setupQueue();break;case"settings/SET_SERIE_OPTION":Wt.setSerieOption(t.payload);break;case"settings/SET_SERIE_TYPE":Wt.rebuildSerie(t.payload.id);break;case"settings/TOGGLE_SERIE":Wt.toggleSerie(t.payload);break;case"settings/SET_CHART_PRICE_MARGINS":Wt.setPriceMargins(t.payload);break;case"settings/TOGGLE_EXCHANGES_BAR":setTimeout(e.refreshChartDimensions.bind(e));break;case"app/SET_OPTIMAL_DECIMAL":case"settings/SET_DECIMAL_PRECISION":var i={precision:t.payload,minMove:1/Math.pow(10,t.payload)};Wt.setSerieOption({id:"price",key:"priceFormat.precision",value:i.precision}),Wt.setSerieOption({id:"price",key:"priceFormat.minMove",value:i.minMove}),e.$store.state.settings.series["price"]||(e.$store.state.settings.series["price"]={}),e.$store.state.settings.series["price"].priceFormat=i;break}}))},mounted:function(){console.log("[chart.mounted]"),Wt.createChart(this.$refs.chartContainer,this.getChartDimensions()),Wt.setupQueue(),this.keepAlive(),this.refreshSeriesLayout(),this.bindChartEvents(),this.bindBrowserResize(),this.fetch()},beforeDestroy:function(){this.unbindChartEvents(),this.unbindBrowserResize(),this.onStoreMutation(),Wt.destroy(),clearTimeout(this._keepAliveTimeout),oe.$off("trades",this.onTrades)},methods:{refreshSeriesLayout:function(){var e,t=[],i=Object(r["a"])(Wt.activeSeries);try{for(i.s();!(e=i.n()).done;){var s=e.value;t.push({x:0,y:t.length,w:1,h:1,i:s.id})}}catch(n){i.e(n)}finally{i.f()}this.seriesLayout=t},fetch:function(){if(!oe.canFetch())return Promise.reject("Fetch is disabled");var e,t=Wt.getVisibleRange(),i=Wt.isEmpty();return i?(console.log("[chart] fetch (real time range)"),e=Wt.getRealtimeRange()):t.from===wt["b"].from&&(console.log("[chart] fetch (chunk on the left)"),e={from:t.from-Wt.getOptimalRangeLength(),to:t.from}),e?(Wt.lockRender(),oe.fetchHistoricalData(parseInt(1e3*e.from),parseInt(1e3*e.to-1)).then((function(e){var t,i=e.data,s=e.from,n=e.to,a=e.format;switch(a){case"point":t={from:s,to:n,bars:i};break;default:t=Wt.groupTradesIntoBars(i);break}t&&Object(wt["d"])(t),console.log("[fetch] success (".concat(i.length," new ").concat(a,"s)")),Wt.renderVisibleChunks()})).catch((function(e){console.error(e)})).then((function(){Wt.unlockRender()}))):Promise.reject("Nothing to fetch")},onCrosshair:function(e){if(void 0===e||void 0===e.time||e.point.x<0||e.point.x>this.$refs.chartContainer.clientWidth||e.point.y<0||e.point.y>this.$refs.chartContainer.clientHeight)this.legend={};else{var t,i=Object(r["a"])(Wt.activeSeries);try{for(i.s();!(t=i.n()).done;){var s=t.value,n=e.seriesPrices.get(s.api);n?n.close?this.$set(this.legend,s.id,"O: ".concat(Object(l["formatPrice"])(n.open)," H: ").concat(Object(l["formatPrice"])(n.high)," L: ").concat(Object(l["formatPrice"])(n.low)," C: ").concat(Object(l["formatPrice"])(n.close))):this.$set(this.legend,s.id,s.options.formatVolume?Object(l["formatAmount"])(n):Object(l["formatPrice"])(n)):this.$set(this.legend,s.id,"n/a")}}catch(a){i.e(a)}finally{i.f()}}},onTrades:function(e){Wt.preventRender||this.chartRefreshRate?Wt.queueTrades(e):Wt.renderRealtimeTrades(e)},startManualResize:function(e,t){3!==e.which&&(this._doManualResize||(this._doManualResize=this.doManualResize.bind(this),window.addEventListener("mousemove",this._doManualResize,!1)),this._stopManualResize||(this._stopManualResize=this.stopManualResize.bind(this),window.addEventListener("mouseup",this._stopManualResize,!1)),this.resizing[t]="height"===t?e.pageY:e.pageX,console.info("[chart] lock pan until further notice"),Wt.panPrevented=!0)},doManualResize:function(e){var t;isNaN(this.resizing.width)?isNaN(this.resizing.height)||this.refreshChartDimensions(null,(this.chartHeight||Wt.options().height)+(e.pageY-this.resizing.height)):(t=null!==this.sidebarWidth?window.innerWidth-this.sidebarWidth:Wt.chartInstance.options().width,this.refreshChartDimensions(t+(e.pageX-this.resizing.width)))},stopManualResize:function(){this.resizing.width?(this.$store.commit("settings/SET_SIDEBAR_WIDTH",window.innerWidth-this.$refs.chartContainer.clientWidth),delete this.resizing.width):this.resizing.height&&(this.$store.commit("settings/SET_CHART_HEIGHT",this.$refs.chartContainer.clientHeight),delete this.resizing.height),this._doManualResize&&(window.removeEventListener("mousemove",this._doManualResize),delete this._doManualResize),this._stopManualResize&&(window.removeEventListener("mouseup",this._stopManualResize),delete this._stopManualResize),console.info("[chart] unlock pan"),Wt.panPrevented=!1},resetHeight:function(){delete this.resizing.height,this.$store.commit("settings/SET_CHART_HEIGHT",null),this.refreshChartDimensions()},resetWidth:function(){delete this.resizing.width,this.$store.commit("settings/SET_SIDEBAR_WIDTH",null),this.refreshChartDimensions()},refreshChartDimensions:function(e,t){var i=this.getChartDimensions();Wt.chartInstance.resize(e||i.width,t||i.height),this.$el.parentElement.style.width=(e||i.width)+"px"},getChartDimensions:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;return{width:window.innerWidth<768?window.innerWidth:this.sidebarWidth>0?window.innerWidth-this.sidebarWidth:e-320,height:window.innerWidth>=768?this.$el.parentElement.clientHeight-(this.showExchangesBar?24:0):this.chartHeight>0?this.chartHeight:+Math.min(e/2,Math.max(300,t/3)).toFixed()}},doWindowResize:function(){var e=this;clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout((function(){e.refreshChartDimensions()}),250)},onPan:function(){var e=this;Wt.panPrevented||(this._onPanTimeout&&(clearTimeout(this._onPanTimeout),this._onPanTimeout=null),this._onPanTimeout=setTimeout((function(){if(null!==wt["b"].from){e._keepAliveTimeout&&(clearTimeout(e._keepAliveTimeout),delete e._keepAliveTimeout),e.keepAlive();var t=Wt.getVisibleRange();console.log("[pan] current scrollPosition",Object(l["getHms"])(1e3*Wt.chartInstance.timeScale().scrollPosition()),"(from:",Object(l["formatTime"])(t.from)," to:",Object(l["formatTime"])(t.to),")"),t.from<=wt["b"].from?(e.panPrevented=!0,e.fetch().then((function(){e.panPrevented=!1}))):(t.from<=Wt.renderedRange.from&&wt["b"].from<=Wt.renderedRange.from||t.to>Wt.renderedRange.to&&wt["b"].to>Wt.renderedRange.to)&&Wt.renderVisibleChunks()}}),200))},bindChartEvents:function(){Wt.chartInstance.subscribeCrosshairMove(this.onCrosshair),Wt.chartInstance.subscribeVisibleTimeRangeChange(this.onPan)},unbindChartEvents:function(){Wt.chartInstance.unsubscribeCrosshairMove(this.onCrosshair),Wt.chartInstance.unsubscribeVisibleTimeRangeChange(this.onPan)},bindBrowserResize:function(){this._doWindowResize=this.doWindowResize.bind(this),window.addEventListener("resize",this._doWindowResize,!1)},unbindBrowserResize:function(){window.removeEventListener("resize",this._doWindowResize)},keepAlive:function(){this._keepAliveTimeout?Wt.redraw(!0):console.log("[chart] setup keepalive"),this._keepAliveTimeout=setTimeout(this.keepAlive.bind(this),9e5)},refreshChart:function(){Wt.redraw()}}},Kt=qt,zt=(i("5f49"),Object(de["a"])(Kt,St,xt,!1,null,null,null)),Ft=zt.exports,Vt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"counters"},e._l(e.activeSteps,(function(t,s){return i("li",{key:s,staticClass:"counter",attrs:{duration:t.duration}},[i("div",{staticClass:"counter__side -buy",style:{width:t.buy/(t.buy+t.sell)*100+"%"}},[e.countersCount?i("span",[e._v(e._s(t.buy))]):i("span",[e._v(e._s(e.$root.formatAmount(t.buy)))])]),i("div",{staticClass:"counter__side -sell",style:{width:t.sell/(t.buy+t.sell)*100+"%"}},[e.countersCount?i("span",[e._v(e._s(t.sell))]):i("span",[e._v(e._s(e.$root.formatAmount(t.sell)))])])])})),0)},Jt=[],Qt={timestamp:null,buy:0,sell:0},Xt=[],Yt={data:function(){return{topElement:{},steps:[]}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["b"])("app",["actives"])),Object(c["b"])("settings",["preferQuoteCurrencySize","thresholds","liquidationsOnly","countersSteps","countersCount","countersGranularity"])),{},{activeSteps:function(){return this.steps.filter((function(e){return e.hasData}))}}),created:function(){var e=this;oe.$on("sums",this.onSums),this.onStoreMutation=this.$store.subscribe((function(t){switch(t.type){case"settings/SET_PAIR":e.createCounters();break;case"settings/REPLACE_COUNTERS":case"settings/TOGGLE_LIQUIDATIONS_ONLY":case"settings/TOGGLE_COUNTERS_COUNT":e.createCounters();break}})),this.createCounters(),this._populateCountersInterval=setInterval(this.populateCounters.bind(this),this.countersGranularity)},mounted:function(){},beforeDestroy:function(){oe.$off("sums",this.onSums),this.onStoreMutation(),clearInterval(this._populateCountersInterval)},methods:{onSums:function(e){var t={buy:e.vbuy,sell:e.vsell};if(this.liquidationsOnly?(t.buy=e.lbuy,t.sell=e.lsell):this.countersCount&&(t.buy=e.cbuy,t.sell=e.csell),t.buy||t.sell){Qt.timestamp||(Qt.timestamp=e.timestamp),Qt.buy+=t.buy,Qt.sell+=t.sell;for(var i=0;i<this.steps.length;i++)this.steps[i].buy+=t.buy,this.steps[i].sell+=t.sell}},clearCounters:function(){Xt.splice(0,Xt.length),Qt.timestamp=null,Qt.buy=Qt.sell=0,this.steps.splice(0,this.steps.length)},createCounters:function(){var e=this;this.clearCounters();var t,i=Object(r["a"])(this.countersSteps);try{for(i.s();!(t=i.n()).done;){var s=t.value;Xt.push({duration:s,chunks:[]})}}catch(u){i.e(u)}finally{i.f()}var n,a=Object(r["a"])(Xt);try{for(a.s();!(n=a.n()).done;){var o=n.value,c=0===Xt.indexOf(o);this.steps.push({duration:Object(l["getHms"])(o.duration),buy:0,sell:0,hasData:c})}}catch(u){a.e(u)}finally{a.f()}setTimeout((function(){var t=e.$el.querySelector(".counter:first-child");e.topElement.buy=t.children[0],e.topElement.sell=t.children[1]}))},populateCounters:function(){var e=+new Date;Qt.timestamp&&(Xt[0].chunks.push({timestamp:Qt.timestamp,buy:Qt.buy,sell:Qt.sell}),Qt.timestamp=null,Qt.buy=0,Qt.sell=0);for(var t,i,s=[],n=0;n<Xt.length;n++){s.length&&(Array.prototype.push.apply(Xt[n].chunks,s.splice(0,s.length)),this.steps[n].hasData||(this.steps[n].hasData=!0)),t=0,i=0;for(var a=0,r=0;r<Xt[n].chunks.length;r++)if(t+=Xt[n].chunks[r].buy,i+=Xt[n].chunks[r].sell,Xt[n].chunks[r].timestamp>=e-Xt[n].duration){a=r;break}a&&(s=Xt[n].chunks.splice(0,a+1),isNaN(this.steps[n].buy-t)||isNaN(this.steps[n].sell-i),this.steps[n].buy-=t,this.steps[n].sell-=i)}}},getCountersRange:function(){var e=+new Date;return{from:e-this.countersSteps[this.countersSteps.length-1],to:e}},getFirstPoint:function(){for(var e=Xt.length-1;e>=0;e--)for(var t=Xt[e].chunks.length-1;t>=0;t--)return Xt[e].chunks[t].timestamp;return null}},Zt=Yt,ei=(i("87b2"),Object(de["a"])(Zt,Vt,Jt,!1,null,null,null)),ti=ei.exports,ii=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"stats",attrs:{id:"stats"},on:{mouseenter:e.stopKeepAlive,mouseleave:function(t){e.statsChart&&e.keepAlive()}}},[e.statsChart?i("div",{ref:"chart",staticClass:"stats__chart"}):e._e(),i("ul",{staticClass:"stats__counters"},e._l(e.data,(function(t,s){return i("li",{key:s,staticClass:"stat-counter",on:{click:function(t){return e.editByName(s)}}},[i("div",{staticClass:"stat-counter__name",style:{color:e.colors[s]}},[e._v(e._s(s))]),i("div",{staticClass:"stat-counter__value"},[e._v(e._s(t))])])})),0)])},si=[],ni=(i("cb29"),i("a630"),i("8192")),ai=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.options,n=i.model;Object(p["a"])(this,e),this.outputFunction=t,this.period=(isNaN(s.period)?O["a"].state.settings.statsPeriod:+s.period)||0,this.precision=s.precision,this.color=s.color,this.granularity=Math.max(O["a"].state.settings.statsGranularity,this.period/50),this.type=s.type||"line",this.serie=null,this.timeouts=[],"undefined"!==typeof n&&(this.model=n),console.log("[counter.js] create",{outputFunction:this.outputFunction,period:this.period,granularity:this.granularity}),this.clear()}return Object(_["a"])(e,[{key:"clear",value:function(){this.live=this.getModel(),this.stacks=[];for(var e=0;e<this.timeouts.length;e++)clearTimeout(this.timeouts[e])}},{key:"unbind",value:function(){console.log("[counter.js] unbind"),this.clear()}},{key:"onStats",value:function(e,t){var i=this.outputFunction(t);(!this.stacks.length||e>this.timestamp+this.granularity)&&this.appendStack(e),this.addData(i)}},{key:"appendStack",value:function(e){e||(e=+new Date),this.stacks.push(this.getModel()),this.timestamp=1e3*Math.floor(e/1e3),this.timeouts.push(setTimeout(this.shiftStack.bind(this),this.period))}},{key:"shiftStack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.stacks.splice(e,1)[0];t&&(this.substractData(t),this.timeouts.shift())}},{key:"getModel",value:function(){return 0}},{key:"addData",value:function(e){this.stacks[this.stacks.length-1]+=e,this.live+=e}},{key:"substractData",value:function(e){this.live-=e}},{key:"getValue",value:function(){return this.live}}]),e}(),ri=function(e){Object(g["a"])(i,e);var t=Object(v["a"])(i);function i(){return Object(p["a"])(this,i),t.apply(this,arguments)}return Object(_["a"])(i,[{key:"getModel",value:function(){return JSON.parse(JSON.stringify(this.model))}},{key:"addData",value:function(e){for(var t=0;t<e.length;t++)this.stacks[this.stacks.length-1][t]+=e[t],this.live[t]+=e[t]}},{key:"substractData",value:function(e){for(var t=0;t<e.length;t++)this.live[t]-=e[t]}}]),i}(ai),oi=i("f189"),ci=JSON.parse(JSON.stringify(oi["a"]));ci.priceScale.position="none",ci.timeScale.rightOffset=0,ci.timeScale.secondsVisible=!0,ci.priceScale.mode=0;var li=JSON.parse(JSON.stringify(oi["b"]));li.overlay=!0,li.lineWidth=2,li.priceLineVisible=!1,li.scaleMargins={top:.05,bottom:.05};var ui,hi,di=[],pi={data:function(){return{data:{}}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["b"])("settings",["statsPeriod","statsChart","statsCounters"])),Object(c["b"])("app",["actives"])),{},{colors:function(){return this.statsCounters.reduce((function(e,t){return e[t.name]=t.color,e}),{})}}),created:function(){var e=this;this.onStoreMutation=this.$store.subscribe((function(t){switch(t.type){case"settings/TOGGLE_STAT":t.payload.value?e.createCounter(e.statsCounters[t.payload.index]):e.removeCounter(e.statsCounters[t.payload.index].name);break;case"settings/SET_STAT_PERIOD":case"settings/SET_STAT_OUTPUT":case"settings/SET_STAT_PRECISION":e.refreshCounter(e.statsCounters[t.payload.index].name);break;case"settings/SET_STAT_NAME":e.renameCounter(t.payload.value);break;case"settings/SET_PAIR":case"settings/SET_STATS_PERIOD":e.prepareCounters();break;case"settings/SET_STAT_COLOR":e.recolorCounter(e.statsCounters[t.payload.index].name,t.payload.value);break;case"settings/TOGGLE_CHART":case"settings/SET_SIDEBAR_WIDTH":e.refreshChartDimensions(t.payload);break;case"settings/TOGGLE_STATS_CHART":t.payload?e.createChart():e.removeChart();break}}))},mounted:function(){this.statsChart&&this.createChart(),this.prepareCounters(),oe.$on("sums",this.onSums)},beforeDestroy:function(){oe.$off("sums",this.onSums),this.clearCounters(),this.removeChart(),this.onStoreMutation(),ui=null},methods:{createChart:function(){var e=this;setTimeout((function(){ui=ni["a"](e.$refs.chart,ci);for(var t=0;t<di.length;t++)e.createCounterSerie(di[t])})),this.keepAlive(),this.chartUpdate()},createCounterSerie:function(e){if(!e.serie){var t="addLineSeries";"histogram"===e.type&&(e.type="histogram",t="addHistogramSeries"),e.serie=ui[t](Object.assign({},li,{color:e.color}))}},removeChart:function(){if(ui){this.stopKeepAlive(),this.stopChartUpdate();for(var e=0;e<di.length;e++)di[e].serie&&(ui.removeSeries(di[e].serie),delete di[e].serie);ui.remove()}},stopKeepAlive:function(){this._keepAliveTimeout&&(clearTimeout(this._keepAliveTimeout),delete this._keepAliveTimeout,console.log("[stats] clear keep alive for chart"))},chartUpdate:function(){this._chartUpdateInterval||(this._chartUpdateInterval=setInterval(this.chartUpdate.bind(this),1e3));for(var e=Math.floor(+new Date/1e3),t=0;t<di.length;t++)if(di[t].stacks.length){if(!di[t].serie)continue;var i=di[t].getValue(),s={time:e,value:i.length?i.reduce((function(e,t){return e+t}),0):i};if("histogram"===di[t].type&&!s.value)return;di[t].serie.update(s)}},stopChartUpdate:function(){this._chartUpdateInterval&&(clearInterval(this._chartUpdateInterval),delete this._chartUpdateInterval,console.log("[stats] clear chart interval"))},keepAlive:function(e){if(e||!this._keepAliveTimeout){if(this._keepAliveTimeout){var t=Object(l["getVisibleRange"])(ui,1);if(t){for(var i=ui.timeScale().scrollPosition(),s=di.filter((function(e){return e.serie})).map((function(e){return e.serie._series})),n=di.map((function(){return[]})),a=Array.from(ui.we.oe),r=Math.max(0,a.length-200);r<a.length;r++)for(var o=Array.from(a[r][1].mapping),c=0;c<o.length;c++){var u=s.indexOf(o[c][0]);-1!==u&&n[u]&&n[u].push(o[c][1])}this.removeChart(),this.createChart(),setTimeout((function(){for(var e=0;e<di.length;e++)di[e].serie&&(console.log("[stats.keepalive] set data to serie #".concat(e," (").concat(n[e].length," points)")),di[e].serie.setData(n[e]));t&&(ui.timeScale().scrollToPosition(i),ui.timeScale().setVisibleRange(t))}))}}else console.log("[stats] setup keep alive for chart");this._keepAliveTimeout=setTimeout(this.keepAlive.bind(this,[this._keepAliveTimeout]),12e4)}},refreshChartDimensions:function(e){var t=this;this.statsChart&&(clearTimeout(this._refreshChartDimensionsTimeout),this._refreshChartDimensionsTimeout=setTimeout((function(){e||(e=t.$el.clientWidth),ui&&ui.resize(e,t.$el.clientHeight)}),500))},prepareCounters:function(){console.log("[stats.prepareCounters]"),this.clearCounters();for(var e=0;e<this.statsCounters.length;e++)this.createCounter(this.statsCounters[e])},onSums:function(e){for(var t=+new Date,i=0;i<di.length;i++)if(di[i].onStats(t,e),di[i].stacks.length){var s=di[i].getValue();s.length?this.$set(this.data,di[i].name,s.map((function(e){return Object(l["formatAmount"])(e)})).join("/")):(s="number"===typeof di[i].precision?s.toFixed(di[i].precision):Object(l["formatAmount"])(s),this.$set(this.data,di[i].name,s))}},clearCounters:function(){for(var e=di.length-1;e>=0;e--)di[e]&&this.removeCounter(e)},removeCounter:function(e){var t=this.getCounter(e);t?(e=di.indexOf(t),console.log("\tunbind counter ".concat(t.name," index ").concat(e)),t.unbind(),t.serie&&ui.removeSeries(t.serie),this.$delete(this.data,t.name),di.splice(e,1)):console.log("[removeCounter] couldnt find counter ".concat(e))},refreshCounter:function(e){var t=this.getCounter(e);if(t){var i=this.statsCounters.filter((function(e){return e.name===t.name}))[0];i?(this.removeCounter(t.name),this.createCounter(i)):console.log("[refreshCounter] couldnt find options for counter ".concat(t.name))}else console.log("[refreshCounter] couldnt find counter ".concat(e))},recolorCounter:function(e,t){var i=this.getCounter(e);i?i.serie&&(console.log("[recolorCounter]",i.name,t),i.color=t,i.serie.applyOptions({color:t})):console.log("[refreshCounter] couldnt find counter ".concat(e))},createCounter:function(e){if(e.enabled&&"undefined"===typeof this.data[e.name]){var t,i=this.getCounterFunction(e.output),s=this.getOutputType(i);t="number"===typeof s?new ri(i,{options:e,model:new Array(s).fill(0)}):new ai(i,{options:e}),ui&&this.createCounterSerie(t),t.name=e.name,di.push(t),this.$set(this.data,t.name,0)}},renameCounter:function(e){for(var t,i=this.statsCounters.map((function(e){return e.name})),s=0;s<di.length;s++)if(-1===i.indexOf(di[s].name)){t=di[s];break}t&&(this.data[e]=this.data[t.name],delete this.data[t.name],t.name=e)},getCounter:function(e){if("number"===typeof e)return di[e];for(var t,i=0;i<di.length;i++)if(di[i].name===e){t=di[i];break}return t},editByName:function(e){for(var t,i=0;i<this.statsCounters.length;i++)if(this.statsCounters[i].name===e){t=i;break}if("number"===typeof t){var s=Object(lt["create"])(ct,"id");s(t)}},getCounterFunction:function(e){var t=e.replace(/([^.]|^)(vbuy|vsell|cbuy|csell|lbuy|lsell)/g,"$1stats.$2");return new Function("stats","'use strict'; return ".concat(t,";"))},getOutputType:function(e){var t={vbuy:2e3,vsell:2e3,cbuy:10,csell:10,lbuy:10,lsell:2},i=e(t);return!!Array.isArray(i)&&i.length}}},_i=pi,mi=(i("bc97"),Object(de["a"])(_i,ii,si,!1,null,null,null)),fi=mi.exports,gi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"exchanges condensed",attrs:{id:"exchanges"},on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},e._l(e.list,(function(t,s){return i("div",{key:s,class:"-"+t+" -"+e.status[t].status,attrs:{title:t},on:{click:function(i){return e.$store.commit("settings/TOGGLE_EXCHANGE_VISIBILITY",t)}}},[i("div",{staticClass:"exchange__price",class:{"-hidden":e.exchanges[t].hidden}},[i("span",{domProps:{innerHTML:e._s(e.$root.formatPrice(e.status[t].price))}})])])})),0)},vi=[],bi={data:function(){return{hovering:!1,list:[],status:{}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])("app",["actives"])),Object(c["b"])("settings",["exchanges"])),created:function(){var e=this;this.list=this.actives.slice(0,this.actives.length),this.status=oe.exchanges.reduce((function(e,t){return e[t.id]={status:"pending",price:null},e}),{}),this.onStoreMutation=this.$store.subscribe((function(t){if("app/EXCHANGE_UPDATED"===t.type&&t.payload){var i=-1!==e.actives.indexOf(t.payload),s=-1!==e.list.indexOf(t.payload);i&&!s?e.list.push(t.payload):!i&&s&&e.list.splice(e.list.indexOf(t.payload),1)}})),this.updateExchangesPrices()},beforeDestroy:function(){this.onStoreMutation(),clearTimeout(this._updateExchangesPricesTimeout)},methods:{updateExchangesPrices:function(){var e=this;this._updateExchangesPricesTimeout=setTimeout(this.updateExchangesPrices.bind(this),1e3+2e3*Math.random());for(var t=+new Date,i=0;i<oe.exchanges.length;i++){var s=oe.exchanges[i].id;-1!==this.actives.indexOf(oe.exchanges[i].id)&&this.status[s].price!==oe.exchanges[i].price&&(oe.exchanges[i].price?t-oe.exchanges[i].timestamp>1e4?this.status[s].status="idle":this.status[s].price>oe.exchanges[i].price?this.status[s].status="down":this.status[s].price<oe.exchanges[i].price?this.status[s].status="up":this.status[s].status="neutral":this.status[s].status="pending",this.status[s].price!==oe.exchanges[i].price&&(this.status[s].price=oe.exchanges[i].price))}this.hovering||(this.list=this.list.sort((function(t,i){return e.status[t].price-e.status[i].price})))}}},Ei=bi,Oi=(i("da50"),Object(de["a"])(Ei,gi,vi,!1,null,null,null)),yi=Oi.exports,Ci=i("8219"),Ti=i.n(Ci),Si=i("4ee8"),xi=i.n(Si),ki={direction:null,index:0,avg:0},wi={components:{Header:Ee,Settings:pt,TradeList:Tt,Chart:Ft,Counters:ti,Notice:_e,Stats:fi,Exchanges:yi,Autocomplete:xe},name:"app",data:function(){return{price:null,baseCurrency:"bitcoin",quoteCurrency:"dollar",symbol:"$",showSettings:!1,showStatistics:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])("app",["isLoading","actives","notices","showSearch","pairs"])),Object(c["b"])("settings",["pair","showChart","showCounters","showStats","decimalPrecision","preferQuoteCurrencySize","showExchangesBar"])),created:function(){var e=this;this.$root.formatPrice=l["formatPrice"],this.$root.formatAmount=l["formatAmount"],null===this.decimalPrecision&&(this.calculateOptimalPrice=!0),this.onStoreMutation=this.$store.subscribe((function(t){switch(t.type){case"settings/SET_PAIR":e.updatePairCurrency(t.payload),oe.connectExchanges(t.payload),e.calculateOptimalPrice=!0;break;case"app/TOGGLE_SEARCH":t.payload?(setTimeout((function(){var t=e.$refs.searchWrapper.querySelector(".autocomplete__input");hi&&(t.innerText=hi,hi=null)})),e.bindSearchClickOutside()):e.unbindSearchClickOutside();break}})),oe.initialize(),this.updatePrice(),this.updatePairCurrency(this.pair)},mounted:function(){this.bindSearchOpenByKey()},beforeDestroy:function(){this.unbindSearchOpenByKey(),clearTimeout(this._updatePriceTimeout),this.onStoreMutation()},methods:{search:function(e){return Object.values(this.$store.state.app.indexedProducts).filter((function(t){return new RegExp(e,"i").test(t.value)}))},bindSearchOpenByKey:function(){var e=this;this._autocompleteHandler=function(t){if(!e.showSearch&&"INPUT"!==document.activeElement.tagName&&"SELECT"!==document.activeElement.tagName&&!document.activeElement.isContentEditable){t=t||window.event;var i=t.which||t.keyCode,s=String.fromCharCode(i);/[a-z0-9]/i.test(s)&&(hi=s,e.$store.commit("app/TOGGLE_SEARCH",!0))}}.bind(this),document.addEventListener("keypress",this._autocompleteHandler)},unbindSearchOpenByKey:function(){this._autocompleteHandler&&(document.removeEventListener("keypress",this._autocompleteHandler),delete this._autocompleteHandler)},updatePairCurrency:function(e){var t=e.replace(/-[\w\d]*$/,""),i={BTC:["bitcoin","฿"],GBP:["pound","£"],EUR:["euro","€"],USD:["dollar","$"],JPY:["yen","¥"],ETH:["ethereum","ETH"],XRP:["xrp","XRP"],LTC:["ltc","LTC"],TRX:["trx","TRX"],ADA:["ada","ADA"],IOTA:["iota","IOTA"],XMR:["xmr","XMR"],NEO:["neo","NEO"],EOS:["eos","EOS"]};this.baseCurrency="coin",this.quoteCurrency="dollar",this.symbol="$";for(var s=0,n=Object.keys(i);s<n.length;s++){var a=n[s];new RegExp(a+"$").test(t)&&(this.quoteCurrency=i[a][0],this.symbol=i[a][1]),new RegExp("^"+a).test(t)&&(this.baseCurrency=i[a][0])}/^(?!XBT|BTC).*\d+$/.test(t)&&(this.quoteCurrency=i.BTC[0],this.symbol=i.BTC[1])},updatePrice:function(){var e=0,t=0,i=null,s=this.actives.length;this.calculateOptimalPrice&&(i=[]);var n,a=Object(r["a"])(oe.exchanges);try{for(a.s();!(n=a.n()).done;){var o=n.value;null!==o.price&&(this.calculateOptimalPrice&&i.push(Object(l["countDecimals"])(o.price)),-1!==this.actives.indexOf(o.id)&&(t++,e+=o.price))}}catch(u){a.e(u)}finally{a.f()}if(t&&(e/=t,this.calculateOptimalPrice&&t>=s/2)){var c=Math.round(i.reduce((function(e,t){return e+t}),0)/i.length);this.$store.commit("app/SET_OPTIMAL_DECIMAL",c),delete this.calculateOptimalPrice}e&&this.updateFavicon(e),this.price=Object(l["formatPrice"])(e),window.document.title=this.pair+" "+this.price.toString().replace(/<\/?[^>]+(>|$)/g,""),this._updatePriceTimeout=setTimeout(this.updatePrice,1e3)},updateFavicon:function(e){ki.index?ki.avg=Object(l["movingAverage"])(ki.avg,e,1/(ki.index+1)):ki.avg=e,ki.index++;var t=e>ki.avg?"up":"down";t!==ki.direction&&(ki.element||(ki.element=document.createElement("link"),ki.element.id="favicon",ki.element.rel="shortcut icon",document.head.appendChild(ki.element)),ki.element.href="up"===t?Ti.a:xi.a)},bindSearchClickOutside:function(){var e=this;this._clickSearchOutsideHandler||(this._clickSearchOutsideHandler=function(t){var i=e.$refs.searchWrapper.children[0];i===t.target||i.contains(t.target)||e.$store.commit("app/TOGGLE_SEARCH",!1)}.bind(this),document.addEventListener("mousedown",this._clickSearchOutsideHandler))},unbindSearchClickOutside:function(){this._clickSearchOutsideHandler&&(document.removeEventListener("mousedown",this._clickSearchOutsideHandler),delete this._clickSearchOutsideHandler)}}},Pi=wi,Di=Object(de["a"])(Pi,n,a,!1,null,null,null),Ai=Di.exports,Ri=i("d0a7"),Mi=i.n(Ri),Li=i("36fc"),ji=(i("bbb4"),i("29d8"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{contenteditable:"true"},on:{keydown:e.onKeyDown,input:function(t){e.changed=!0},focus:e.onFocus,blur:e.onBlur,click:e.onClick}})}),Ii=[],Ui={props:["content"],data:function(){return{changed:!1}},mounted:function(){this.$el.innerText=this.content},watch:{content:function(){this.$el.innerText!==this.content&&(this.$el.innerText=this.content)}},methods:{selectAll:function(){var e=this;window.setTimeout((function(){var t,i;window.getSelection&&document.createRange?(i=document.createRange(),i.selectNodeContents(e.$el),t=window.getSelection(),t.removeAllRanges(),t.addRange(i)):document.body.createTextRange&&(i=document.body.createTextRange(),i.moveToElementText(e.$el),i.select())}),1)},onBlur:function(e){13!==e.which?(this.changed&&this.$emit("output",e.target.innerText),this.focused=!1,window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()):event.preventDefault()},onKeyDown:function(e){if(13===e.which)return event.preventDefault(),void this.$el.blur();isNaN(e.target.innerText)||(38===e.which?this.$emit("output",+e.target.innerText+1):40===e.which&&this.$emit("output",+e.target.innerText-1))},onFocus:function(){!this.focused&&this.selectAll(),this.changed=!1,this.focused=!0},onClick:function(){var e=+new Date;this.clickAt&&e-this.clickAt<250&&this.selectAll(),this.clickAt=e}}},Bi=Ui,Ni=Object(de["a"])(Bi,ji,Ii,!1,null,null,null),$i=Ni.exports,Hi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dropdown"},[e.label?i("div",{staticClass:"dropdown__label",domProps:{innerHTML:e._s(e.label)},on:{click:e.toggle}}):e._e(),i("div",{staticClass:"dropdown__selected",domProps:{innerHTML:e._s(e.options[e.selected]||e.placeholder||"Selection")},on:{click:e.toggle}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"dropdown__options"},e._l(e.options,(function(t,s){return i("div",{key:s,staticClass:"dropdown__option",class:{active:s===e.selected},domProps:{innerHTML:e._s(t)},on:{click:function(t){return e.set(s)}}})})),0)])},Gi=[],Wi={props:["options","label","selected","placeholder"],data:function(){return{isOpen:!1}},methods:{toggle:function(){this.isOpen?this.hide():this.show()},show:function(){this.isOpen=!0,this.bindClickOutside()},hide:function(){this.isOpen=!1,this.unbindClickOutside()},bindClickOutside:function(){var e=this;this._clickOutsideHandler||(this._clickOutsideHandler=function(t){e.$el.contains(t.target)||e.hide()}.bind(this),document.addEventListener("mousedown",this._clickOutsideHandler))},unbindClickOutside:function(){this._clickOutsideHandler&&(document.removeEventListener("mousedown",this._clickOutsideHandler),delete this._clickOutsideHandler)},set:function(e){this.selected=e,this.$emit("output",e),this.hide()}}},qi=Wi,Ki=Object(de["a"])(qi,Hi,Gi,!1,null,null,null),zi=Ki.exports,Fi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("input",{attrs:{type:"range",min:e.min,max:e.max,step:e.step},domProps:{value:e.value},on:{change:function(t){return e.$emit("output",t.target.value)}}})},Vi=[],Ji={props:["min","max","step","value"],mounted:function(){this._onMouseDownHandler=this.onMouseDown.bind(this),this.$el.addEventListener(Pe["b"]?"touchstart":"mousedown",this._onMouseDownHandler,!1)},beforeDestroy:function(){this.$el.removeEventListener(Pe["b"]?"touchstart":"mousedown",this._onMouseDownHandler)},methods:{onMouseDown:function(){var e=this;if(clearTimeout(this._dblClickTimeout),this.pendingDblClick)return this.pendingDblClick=!1,void this.$emit("reset");this._onMouseMoveHandler=this.onMouseMove.bind(this),document.addEventListener(Pe["b"]?"touchmove":"mousemove",this._onMouseMoveHandler,!1),this._onMouseUpHandler=this.onMouseUp.bind(this),document.addEventListener(Pe["b"]?"touchend":"mouseup",this._onMouseUpHandler,!1),this.pendingDblClick=!0,this._dblClickTimeout=window.setTimeout((function(){e.pendingDblClick=!1}),300),setTimeout((function(){e.$emit("output",e.$el.value)}))},onMouseMove:function(){this.$emit("output",this.$el.value)},onMouseUp:function(){document.removeEventListener(Pe["b"]?"touchmove":"mousemove",this._onMouseMoveHandler),document.removeEventListener(Pe["b"]?"touchend":"mouseup",this._onMouseUpHandler)}}},Qi=Ji,Xi=Object(de["a"])(Qi,Fi,Vi,!1,null,null,null),Yi=Xi.exports,Zi=Object({NODE_ENV:"production",VUE_APP_API_SUPPORTED_PAIRS:"undefined",VUE_APP_API_URL:"undefined",VUE_APP_BUILD_DATE:"17 dec",VUE_APP_PROXY_URL:"http://localhost:8080/",VUE_APP_VERSION:"2.5.7",BASE_URL:"/"});for(var es in Zi){var ts=es.match(/^VUE_APP_(.*)/);ts&&ts[1]&&O["a"].commit("app/SET_".concat(ts[1]),Zi[es])}s["a"].use(lt),s["a"].use(Mi.a,{maxWidth:"200px",duration:200,arrow:!1,animation:"scale",size:"small",delay:0,animateFill:!1,theme:"blue"}),s["a"].component("verte",Li["a"]),s["a"].component("dropdown",zi),s["a"].component("editable",$i),s["a"].component("slider",Yi),new s["a"]({el:"#app",store:O["a"],render:function(e){return e(Ai)},props:["initialized"]})},"5f49":function(e,t,i){"use strict";i("25b6")},6412:function(e,t,i){},"792c":function(e,t,i){},8219:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAS5JREFUeNrsljEOgjAUQIuEGJ1c3D0C3kDdTTyCB3F09wgewl2OIEdwN5o6SFQM+Jt8TAeV/t8fF2zyQ4D+/15bKCjV9BZwExebSQyHBE/Hy+k2/ZmABe/hJc2VCATgykciEIKzJQIC3EB3EIOarnuIIUhol7otAjxxgCvsk2CO/wxY8Jj4uKS4HJot4AF3lqhbgpUHXGHumvUMwOhN4lxgs5thLfIMSMBftUBiRBVIBQW0cL1/a8j/QB8iEuLkEAfqWxAJDjTi7AOZoMDl043wS9IV7/vOhBnImSMgIZHhJqS4ApVE27Gv3e4Qp7pOrkWpEjnCSymBkiBh4EeIwqUwZVpdJEhwxVhXI3GD6L7ZxAoqnCNgS3QsiQr+oBYLma9XYUmUCM//XzZOewowABKyYnH/TytxAAAAAElFTkSuQmCC"},8268:function(e,t,i){},"87b2":function(e,t,i){"use strict";i("ab81")},9380:function(e,t,i){"use strict";t["a"]={price:{type:"candlestick",input:"ohlc(bar)",options:{upColor:"#c3a87a",downColor:"#e53935",borderUpColor:"#c3a87a",borderDownColor:"#e53935",wickUpColor:"rgba(223, 195, 148, .8)",wickDownColor:"rgba(224, 91, 95, .8)",priceLineColor:"rgba(255, 255, 255, .5)",priceLineWidth:1,priceLineStyle:2,lastValueVisible:!0,priceLineVisible:!0,borderVisible:!1,scaleMargins:{top:0,bottom:0}}},volume_sell_ema:{type:"line",input:"ema(bar.vsell, options.ema_length)",options:{formatVolume:!0,ema_length:14,scaleGroup:"volume_ema",color:"#c14047",lineWidth:2,overlay:!0,scaleMargins:{top:.8,bottom:0}}},volume_buy_ema:{type:"line",input:"ema(bar.vbuy, options.ema_length)",options:{formatVolume:!0,ema_length:14,scaleGroup:"volume_ema",color:"#c9b087",lineWidth:2,overlay:!0,scaleMargins:{top:.8,bottom:0}}},volume_delta:{type:"histogram",input:"{\n      value: Math.abs(bar.vbuy - bar.vsell),\n      color: bar.vbuy - bar.vsell > 0 ? options.upColor : options.downColor\n    }",options:{formatVolume:!0,upColor:"#c3a87a",downColor:"#e53935",scaleGroup:"volume"}},volume:{type:"histogram",input:"bar.vbuy + bar.vsell",options:{formatVolume:!0,color:"rgba(255, 255, 255, .15)",scaleGroup:"volume"}},liquidations:{type:"histogram",input:"bar.lbuy + bar.lsell",options:{formatVolume:!0,scaleGroup:"volume",color:"#9c27b0"}},cvd:{type:"line",input:"bar.series.cvd.value + (bar.vbuy - bar.vsell)",options:{formatVolume:!0,color:"#ffffff",lineWidth:2,overlay:!0,scaleMargins:{top:.1,bottom:.2}}},ctd:{type:"line",input:"bar.series.ctd.value + (bar.cbuy - bar.csell)",options:{formatVolume:!0,color:"#ffffff",lineWidth:1,lineStyle:2,overlay:!0,scaleMargins:{top:.1,bottom:.2}}},price_sma:{type:"line",input:"sma(bar.series.price.point.close, options.length)",options:{color:"rgba(52,100,69,0.38)",length:50,lineWidth:2}},price_sma2:{type:"line",input:"sma(bar.series.price.point.close, options.length)",options:{color:"rgba(52,100,69,0.38)",length:50,lineWidth:2}},price_cma:{type:"line",input:"cma(bar.series.price.point.close, options.length)",options:{length:21,color:"#8c61f5",lineWidth:2}},price_cma2:{type:"line",input:"cma(bar.series.price.point.close, options.length)",options:{length:21,color:"#8c61f5",lineWidth:2}}}},9690:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a})),i.d(t,"d",(function(){return r})),i.d(t,"c",(function(){return o}));i("a434"),i("1480");var s=i("2fa3"),n=[],a={from:null,to:null};function r(e){var t;if(console.log("[cache/saveChunk]",Object(s["formatTime"])(e.from),Object(s["formatTime"])(e.to)),!n.length||n[n.length-1].to<=e.from?t=n.push(e)-1:n[0].from>=e.to&&(n.unshift(e),t=0),0===t&&(a.from=e.from),t===n.length-1&&(a.to=e.to),"undefined"!==typeof t)return console.log("[saveChunk] new cache range",Object(s["formatTime"])(a.from)," -> ",Object(s["formatTime"])(a.to)),e;console.log("[saveChunk] couldn't save chunk\n\t","- cachedRange [from: "+Object(s["formatTime"])(a.from)," -> to: ",Object(s["formatTime"])(a.to)+"]\n\t","- chunk range [from: "+Object(s["formatTime"])(e.from)," -> to: ",Object(s["formatTime"])(e.to)+"]")}function o(){console.log("[chart/cache] clear cache"),n.splice(0,n.length),a.from=a.to=null}},9970:function(e,t,i){},"9e3f":function(e,t,i){"use strict";i.r(t),i.d(t,"ohlc",(function(){return n})),i.d(t,"ema",(function(){return a})),i.d(t,"sma",(function(){return r})),i.d(t,"cma",(function(){return o}));i("c975");var s=i("4360");function n(e){var t=0,i=!1;null===e.open&&(i=!0,e.open=0),e.high=0,e.low=0,e.close=0;var n=s["a"].state.app.actives;for(var a in e.exchanges)-1!==n.indexOf(a)&&(i&&(e.open+=e.exchanges[a].open),e.high+=e.exchanges[a].high,e.low+=e.exchanges[a].low,e.close+=e.exchanges[a].close,t++);return i&&(e.open/=t),e.high/=t,e.low/=t,e.close/=t,{open:e.open,high:e.high,low:e.low,close:e.close}}function a(e,t,i){var s=2/(i+1);if(e.count){var n=e.points[e.points.length-1];e.output=(t-n)*s+n}else e.output=t;return e.output}function r(e,t){var i=(e.sum+t)/(e.count+1);return e.output=t,i}function o(e,t){return e.output=(e.sum+t)/(e.count+1),e.output}},ab81:function(e,t,i){},b49a:function(e){e.exports=JSON.parse('{"pair":"BTCUSD","preferQuoteCurrencySize":true,"thresholds":[{"amount":100000,"buyColor":"rgba(76,175,80,.33)","sellColor":"rgba(229,115,115,.33)"},{"amount":100000,"buyColor":"rgb(91,130,48)","sellColor":"rgb(224,91,82)"},{"amount":1000000,"gif":"cash","buyColor":"rgb(156,204,101)","sellColor":"rgb(244,67,54)"},{"amount":10000000,"gif":"explosion","buyColor":"rgb(255,160,0)","sellColor":"rgb(233,30,99)"}],"exchanges":{"ftx":{"disabled":true},"liquid":{"disabled":true},"bithumb":{"disabled":true},"hitbtc":{"disabled":true},"coinex":{"disabled":true}},"series":{"price":{"scaleMargins":{"top":0.1,"bottom":0.2}},"liquidations":{},"volume_delta":{},"volume":{}},"maxRows":100,"aggregateTrades":true,"decimalPrecision":null,"showSlippage":false,"liquidationsOnly":false,"showLogos":true,"showChart":true,"chartRefreshRate":500,"timezoneOffset":0,"showExchangesBar":false,"timeframe":10,"debug":false,"useAudio":false,"audioIncludeInsignificants":true,"audioVolume":1.5,"audioPitch":1,"settings":["other","chart","stats","counters","audio"],"chartHeight":null,"sidebarWidth":null,"showThresholdsAsTable":true,"showCounters":false,"countersGranularity":5000,"countersSteps":[30000,60000,900000,1800000],"countersCount":false,"showStats":false,"statsGranularity":5000,"statsPeriod":60000,"statsChart":false,"statsCounters":[{"name":"TRADES","output":"cbuy + csell","enabled":true,"color":"rgba(255, 255, 255, .25)","precision":0},{"name":"VOLUME Δ","output":"vbuy - vsell","enabled":true,"color":"#40d745"},{"name":"TRADES Δ","output":"cbuy - csell","enabled":true,"color":"#2196f3","precision":0},{"name":"1H LIQUIDATIONS","period":3600000,"output":"[lbuy,lsell]","enabled":false,"color":"#e91e63","type":"histogram"}]}')},bc97:function(e,t,i){"use strict";i("792c")},c08c:function(e,t,i){},c10c:function(e,t,i){"use strict";i("cbac")},c961:function(e,t,i){"use strict";i("cae8")},c9d9:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return n}));i("a15b"),i("ac1f"),i("1276"),new Date;var s=/aggr.trade$/.test(window.location.hostname),n=function(){var e=" -webkit- -moz- -o- -ms- ".split(" "),t=function(e){return window.matchMedia(e).matches};if("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)return!0;var i=["(",e.join("touch-enabled),("),"heartz",")"].join("");return t(i)}()},cae8:function(e,t,i){},cb65:function(e,t,i){"use strict";i("36a1")},cbac:function(e,t,i){},cd6d:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ChartController}));var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c975"),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("13d5"),core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_reduce_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("fb6a"),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("a434"),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("4d63"),core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("466d"),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("498a"),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_16__),C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("5530"),C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("53ca"),C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("b85c"),C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("ade3"),C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("d4ec"),C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("bee2"),_data_typedef__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("1480"),_data_typedef__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(_data_typedef__WEBPACK_IMPORTED_MODULE_23__),_store__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("4360"),_data_series__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("9380"),_chartCache__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("9690"),_utils_helpers__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("2fa3"),_chartOptions__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("f189"),_serieFunctions__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("9e3f"),lightweight_charts__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("8192"),availableSerieFunctions=Object.keys(_serieFunctions__WEBPACK_IMPORTED_MODULE_29__).reduce((function(e,t){return e[t]={needsMemory:-1!==["cma","sma","ema"].indexOf(t)},e}),{}),noRedrawOptions=[/priceFormat/i,/color/i,/width/i,"priceLineStyle","lastValueVisible","priceLineVisible","borderVisible"],ChartController=function(){function ChartController(){Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_21__["a"])(this,ChartController),this.chartInstance=null,this.chartElement=null,this.activeSeries=[],this.activeRenderer=null,this.activeChunk=null,this.renderedRange={from:null,to:null},this.queuedTrades=[]}return Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_22__["a"])(ChartController,[{key:"createChart",value:function(e,t){console.log("[chart/controller] create chart");var i=Object.assign({},_chartOptions__WEBPACK_IMPORTED_MODULE_28__["a"],t);_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.series.price&&_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.series.price.scaleMargins&&(i.priceScale.scaleMargins=_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.series.price.scaleMargins),this.chartInstance=lightweight_charts__WEBPACK_IMPORTED_MODULE_30__["a"](e,i),this.chartElement=e,this.addEnabledSeries()}},{key:"removeChart",value:function(){if(console.log("[chart/controller] remove chart"),this.chartInstance){while(this.activeSeries.length)this.removeSerie(this.activeSeries[0]);this.chartInstance.remove(),this.chartInstance=null}}},{key:"getSerie",value:function(e){for(var t=0;t<this.activeSeries.length;t++)if(this.activeSeries[t].id===e)return this.activeSeries[t]}},{key:"setSerieOption",value:function(e){var t=e.id,i=e.key,s=e.value,n=this.getSerie(t);if(n){var a=i;if(-1!==i.indexOf(".")){var r=i.split(".");Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_27__["setValueByDotNotation"])(n.options,r,s),a=r[0]}else n.options[i]=s;n.api.applyOptions(Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_20__["a"])({},a,n.options[a]));for(var o=0;o<noRedrawOptions.length;o++)if(noRedrawOptions[o]===a||noRedrawOptions[o]instanceof RegExp&&noRedrawOptions[o].test(a))return;this.redrawSerie(t)}}},{key:"rebuildSerie",value:function(e){this.removeSerie(this.getSerie(e)),this.addSerie(e),this.redrawSerie(e)}},{key:"setPriceMargins",value:function(e){this.chartInstance.applyOptions({priceScale:{scaleMargins:e}})}},{key:"redrawSerie",value:function(e){var t,i=[],s=Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_19__["a"])(_chartCache__WEBPACK_IMPORTED_MODULE_26__["a"]);try{for(s.s();!(t=s.n()).done;){var n=t.value;n.rendered&&(i=i.concat(n.bars))}}catch(r){s.e(r)}finally{s.f()}var a=this.getSerieDependencies(this.getSerie(e));a.push(e),this.renderBars(i,a)}},{key:"redraw",value:function(e){this.renderVisibleChunks(e)}},{key:"getAvailableSerieFunctions",value:function(){return Object.keys(availableSerieFunctions)}},{key:"prepareSerie",value:function(e){var t,i=e.input.toString().replace(/\n/g,""),s=new RegExp("(".concat(this.getAvailableSerieFunctions().join("|"),")\\(([a-zA-Z0-9._,\\s]+)\\)"),"g"),n=[],a=[];do{if(t=s.exec(i)){-1===a.indexOf(t[1])&&a.push(t[1]);var r=t[2].split(",").map((function(e){return e.trim()})),o=Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_27__["slugify"])(t[2]);availableSerieFunctions[t[1]].needsMemory&&(n.push({id:o,args:r,name:t[1],input:t[2]}),r.unshift("bar.series.".concat(e.id,".memory[").concat(n.length-1,"]"))),i=i.replace(t[0],"this.".concat(t[1],"(").concat(r.join(","),")"))}}while(t);e.memory=n;try{e.adapter=this.buildSerieFunction(e,i)}catch(c){return this.$store.dispatch("app/showNotice",{type:"error",title:"BUILD FAILED "+c.message}),console.error(c),!1}return e}},{key:"buildSerieFunction",value:function(e,t){var i=Math.floor(+new Date/1e3/_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe)*_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe,s={timestamp:i,exchanges:{},open:null,high:null,low:null,close:null,vbuy:0,vsell:0,cbuy:0,csell:0,lbuy:0,lsell:0,series:Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_20__["a"])({},e.id,{value:0})},n=this.getSerieDependencies(e);n.push(e.id);for(var a=0;a<n.length;a++)s.series[n[a]]={value:0},n[a]===e.id&&e.memory.length&&(s.series[e.id].memory=e.memory);e.memory&&s.series[e.id];var r=new Function("bar","options","return "+t.replace(/bar\.series\.[a-zA-Z0-9_]+\.point\.[a-z]+/g,1)).apply({cma:function(){return 1},ema:function(){return 1},sma:function(){return 1},ohlc:function(){return{open:1,high:1,low:1,close:1}}},[s,e.options]);return null!==r&&"object"!==Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_18__["a"])(r)&&(t="{ value: ".concat(t," }")),new Function("bar","options","return "+t).bind(_serieFunctions__WEBPACK_IMPORTED_MODULE_29__)}},{key:"bindSerie",value:function bindSerie(serie,renderer){if(renderer&&"undefined"===typeof renderer.series[serie.id]){renderer.series[serie.id]={value:null},serie.memory.length&&(renderer.series[serie.id].memory=[]);for(var i=0;i<serie.memory.length;i++){var fn=serie.memory[i];renderer.series[serie.id].memory.push({output:null,length:eval(fn.args[2].toString().replace(/^options/,"serie.options")),points:[],count:0,sum:0})}}}},{key:"unbindSerie",value:function(e,t){t&&"undefined"!==typeof t.series[e.id]&&delete t.series[e.id]}},{key:"addEnabledSeries",value:function(){for(var e in _data_series__WEBPACK_IMPORTED_MODULE_25__["a"])_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.series[e]&&!1!==_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.series[e].enabled&&this.addSerie(e)}},{key:"getSeriesDependendingOn",value:function(e){for(var t=[],i=0;i<this.activeSeries.length;i++){var s=this.activeSeries[i];s.id!==e.id&&(this.isSerieReferencedIn(e,s)&&t.push(s.id))}return t}},{key:"getSerieDependencies",value:function(e){var t,i=e.input.toString(),s=new RegExp("bar\\.series\\.([a-z0-9_]+)\\.","g"),n=[];do{(t=s.exec(i))&&t[1]!==e.id&&n.push(t[1])}while(t);return n}},{key:"isSerieReferencedIn",value:function(e,t){var i=t.input.toString(),s=new RegExp("bar\\.series\\.".concat(e.id,"\\."),"g");return!!i.match(s)}},{key:"addSerie",value:function(e){var t=_data_series__WEBPACK_IMPORTED_MODULE_25__["a"][e],i=Object.assign({},_chartOptions__WEBPACK_IMPORTED_MODULE_28__["c"][t.type]||{},_data_series__WEBPACK_IMPORTED_MODULE_25__["a"][e].options||{},_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.series[e]||{}),s=i.type||_data_series__WEBPACK_IMPORTED_MODULE_25__["a"][e].type,n="add"+(s.charAt(0).toUpperCase()+s.slice(1))+"Series",a=this.prepareSerie({id:e,type:s,input:t.input,options:i});return!!a&&(a.api=this.chartInstance[n](i),this.activeSeries.push(a),_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.app.activeSeries.push(e),this.bindSerie(a,this.activeRenderer),!0)}},{key:"removeSerie",value:function(e){if(e){this.chartInstance.removeSeries(e.api),this.unbindSerie(e,this.activeRenderer),_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.app.activeSeries.splice(_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.app.activeSeries.indexOf(e.id),1),_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.app.activeSeries=_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.app.activeSeries.slice(0,_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.app.activeSeries.length);var t,i=Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_19__["a"])(this.getSeriesDependendingOn(e));try{for(i.s();!(t=i.n()).done;){var s=t.value;this.removeSerie(this.getSerie(s))}}catch(n){i.e(n)}finally{i.f()}this.activeSeries.splice(this.activeSeries.indexOf(e),1)}}},{key:"toggleSerie",value:function(e){var t=e.id,i=e.value;i?this.addSerie(t)&&this.redrawSerie(t):this.removeSerie(this.getSerie(t))}},{key:"getVisibleRange",value:function(){var e=this.getUTCVisibleRange();if(e){var t=this.chartInstance.timeScale().scrollPosition();return t>0&&(e.to=Math.floor((e.to+t*_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe)/_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe)*_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe),{from:e.from,to:e.to,median:e.from+(e.to-e.from)/2}}return this.getRealtimeRange()}},{key:"getUTCVisibleRange",value:function(){var e=this.chartInstance.timeScale().getVisibleRange(),t=_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timezoneOffset/1e3;return e?{from:e.from-t,to:e.to-t}:null}},{key:"getRealtimeRange",value:function(){var e=this.getOptimalRangeLength(),t=+new Date/1e3,i=Math.ceil(t/_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe)*_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe-e;return{from:i,to:t,median:i+(t-i)/2,incomplete:!0}}},{key:"getOptimalRangeLength",value:function(){return Math.floor(this.chartElement.offsetWidth/3*_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe/_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe)*_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe}},{key:"isEmpty",value:function(){return!this.chartInstance.timeScale().getVisibleRange()}},{key:"clearChart",value:function(){console.log("[chart/controller] clear chart (all series emptyed)"),this.preventPan();var e,t=Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_19__["a"])(this.activeSeries);try{for(t.s();!(e=t.n()).done;){var i=e.value;this.clearSerie(i)}}catch(s){t.e(s)}finally{t.f()}this.renderedRange.from=this.renderedRange.to=null}},{key:"clearData",value:function(){console.log("[chart/controller] clear data (activeRenderer+activeChunk+queuedTrades1)"),this.activeRenderer=null,this.activeChunk=null,this.queuedTrades.splice(0,this.queuedTrades.length)}},{key:"clear",value:function(){console.log("[chart/controller] clear all (cache+activedata+chart)"),Object(_chartCache__WEBPACK_IMPORTED_MODULE_26__["c"])(),this.clearData(),this.clearChart()}},{key:"destroy",value:function(){console.log("[chart/controller] destroy"),Object(_chartCache__WEBPACK_IMPORTED_MODULE_26__["c"])(),this.clearData(),this.clearChart(),this.removeChart(),this.clearQueue()}},{key:"clearSerie",value:function(e){e.api.setData([])}},{key:"setupQueue",value:function(){var e=this;!this._releaseQueueInterval&&_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.chartRefreshRate&&(console.log("[chart/controller] setup queue (".concat(Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_27__["getHms"])(_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.chartRefreshRate),")")),this._releaseQueueInterval=setInterval((function(){e.preventImmediateRender||e.releaseQueue()}),_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.chartRefreshRate))}},{key:"clearQueue",value:function(){this._releaseQueueInterval&&(console.log("[chart/controller] clear queue"),clearInterval(this._releaseQueueInterval),delete this._releaseQueueInterval,this.releaseQueue())}},{key:"releaseQueue",value:function(){this.queuedTrades.length&&!this.preventRender&&(this.renderRealtimeTrades(this.queuedTrades),this.queuedTrades.splice(0,this.queuedTrades.length))}},{key:"unlockRender",value:function(){this.preventRender=!1}},{key:"lockRender",value:function(){this.preventRender=!0}},{key:"queueTrades",value:function(e){Array.prototype.push.apply(this.queuedTrades,e)}},{key:"renderRealtimeTrades",value:function(e){var t=[];if(e.length){var i=!this.activeChunk||this.activeChunk.rendered,s=0;for(s;s<e.length;s++){var n=e[s],a=Math.floor(n.timestamp/1e3/_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe)*_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe;if(!this.activeRenderer||this.activeRenderer.timestamp<a){if(this.activeRenderer){if(!this.activeChunk||this.activeChunk.to<this.activeRenderer.timestamp&&this.activeChunk.bars.length>500){var r=this.getVisibleRange();i=this.activeRenderer.timestamp>=r.from&&this.activeRenderer.timestamp<=r.to,this.activeChunk&&(this.activeChunk.active=!1),this.activeChunk=Object(_chartCache__WEBPACK_IMPORTED_MODULE_26__["d"])({from:this.activeRenderer.timestamp,to:this.activeRenderer.timestamp,active:!0,rendered:i,bars:[]})}for(var o in i&&this.activeRenderer.hasData&&t.push(this.computeBar(this.activeRenderer)),this.activeRenderer.exchanges)this.activeRenderer.exchanges[o].hasData&&this.activeChunk.bars.push(this.cloneBar(this.activeRenderer.exchanges[o],this.activeRenderer.timestamp));this.activeChunk.to=_chartCache__WEBPACK_IMPORTED_MODULE_26__["b"].to=this.activeRenderer.timestamp,i&&this.renderedRange.to<this.activeRenderer.timestamp&&(this.renderedRange.to=this.activeRenderer.timestamp),this.nextBar(a,this.activeRenderer)}else this.activeRenderer=this.newBar(a);this.preventPan()}var c=n.price*n.size;this.activeRenderer.exchanges[n.exchange]||(this.activeRenderer.exchanges[n.exchange]={exchange:n.exchange,close:+n.price},this.resetBar(this.activeRenderer.exchanges[n.exchange])),this.activeRenderer.exchanges[n.exchange].hasData=!0;var l=-1!==_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.app.actives.indexOf(n.exchange);n.liquidation?(this.activeRenderer.exchanges[n.exchange]["l"+n.side]+=c,l&&(this.activeRenderer["l"+n.side]+=c,this.activeRenderer.hasData=!0)):(this.activeRenderer.exchanges[n.exchange].high=Math.max(this.activeRenderer.exchanges[n.exchange].high,+n.price),this.activeRenderer.exchanges[n.exchange].low=Math.min(this.activeRenderer.exchanges[n.exchange].low,+n.price),this.activeRenderer.exchanges[n.exchange].close=+n.price,this.activeRenderer.exchanges[n.exchange]["c"+n.side]++,this.activeRenderer.exchanges[n.exchange]["v"+n.side]+=c,l&&(this.activeRenderer["v"+n.side]+=c,this.activeRenderer["c"+n.side]++,this.activeRenderer.hasData=!0))}i&&this.activeRenderer.hasData&&(t.push(this.computeBar(this.activeRenderer)),this.renderedRange.to<this.activeRenderer.timestamp&&(this.renderedRange.to=this.activeRenderer.timestamp));for(var u=0;u<t.length;u++)this.updateBar(t[u])}}},{key:"groupTradesIntoBars",value:function(e){if(e.length){for(var t={timestamp:null,exchanges:{}},i=0,s=Object.keys(_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.exchanges).filter((function(e){return!_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.exchanges[e].disabled})),n=0;n<e.length;n++)if(!t.exchanges[e[n][0]]&&-1!==s.indexOf(e[n][0])&&(i++,t.exchanges[e[n][0]]={exchange:e[n][0],close:+e[n][2]},this.resetBar(t.exchanges[e[n][0]]),i===s.length))break;i!==s.length&&console.log("[groupTradesIntoBars] couldn't find all exchange's first price (".concat(e.length," processed)"));for(var a=[],r=0;r<=e.length;r++){var o=e[r]?Math.floor(e[r][1]/1e3/_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe)*_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe:1/0;if(t.timestamp<o){for(var c in t.timestamp&&this.activeRenderer&&(t.timestamp,this.activeRenderer.timestamp),t.exchanges)t.timestamp&&t.exchanges[c].hasData&&(a.push(this.cloneBar(t.exchanges[c],t.timestamp)),this.resetBar(t.exchanges[c]));if(!e[r])break;t.timestamp=o}var l=e[r][0];if(t.exchanges[l]){var u=e[r][4]>0?"buy":"sell";t.exchanges[l].hasData=!0,1!==e[r][5]?(t.exchanges[l].high=Math.max(t.exchanges[l].high,+e[r][2]),t.exchanges[l].low=Math.min(t.exchanges[l].low,+e[r][2]),t.exchanges[l].close=+e[r][2],t.exchanges[l]["c"+u]++,t.exchanges[l]["v"+u]+=e[r][3]*e[r][2]):t.exchanges[l]["l"+u]+=e[r][3]*e[r][2]}}if(!a.length)return!1;var h=Math.floor(a[0].timestamp/_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe)*_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe,d=Math.floor(a[a.length-1].timestamp/_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe)*_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe,p=h+(d-h)/2,_=e[e.length-1][1]/1e3;return{from:h,to:d,median:p,bars:a,lastTimestamp:_}}}},{key:"cloneBar",value:function(e,t){return{exchange:e.exchange,timestamp:t||e.timestamp,open:e.open,high:e.high,low:e.low,close:e.close,vbuy:e.vbuy,vsell:e.vsell,cbuy:e.cbuy,csell:e.csell,lbuy:e.lbuy,lsell:e.lsell}}},{key:"renderBars",value:function(e,t){if(console.log("[chart/controller] render bars","(",t?"specific serie(s): "+t.join(","):"all series",")",e.length,"bar(s)"),e.length){for(var i,s=this.getVisibleRange(),n={},a=null,r=null,o=0,c=0;c<=e.length;c++){var l=e[c];if(!l||!i||l.timestamp>i.timestamp){if(i&&i.hasData){null===a&&(a=i.timestamp),r=i.timestamp;var u=this.computeBar(i,t);for(var h in u)"undefined"===typeof n[h]&&(n[h]=[]),n[h].push(u[h]);i.timestamp>s.to&&o++}if(!l)break;i?this.nextBar(l.timestamp,i):i=this.newBar(l.timestamp,t)}-1!==_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.app.actives.indexOf(l.exchange)&&(i.hasData=!0,i.vbuy+=l.vbuy,i.vsell+=l.vsell,i.cbuy+=l.cbuy,i.csell+=l.csell,i.lbuy+=l.lbuy,i.lsell+=l.lsell,i.exchanges[l.exchange]=this.cloneBar(l))}if(t||(this.clearChart(),e.length?(this.renderedRange.from=a,this.renderedRange.to=r):this.renderedRange.from=this.renderedRange.to=null),this.replaceData(n),!t){var d=-1*o||16;this.chartInstance.timeScale().scrollToPosition(d)}if(!this.activeChunk||this.activeChunk.rendered&&this.activeChunk.to===i.timestamp)if(t&&this.activeRenderer){if(t){var p,_=Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_19__["a"])(t);try{for(_.s();!(p=_.n()).done;){var m=p.value;this.activeRenderer.series[m]=i.series[m]}}catch(g){_.e(g)}finally{_.f()}}}else{if(this.activeRenderer){for(var f in i.vbuy=this.activeRenderer.vbuy,i.vsell=this.activeRenderer.vsell,i.lbuy=this.activeRenderer.lbuy,i.lsell=this.activeRenderer.lsell,i.cbuy=this.activeRenderer.cbuy,i.csell=this.activeRenderer.csell,i.open=this.activeRenderer.open,this.activeRenderer.exchanges)i.exchanges[f]=this.activeRenderer.exchanges[f];i.timestamp=this.activeRenderer.timestamp}this.activeRenderer=i}}}},{key:"renderVisibleChunks",value:function(e){if(_chartCache__WEBPACK_IMPORTED_MODULE_26__["a"].length){var t=this.getVisibleRange();t.from-=+_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe,t.to+=+_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timeframe;var i=[];console.log("[renderVisibleChunks]","from: ".concat(Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_27__["formatTime"])(t.from)," -> to: ").concat(Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_27__["formatTime"])(t.to)));for(var s=_chartCache__WEBPACK_IMPORTED_MODULE_26__["a"].length-1;s>=0;s--){var n=_chartCache__WEBPACK_IMPORTED_MODULE_26__["a"][s];if(n.from>=t.from&&n.from<=t.to||n.to>=t.from&&n.to<=t.to||n.from<=t.from&&n.to>=t.to){var a=[];n.from>=t.from&&n.from<=t.to&&a.push("start of chunk visible"),n.to>=t.from&&n.to<=t.to&&a.push("end of chunk visible"),n.from<=t.from&&n.to>=t.to&&a.push("larger than (or equal to) view"),console.log("[renderVisibleChunks] select chunk ".concat(n.active?"(active chunk)":""," n°").concat(_chartCache__WEBPACK_IMPORTED_MODULE_26__["a"].indexOf(n)," from: ").concat(Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_27__["formatTime"])(n.from)," -> to: ").concat(Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_27__["formatTime"])(n.to),"\n\t->").concat(a)),i=n.bars.concat(i),n.rendered=!0}else n.rendered=!1,console.log("[renderVisibleChunks] ignore chunk ".concat(n.active?"(active chunk)":""," n°").concat(_chartCache__WEBPACK_IMPORTED_MODULE_26__["a"].indexOf(n)," from: ").concat(Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_27__["formatTime"])(n.from)," -> to: ").concat(Object(_utils_helpers__WEBPACK_IMPORTED_MODULE_27__["formatTime"])(n.to)))}this.renderBars(i,null,e)}}},{key:"setMarkers",value:function(e,t){e.markers||(e.markers=[]);for(var i=e.markers.length-1;i>=0;i--)if(e.markers[i].time===t.time){e.markers.splice(i,1);break}e.markers.push(t),setTimeout((function(){e.api.setMarkers(e.markers)}),100)}},{key:"preventPan",value:function(){var e=this;if(!this.panPrevented){var t=1e3;"undefined"!==typeof this._releasePanTimeout&&clearTimeout(this._releasePanTimeout),this.panPrevented=!0,this._releasePanTimeout=window.setTimeout((function(){e.panPrevented&&(e.panPrevented=!1)}),t)}}},{key:"replaceData",value:function(e){this.preventPan();var t,i=Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_19__["a"])(this.activeSeries);try{for(i.s();!(t=i.n()).done;){var s=t.value;e[s.id]&&e[s.id].length&&s.api.setData(e[s.id])}}catch(n){i.e(n)}finally{i.f()}}},{key:"updateBar",value:function(e){var t,i=Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_19__["a"])(this.activeSeries);try{for(i.s();!(t=i.n()).done;){var s=t.value;e[s.id]&&s.api.update(e[s.id])}}catch(n){i.e(n)}finally{i.f()}}},{key:"computeBar",value:function(e,t){var i,s={},n=Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_19__["a"])(this.activeSeries);try{for(n.s();!(i=n.n()).done;){var a=i.value;if(!t||-1!==t.indexOf(a.id)){var r=e.series[a.id];r.point=a.adapter(e,a.options),(r.point.value||r.point.open)&&(s[a.id]=Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_17__["a"])({time:e.timestamp+_store__WEBPACK_IMPORTED_MODULE_24__["a"].state.settings.timezoneOffset/1e3},r.point))}}}catch(o){n.e(o)}finally{n.f()}return s}},{key:"newBar",value:function(e,t){var i,s={timestamp:e,series:{},exchanges:{},open:null,high:null,low:null,close:null,vbuy:0,vsell:0,cbuy:0,csell:0,lbuy:0,lsell:0},n=Object(C_Users_inoue_Desktop_next_playground_SignificantTrades_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_19__["a"])(this.activeSeries);try{for(n.s();!(i=n.n()).done;){var a=i.value;t&&-1===t.indexOf(a.id)||this.bindSerie(a,s)}}catch(r){n.e(r)}finally{n.f()}return s}},{key:"nextBar",value:function(e,t){if(t.hasData)for(var i=0;i<this.activeSeries.length;i++){var s=t.series[this.activeSeries[i].id];if(s&&(s.value=s.point.value||s.point.close,s.memory))for(var n=0;n<s.memory.length;n++){var a=s.memory[n];a.points.push(a.output),a.sum+=a.output,a.count++,a.count>a.length&&(a.sum-=a.points.shift(),a.count--)}}t.timestamp=e,this.resetBar(t)}},{key:"resetBar",value:function(e){if(e.open=e.close,e.high=e.close,e.low=e.close,e.vbuy=0,e.vsell=0,e.cbuy=0,e.csell=0,e.lbuy=0,e.lsell=0,e.hasData=!1,e.exchanges)for(var t in e.exchanges)this.resetBar(e.exchanges[t])}}]),ChartController}()},d382:function(e,t,i){"use strict";i("c08c")},da50:function(e,t,i){"use strict";i("8268")},f189:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o}));var s={crosshair:{vertLine:{color:"rgba(255, 255, 255, .75)",width:.5,style:2,visible:!0,labelVisible:!0},horzLine:{color:"rgba(255, 255, 255, .75)",width:.5,style:2,visible:!0,labelBackgroundColor:"white",labelVisible:!0},mode:0},layout:{backgroundColor:"transparent",textColor:"white",fontFamily:"Roboto Condensed"},grid:{horzLines:{visible:!1},vertLines:{visible:!1}},timeScale:{barSpacing:3,rightOffset:12,lockVisibleTimeRangeOnResize:!0,rightBarStaysOnScroll:!0,borderVisible:!0,borderColor:"rgba(255, 255, 255, .2)",visible:!0,timeVisible:!0,secondsVisible:!0},priceScale:{position:"right",mode:0,borderColor:"rgba(255, 255, 255, .2)"}},n={crosshairMarkerVisible:!1,lastValueVisible:!1,priceLineVisible:!1},a={baseLineStyle:!1,lastValueVisible:!0,priceLineVisible:!0,priceLineWidth:1,priceLineColor:"rgba(255, 255, 255, .5)",priceLineStyle:2,priceFormat:{type:"price",precision:2},overlay:!1,borderVisible:!1,upColor:"#c3a87a",downColor:"#e53935",wickUpColor:"rgba(223, 195, 148, .8)",wickDownColor:"rgba(224, 91, 95, .8)"},r={color:"#c3a87a",lastValueVisible:!1,priceLineVisible:!1,overlay:!0,scaleMargins:{top:.8,bottom:0}},o={line:n,candlestick:a,histogram:r}}});
//# sourceMappingURL=app.ae062b2f.js.map