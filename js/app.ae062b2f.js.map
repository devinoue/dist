{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/helpers.js","webpack:///./src/components/ui/Header.vue?ae09","webpack:///./src/store/settings/state.js","webpack:///./src/store/settings/actions.js","webpack:///./src/store/settings/mutations.js","webpack:///./src/store/settings/index.js","webpack:///./src/store/app/state.js","webpack:///./src/store/app/actions.js","webpack:///./src/store/app/mutations.js","webpack:///./src/store/app/index.js","webpack:///./src/store/index.js","webpack:///./src/components/chart/SerieControl.vue?4153","webpack:///./src/assets/down.png","webpack:///./src/App.vue?7d31","webpack:///./src/services/exchange.js","webpack:///./src/exchanges/kraken.js","webpack:///./src/exchanges/bitmex.js","webpack:///./src/exchanges/huobi.js","webpack:///./src/exchanges/binance.js","webpack:///./src/exchanges/binance-futures.js","webpack:///./src/exchanges/bitfinex.js","webpack:///./src/exchanges/bitstamp.js","webpack:///./src/exchanges/gdax.js","webpack:///./src/exchanges/hitbtc.js","webpack:///./src/exchanges/okex.js","webpack:///./src/exchanges/poloniex.js","webpack:///./src/exchanges/deribit.js","webpack:///./src/exchanges/bybit.js","webpack:///./src/exchanges/ftx.js","webpack:///./src/services/socket.js","webpack:///./src/components/ui/Notice.vue?9d53","webpack:///src/components/ui/Notice.vue","webpack:///./src/components/ui/Notice.vue?6835","webpack:///./src/components/ui/Notice.vue","webpack:///./src/components/ui/Header.vue?bb7e","webpack:///src/components/ui/Header.vue","webpack:///./src/components/ui/Header.vue?0f8c","webpack:///./src/components/ui/Header.vue?cc46","webpack:///./src/components/ui/Autocomplete.vue?191c","webpack:///src/components/ui/Autocomplete.vue","webpack:///./src/components/ui/Autocomplete.vue?9140","webpack:///./src/components/ui/Autocomplete.vue","webpack:///./src/components/Settings.vue?d4e3","webpack:///./src/components/Exchange.vue?df2a","webpack:///src/components/Exchange.vue","webpack:///./src/components/Exchange.vue?e99e","webpack:///./src/components/Exchange.vue?1ff6","webpack:///./src/components/Thresholds.vue?f644","webpack:///./src/utils/colors.js","webpack:///src/components/Thresholds.vue","webpack:///src/components/TradeList.vue","webpack:///./src/components/Thresholds.vue?77a9","webpack:///./src/components/Thresholds.vue?af7a","webpack:///./src/components/StatDialog.vue?d630","webpack:///src/components/StatDialog.vue","webpack:///./src/components/StatDialog.vue?7cbb","webpack:///./src/components/StatDialog.vue","webpack:///src/components/Settings.vue","webpack:///./src/components/Settings.vue?32cf","webpack:///./src/components/Settings.vue?35ac","webpack:///./src/components/TradeList.vue?0c56","webpack:///./src/services/sfx.js","webpack:///./src/components/TradeList.vue?75c0","webpack:///./src/components/TradeList.vue?33b2","webpack:///./src/components/chart/Chart.vue?8086","webpack:///./src/components/chart/SerieControl.vue?4c9d","webpack:///./src/components/chart/SerieDialog.vue?10cf","webpack:///src/components/chart/SerieDialog.vue","webpack:///./src/components/chart/SerieDialog.vue?2971","webpack:///./src/components/chart/SerieDialog.vue","webpack:///src/components/chart/SerieControl.vue","webpack:///./src/components/chart/SerieControl.vue?5ff1","webpack:///./src/components/chart/SerieControl.vue?c339","webpack:///src/components/chart/Chart.vue","webpack:///./src/components/chart/Chart.vue?c8f6","webpack:///./src/components/chart/Chart.vue?28d1","webpack:///./src/components/Counters.vue?9fa3","webpack:///src/components/Counters.vue","webpack:///./src/components/Counters.vue?7f69","webpack:///./src/components/Counters.vue?f6e0","webpack:///./src/components/Stats.vue?59e6","webpack:///./src/utils/counter.js","webpack:///./src/utils/multiCounter.js","webpack:///src/components/Stats.vue","webpack:///src/App.vue","webpack:///./src/components/Stats.vue?c375","webpack:///./src/components/Stats.vue?59fb","webpack:///./src/components/Exchanges.vue?e285","webpack:///src/components/Exchanges.vue","webpack:///./src/components/Exchanges.vue?2e30","webpack:///./src/components/Exchanges.vue?88a1","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/components/ui/Editable.vue?f374","webpack:///src/components/ui/Editable.vue","webpack:///./src/components/ui/Editable.vue?c532","webpack:///./src/components/ui/Editable.vue","webpack:///./src/components/ui/Dropdown.vue?639a","webpack:///src/components/ui/Dropdown.vue","webpack:///./src/components/ui/Dropdown.vue?2ed3","webpack:///./src/components/ui/Dropdown.vue","webpack:///./src/components/ui/Slider.vue?bc85","webpack:///src/components/ui/Slider.vue","webpack:///./src/components/ui/Slider.vue?9919","webpack:///./src/components/ui/Slider.vue","webpack:///./src/main.js","webpack:///./src/components/chart/Chart.vue?e756","webpack:///./src/assets/up.png","webpack:///./src/components/Counters.vue?2433","webpack:///./src/data/series.js","webpack:///./src/components/chart/chartCache.js","webpack:///./src/components/chart/serieFunctions.js","webpack:///./src/components/Stats.vue?0f01","webpack:///./src/components/Exchange.vue?11a1","webpack:///./src/components/TradeList.vue?911b","webpack:///./src/utils/constants.js","webpack:///./src/components/Thresholds.vue?04ea","webpack:///./src/components/chart/chartController.js","webpack:///./src/components/Settings.vue?688d","webpack:///./src/components/Exchanges.vue?6961","webpack:///./src/components/chart/chartOptions.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","parseQueryString","QUERY_STRING","JSON","parse","decodeURI","location","search","substring","replace","error","formatAmount","amount","decimals","negative","Math","ceil","abs","toFixed","isNaN","store","state","settings","decimalPrecision","countDecimals","floor","toString","split","formatPrice","price","app","optimalDecimal","padNumber","num","size","substr","ago","timestamp","interval","output","seconds","Date","getHms","round","isNegPrefix","h","trim","uniqueName","names","base","variante","indexOf","movingAverage","accumulator","newValue","alpha","formatTime","time","date","getDate","getMonth","toTimeString","camelToSentence","str","charAt","toUpperCase","snakeToSentence","setValueByDotNotation","path","slugify","string","a","b","RegExp","join","toLowerCase","getVisibleRange","chartInstance","timeframe","visibleRange","timeScale","scrollPosition","to","from","median","STORED","updateStat","commit","index","prop","statsCounters","mutation","setSeriePreference","id","series","SET_PAIR","console","log","pair","this","pairs","SET_QUOTE_AS_PREFERED_CURRENCY","preferQuoteCurrencySize","SET_MAX_ROWS","maxRows","TOGGLE_SLIPPAGE","values","max","showSlippage","TOGGLE_AGGREGATION","aggregateTrades","TOGGLE_LOGOS","showLogos","TOGGLE_LIQUIDATIONS_ONLY","liquidationsOnly","TOGGLE_COUNTERS","showCounters","TOGGLE_STATS","showStats","TOGGLE_STAT","stat","enabled","Vue","set","SET_STAT_OUTPUT","SET_STAT_NAME","map","SET_STAT_COLOR","color","SET_STAT_PRECISION","parseInt","precision","SET_STAT_PERIOD","milliseconds","period","test","CREATE_STAT","REMOVE_STAT","SET_STATS_PERIOD","statsPeriod","TOGGLE_STATS_CHART","statsChart","TOGGLE_STATS_TIMEFRAME","statsGraphsTimeframe","TOGGLE_STATS_LENGTH","statsGraphsLength","REPLACE_COUNTERS","counters","countersSteps","sort","TOGGLE_COUNTERS_COUNT","countersCount","TOGGLE_THRESHOLDS_TABLE","showThresholdsAsTable","SET_THRESHOLD_AMOUNT","payload","threshold","thresholds","parseFloat","SET_THRESHOLD_GIF","gif","isDeleted","SET_THRESHOLD_COLOR","side","ADD_THRESHOLD","buyColor","sellColor","SET_DECIMAL_PRECISION","DELETE_THREDELETE_THRESHOLD","ENABLE_EXCHANGE","exchange","exchanges","DISABLE_EXCHANGE","SHOW_EXCHANGE","HIDE_EXCHANGE","TOGGLE_EXCHANGE_VISIBILITY","hidden","TOGGLE_SETTINGS_PANEL","TOGGLE_AUDIO","useAudio","TOGGLE_AUDIO_TEN_PERCENT","audioIncludeInsignificants","SET_AUDIO_VOLUME","audioVolume","SET_AUDIO_PITCH","audioPitch","SET_TIMEFRAME","SET_EXCHANGE_THRESHOLD","SET_EXCHANGE_MATCH","match","TOGGLE_CHART","showChart","SET_CHART_HEIGHT","chartHeight","SET_SIDEBAR_WIDTH","sidebarWidth","SET_CHART_REFRESH_RATE","chartRefreshRate","SET_TIMEZONE_OFFSET","timezoneOffset","TOGGLE_SERIE","SET_SERIE_OPTION","SET_SERIE_TYPE","SET_CHART_PRICE_MARGINS","scaleMargins","TOGGLE_EXCHANGES_BAR","showExchangesBar","localStorage","getItem","EXTRA","MASTER_DOMAIN","subdomain","hostname","except","counter","assign","DEFAULTS","namespaced","actions","mutations","showSearch","actives","activeSeries","notices","isLoading","supportedPairs","indexedProducts","proxyUrl","apiUrl","version","buildDate","refreshExchange","active","disabled","showNotice","notice","dispatch","delay","hideTimeout","setTimeout","hideNotice","EXCHANGE_UPDATED","TOGGLE_LOADING","CREATE_NOTICE","REMOVE_NOTICE","clearTimeout","TOGGLE_SEARCH","SET_OPTIMAL_DECIMAL","SET_API_URL","SET_PROXY_URL","SET_API_SUPPORTED_PAIRS","apiSupportedPairs","SET_VERSION","SET_BUILD_DATE","INDEX_PRODUCTS","count","helpers","use","Vuex","saveTimeout","Store","subscribe","type","exchangeName","copy","stringify","setItem","_vm","_h","$createElement","_c","_self","class","loading","attrs","baseCurrency","quoteCurrency","symbol","staticClass","_l","on","$event","showSettings","_e","ref","target","$refs","searchWrapper","$store","scopedSlots","_u","fn","item","_v","_s","staticRenderFns","Exchange","options","connected","valid","shouldBeConnected","reconnectionDelay","_pair","storage","products","Array","isArray","keys","info","indexProducts","reconnection","disconnect","api","warn","Promise","resolve","reject","connectUponCloseResolver","then","connect","reconnectionTimeout","event","emit","trades","number","factor","pow","message","url","arguments","fetchProducts","validatePair","Error","removeItem","endpoints","PRODUCTS","urls","all","action","method","fetch","response","json","catch","err","formatedProducts","formatProducts","matchPairName","filter","EventEmitter","Kraken","TRADES","initialize","validation","WebSocket","getUrl","onmessage","queueTrades","formatLiveTrades","onopen","e","send","subscription","emitOpen","onclose","emitClose","onerror","emitError","readyState","close","trade","altname","Bitmex","quotedInUSD","table","leavesQty","liquidation","Huobi","types","contractTypesAliases","this_week","next_week","quarter","next_quarter","specs","binaryType","sub","pako","inflate","ping","pong","tick","ch","ts","direction","forEach","_data","product","contract_type","contract_code","contract_size","Binance","E","q","BinanceFutures","T","S","symbols","Bitfinex","channel","Bitstamp","clearInterval","keepalive","microtimestamp","Gdax","channels","product_ids","reduce","base_currency","quote_currency","Hitbtc","params","quantity","Okex","tradeStack","dispatchTradesTimeout","op","args","setInterval","String","inflateRaw","instrument_id","qty","underlying_index","contract_val","alias","Poloniex","command","reverse","Deribit","skip","settlement","currency","instrumentName","Bybit","topic","Ftx","market","obj","standardName","QUEUE","REFS","SUMS","vbuy","vsell","lbuy","lsell","cbuy","csell","AGGR","sumsInterval","activeExchanges","emitter","computed","exchangesSettings","chartRange","created","testapi","emitTrade","getExchangeById","$emit","setupSumsInterval","clearSumsInterval","doAggr","doSlip","now","queuedTrade","high","low","min","calculateSlippage","timeout","reconnect","methods","connectExchanges","emitAggr","disconnectExchanges","title","validExchanges","successfullMatches","emitSums","inQueue","slippage","canFetch","getApiUrl","fetchHistoricalData","lastFetchUrl","Axios","onDownloadProgress","loaded","total","progress","_fetchedBytes","format","results","normalisePoints","_fetchedTime","initialTs","refs","open","vol_buy","vol_sell","count_buy","count_sell","liquidation_buy","liquidation_sell","vol","unshift","domProps","props","mounted","_onClick","click","$el","addEventListener","beforeDestroy","removeEventListener","hide","component","directives","rawName","placement","expression","timeframes","isPopupMode","togglePopup","fetchLabel","opener","showTimeframeDropdown","timeframeLabel","_fetchLabel","updateTimeframeLabel","setTimeframe","document","activeElement","blur","href","placeholder","innerText","handleKeydown","items","submit","activeOptionIndex","addItem","_t","default","load","Function","selected","isOpen","availableOptions","focus","query","bindClickOutside","unbindClickOutside","input","which","preventDefault","getSelection","createRange","range","selectNodeContents","collapse","sel","removeAllRanges","addRange","textRange","body","createTextRange","moveToElementText","select","_clickOutsideHandler","checked","closed","_m","stopPropagation","staticStyle","openStat","statsPeriodStringified","countersStepsStringified","replaceCounters","getTimezoneOffset","currentTarget","children","reset","animateFill","interactive","theme","expanded","toggleExchange","exchangeMultiplier","$root","minimumThreshold","refreshProducts","canRefreshProducts","dragging","rendering","picking","style","opacity","position","colors","updateColor","backgroundColor","openPicker","deleteThreshold","selectedIndex","transform","panelOffsetPosition","editing","panelCaretPosition","PALETTE","getColorByWeight","weight","w","w1","w2","rgb","rgbaToRgb","hexToRgb","hex","shorthandRegex","g","exec","getColorLuminance","sqrt","splitRgba","getAppBackgroundColor","getComputedStyle","getElementById","getLogShade","percent","P","selectedElement","onStoreMutation","refreshHandlers","refreshGradients","_startDrag","startDrag","_doDrag","doDrag","_endDrag","endDrag","_doResize","classList","contains","touches","x","pageX","parentNode","refreshCaretPosition","dragStartedAt","offsetLeft","left","width","closePicker","reorderThresholds","minimum","maximum","amounts","offsetTop","bounds","top","thresholdContainer","clientWidth","handler","posPx","panelRange","caretMargin","panelWidth","buysStops","sellsStops","buysGradient","backgroundImage","sellsGradient","selectedThreshold","remove","add","cancelIfOutside","model","$close","components","Thresholds","socket","showPairSubdomainHelp","stringifyCounters","stringifyStatsPeriod","clear","reload","dialog","tradesCount","Sfx","context","AudioContext","webkitAudioContext","queued","tuna","Tuna","PingPongDelay","wetLevel","feedback","delayTimeLeft","delayTimeRight","Delay","delayTime","dryLevel","cutoff","bypass","compressor","Compressor","makeupGain","attack","release","ratio","knee","automakeup","Filter","frequency","Q","gain","filterType","destination","variant","pitch","play","currentTime","oscillator","createOscillator","createGain","onended","volume","setValueAtTime","exponentialRampToValueAtTime","start","stop","f","retrieveStoredGifs","prepareColorsSteps","$on","onTrades","sfx","resumeOnFocus","_timeAgoInterval","elements","txt","textContent","className","$off","SIGNIFICANT_AMOUNT","multiplier","MINIMUM_AMOUNT","liquidationMessage","appendRow","tradeToSong","$forceUpdate","li","classname","GIFS","luminance","LAST_SIDE","appendChild","setAttribute","message_div","innerHTML","amount_div","amount_quote","amount_base","LAST_TRADE_TIMESTAMP","tradesContainer","removeChild","firstChild","refresh","fetchGifByKeyword","keyword","slug","images","original","COLORS","buy","buyFrom","buyTo","fromLuminance","toLuminance","sell","sellFrom","sellTo","clearList","startManualResize","resetWidth","resetHeight","serie","legend","availableSeries","refreshChart","edit","availableTypes","option","label","validate","setScale","bottom","lineWidth","userPreferences","refreshModel","getType","defaultValue","modelIndex","$set","scale","getOptionByKey","setType","getValue","preferedValue","SerieControl","resizing","fetching","seriesLayout","chart","clearChart","renderVisibleChunks","clearQueue","setupQueue","setSerieOption","rebuildSerie","toggleSerie","setPriceMargins","priceFormat","minMove","createChart","chartContainer","getChartDimensions","keepAlive","refreshSeriesLayout","bindChartEvents","bindBrowserResize","unbindChartEvents","unbindBrowserResize","destroy","_keepAliveTimeout","layout","isChartEmpty","rangeToFetch","getRealtimeRange","getOptimalRangeLength","lockRender","onCrosshair","preventRender","renderRealtimeTrades","_doManualResize","doManualResize","_stopManualResize","stopManualResize","pageY","panPrevented","refreshChartDimensions","height","referenceWidth","innerWidth","clientHeight","resize","dimensions","parentElement","doWindowResize","_resizeTimeout","onPan","_onPanTimeout","subscribeCrosshairMove","subscribeVisibleTimeRangeChange","unsubscribeCrosshairMove","unsubscribeVisibleTimeRangeChange","_doWindowResize","redraw","step","duration","topElement","steps","activeSteps","onSums","createCounters","_populateCountersInterval","populateCounters","countersGranularity","sums","CHUNK","clearCounters","COUNTERS","chunks","chunksToDecrease","hasData","downgradeBuy","downgradeSell","getCountersRange","getFirstPoint","stopKeepAlive","editByName","Counter","outputFunction","granularity","statsGranularity","timeouts","live","getModel","stacks","stats","appendStack","addData","shiftStack","stack","substractData","MultiCounter","lineOptions","overlay","priceLineVisible","prepareCounters","removeChart","chartUpdate","createCounterSerie","methodName","stopChartUpdate","_chartUpdateInterval","point","update","timerId","k","setData","_refreshChartDimensionsTimeout","createCounter","onStats","removeCounter","unbind","$delete","refreshCounter","recolorCounter","applyOptions","counterOptions","outputType","fill","renameCounter","getCounter","getCounterFunction","getOutputType","hovering","status","list","listed","updateExchangesPrices","_updateExchangesPricesTimeout","random","avg","Header","Settings","TradeList","Chart","Counters","Notice","Stats","Exchanges","Autocomplete","showStatistics","calculateOptimalPrice","searchLetter","updatePrice","updatePairCurrency","bindSearchOpenByKey","unbindSearchOpenByKey","_updatePriceTimeout","_autocompleteHandler","charStr","BTC","GBP","EUR","USD","JPY","ETH","XRP","LTC","TRX","ADA","IOTA","XMR","NEO","EOS","activesExchangesLength","updateFavicon","faviconDirection","element","createElement","rel","head","bindSearchClickOutside","_clickSearchOutsideHandler","unbindSearchClickOutside","onKeyDown","changed","onFocus","onBlur","onClick","content","watch","selectAll","focused","selection","empty","clickAt","toggle","show","_onMouseDownHandler","onMouseDown","_dblClickTimeout","pendingDblClick","_onMouseMoveHandler","onMouseMove","_onMouseUpHandler","onMouseUp","vueEnv","process","ModalDialogs","VueTippy","maxWidth","arrow","animation","Verte","Dropdown","Editable","Slider","el","render","App","upColor","downColor","borderUpColor","borderDownColor","wickUpColor","wickDownColor","priceLineColor","priceLineWidth","priceLineStyle","lastValueVisible","borderVisible","volume_sell_ema","formatVolume","ema_length","scaleGroup","volume_buy_ema","volume_delta","liquidations","cvd","ctd","lineStyle","price_sma","price_sma2","price_cma","price_cma2","cache","cacheRange","saveChunk","chunk","clearCache","ohlc","bar","totalWeight","setOpen","ema","memory","last","points","sma","average","sum","cma","TOUCH_SUPPORTED","prefixes","mq","matchMedia","matches","DocumentTouch","availableSerieFunctions","serieFunctions","needsMemory","noRedrawOptions","ChartController","chartElement","activeRenderer","activeChunk","renderedRange","queuedTrades","containerElement","chartDimensions","defaultChartOptions","priceScale","TV","addEnabledSeries","removeSerie","getSerie","firstKey","redrawSerie","addSerie","margins","bars","rendered","concat","getSerieDependencies","renderBars","silent","reg","getAvailableSerieFunctions","adapter","buildSerieFunction","dependencies","renderer","eval","seriesData","serieCompare","isSerieReferencedIn","functionString","depencencies","serieA","serieB","serieData","serieOptions","defaultPlotsOptions","serieType","apiMethodName","prepareSerie","bindSerie","removeSeries","unbindSerie","getSeriesDependendingOn","dependentId","getUTCVisibleRange","offset","optimalRange","incomplete","offsetWidth","preventPan","clearSerie","clearData","_releaseQueueInterval","preventImmediateRender","releaseQueue","formatedBars","canRender","computeBar","cloneBar","nextBar","newBar","resetBar","isActive","updateBar","exchangesCount","enabledExchanges","Infinity","lastTimestamp","temporaryRenderer","computedSeries","computedBar","replaceData","setSP","scrollToPosition","reasons","marker","markers","setMarkers","_releasePanTimeout","barSerieData","crosshair","vertLine","visible","labelVisible","horzLine","labelBackgroundColor","textColor","fontFamily","grid","horzLines","vertLines","barSpacing","rightOffset","lockVisibleTimeRangeOnResize","rightBarStaysOnScroll","borderColor","timeVisible","secondsVisible","defaultLineOptions","crosshairMarkerVisible","defaultCandlestickOptions","baseLineStyle","defaultHistogramOptions","line","candlestick","histogram"],"mappings":"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","file":"js/app.ae062b2f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import store from '../store'\n\nexport function parseQueryString() {\n  let QUERY_STRING\n\n  try {\n    QUERY_STRING = JSON.parse(\n      '{\"' +\n        decodeURI(location.search.substring(1))\n          .replace(/\"/g, '\\\\\"')\n          .replace(/&/g, '\",\"')\n          .replace(/=/g, '\":\"') +\n        '\"}'\n    )\n  } catch (error) {\n    QUERY_STRING = {}\n  }\n\n  for (let name in QUERY_STRING) {\n    try {\n      QUERY_STRING[name] = JSON.parse(QUERY_STRING[name])\n    } catch (error) {\n      // empty\n    }\n  }\n\n  return QUERY_STRING\n}\n\nexport function formatAmount(amount, decimals) {\n  const negative = amount < 0\n\n  amount = Math.ceil(Math.abs(amount) * 1000000000) / 1000000000\n\n  if (amount >= 1000000) {\n    amount = +(amount / 1000000).toFixed(isNaN(decimals) ? 1 : decimals) + 'M'\n  } else if (amount >= 100000) {\n    amount = +(amount / 1000).toFixed(isNaN(decimals) ? 0 : decimals) + 'K'\n  } else if (amount >= 1000) {\n    amount = +(amount / 1000).toFixed(isNaN(decimals) ? 1 : decimals) + 'K'\n  } else if (store.state.settings.decimalPrecision) {\n    amount = amount.toFixed(store.state.settings.decimalPrecision)\n  } else {\n    amount = +amount.toFixed(4)\n  }\n\n  if (negative) {\n    return '-' + amount\n  } else {\n    return amount\n  }\n}\n\nexport function countDecimals(value) {\n  if (Math.floor(value) === value) return 0\n  return value.toString().split('.')[1].length || 0\n}\n\nexport function formatPrice(price) {\n  price = +price || 0\n\n  if (store.state.settings.decimalPrecision) {\n    return price.toFixed(store.state.settings.decimalPrecision)\n  } else if (store.state.app.optimalDecimal) {\n    return price.toFixed(store.state.app.optimalDecimal)\n  } else {\n    return price.toFixed(2)\n  }\n}\n\nexport function padNumber(num, size) {\n  var s = '000000000' + num\n  return s.substr(s.length - size)\n}\n\nexport function ago(timestamp) {\n  const seconds = Math.floor((new Date() - timestamp) / 1000)\n  let interval, output\n\n  if ((interval = Math.floor(seconds / 31536000)) > 1) output = interval + 'y'\n  else if ((interval = Math.floor(seconds / 2592000)) >= 1) output = interval + 'm'\n  else if ((interval = Math.floor(seconds / 86400)) >= 1) output = interval + 'd'\n  else if ((interval = Math.floor(seconds / 3600)) >= 1) output = interval + 'h'\n  else if ((interval = Math.floor(seconds / 60)) >= 1) output = interval + 'm'\n  else output = Math.ceil(seconds) + 's'\n\n  return output\n}\n\nexport function getHms(timestamp, round) {\n  if (isNaN(timestamp) || timestamp === null) {\n    return null\n  }\n\n  const isNegPrefix = timestamp < 0 ? '-' : ''\n  timestamp = Math.abs(timestamp)\n\n  const h = Math.floor(timestamp / 1000 / 3600)\n  const m = Math.floor(((timestamp / 1000) % 3600) / 60)\n  const s = Math.floor(((timestamp / 1000) % 3600) % 60)\n\n  let output = ''\n\n  output += (!round || !output.length) && h > 0 ? isNegPrefix + h + 'h' + (!round && m ? ', ' : '') : ''\n  output += (!round || !output.length) && m > 0 ? isNegPrefix + m + 'm' + (!round && s ? ', ' : '') : ''\n  output += (!round || !output.length) && s > 0 ? isNegPrefix + s + 's' : ''\n\n  if (!output.length || (!round && timestamp < 60 * 1000 && timestamp > s * 1000))\n    output += (output.length ? ', ' : '') + isNegPrefix + (timestamp - s * 1000) + 'ms'\n\n  return output.trim()\n}\n\nexport function uniqueName(name, names) {\n  let base = name.substr()\n  let variante = 1\n\n  while (names.indexOf(name) !== -1) {\n    name = base + ++variante\n  }\n\n  return name\n}\n\nexport function movingAverage(accumulator, newValue, alpha) {\n  return alpha * newValue + (1.0 - alpha) * accumulator\n}\n\nexport function formatTime(time) {\n  const date = new Date(time * 1000)\n\n  return date.getDate() + '/' + (date.getMonth() + 1) + ' ' + date.toTimeString().split(' ')[0]\n}\n\nexport function camelToSentence(str) {\n  str = str.replace(/([A-Z])/g, ' $1')\n  return str.charAt(0).toUpperCase() + str.slice(1)\n}\n\nexport function snakeToSentence(str) {\n  str = str.replace(/_/g, ' ')\n  return str.charAt(0).toUpperCase() + str.slice(1)\n}\n\nexport const setValueByDotNotation = (object, path, value) => {\n  if (path.length === 1) object[path[0]] = value\n  else if (path.length === 0) throw 'error'\n  else {\n    if (object[path[0]]) return setValueByDotNotation(object[path[0]], path.slice(1), value)\n    else {\n      object[path[0]] = {}\n      return setValueByDotNotation(object[path[0]], path.slice(1), value)\n    }\n  }\n}\n\nexport const slugify = string => {\n  const a = 'àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;'\n  const b = 'aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------'\n  const p = new RegExp(a.split('').join('|'), 'g')\n\n  return string\n    .toString()\n    .toLowerCase()\n    .replace(/\\s+/g, '-') // Replace spaces with -\n    .replace(p, c => b.charAt(a.indexOf(c))) // Replace special characters\n    .replace(/&/g, '-and-') // Replace & with 'and'\n    .replace(/[^\\w-]+/g, '') // Remove all non-word characters\n    .replace(/--+/g, '-') // Replace multiple - with single -\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, '') // Trim - from end of text\n}\n\nexport const getVisibleRange = (chartInstance, timeframe) => {\n  const visibleRange = chartInstance.timeScale().getVisibleRange()\n\n  if (visibleRange) {\n    const scrollPosition = chartInstance.timeScale().scrollPosition()\n    if (scrollPosition > 0) {\n      visibleRange.to = Math.floor((visibleRange.to + scrollPosition * timeframe) / timeframe) * timeframe\n    }\n\n    return { from: visibleRange.from, to: visibleRange.to, median: visibleRange.from + (visibleRange.to - visibleRange.from) / 2 }\n  }\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=style&index=0&lang=scss&\"","import { parseQueryString } from '../../utils/helpers'\nimport { MASTER_DOMAIN } from '../../utils/constants'\nimport DEFAULTS from './defaults.json'\n\n/**\n *  QUERY STRING PARSER\n *  every options should be settable from querystring using encoded json\n */\n\nconst QUERY_STRING = parseQueryString()\n\n/**\n * ACTUAL STORED SETTINGS\n */\n\nlet STORED\n\ntry {\n  STORED = JSON.parse(localStorage.getItem('settings')) || {}\n} catch (error) {\n  console.log('[store] failed to load settings')\n\n  STORED = {}\n}\n\n/**\n *  EXTRA\n *\n *  1.SUBDOMAIN (only for MASTER_DOMAIN)\n *  automaticaly map subdomain as a *pair* and replace it in options\n *  eg: ethusd.aggr.trade will set the *pair* options to ethusd.\n */\nconst EXTRA = {}\n\nif (MASTER_DOMAIN) {\n  const subdomain = window.location.hostname.match(/^([\\d\\w\\-_]+)\\..*\\./i)\n  const except = ['beta', 'www']\n\n  if (subdomain && subdomain.length >= 2 && except.indexOf(subdomain[1]) === -1) {\n    EXTRA.pair = subdomain[1].replace(/_/g, '+').toUpperCase()\n  }\n}\n\n// 14/04/20 (2.5)\n// timeframe is now stored in seconds\nif (STORED.timeframe > 1000) {\n  STORED.timeframe /= 1000\n}\n// 22/04/20\nif (STORED.statsCounters) {\n  for (let counter of STORED.statsCounters) {\n    counter.output = counter.output\n      .replace(/buyCount/g, 'cbuy')\n      .replace(/sellCount/g, 'csell')\n      .replace(/buyAmount/g, 'vbuy')\n      .replace(/sellAmount/g, 'vsell')\n  }\n}\n\nexport default Object.assign({}, DEFAULTS, EXTRA, STORED, QUERY_STRING)\n","export default {\n  updateStat({ commit, state }, { index, prop, value }) {\n    if (state.statsCounters[index][prop] === value) {\n      return\n    }\n\n    let mutation = ''\n\n    if (typeof value === 'boolean') {\n      mutation += 'TOGGLE_STAT'\n    } else {\n      mutation += 'SET_STAT_' + prop.toUpperCase()\n    }\n\n    commit(mutation, {\n      index,\n      value\n    })\n  },\n  setSeriePreference({ commit, state }, { id, key, value }) {\n    try {\n      value = JSON.parse(value)\n    } catch (error) {\n      // empty\n    }\n\n    if (state.series[id] && state.series[id][key] === value) {\n      return\n    }\n\n    commit('SET_SERIE_OPTION', { id, key, value })\n  }\n}\n","import Vue from 'vue'\n\nimport { uniqueName } from '../../utils/helpers'\n\nexport default {\n  SET_PAIR(state, value) {\n    console.log('SET_PAIR', value.toString().toUpperCase())\n    state.pair = value.toString().toUpperCase()\n\n    this.state.app.pairs = state.pair.split('+')\n  },\n  SET_QUOTE_AS_PREFERED_CURRENCY(state, value) {\n    state.preferQuoteCurrencySize = value ? true : false\n  },\n  SET_MAX_ROWS(state, value) {\n    state.maxRows = value\n  },\n  TOGGLE_SLIPPAGE(state) {\n    const values = [false, 'bps', 'price']\n\n    let index = Math.max(0, values.indexOf(state.showSlippage))\n\n    state.showSlippage = values[(index + 1) % values.length]\n  },\n  TOGGLE_AGGREGATION(state, value) {\n    state.aggregateTrades = value ? true : false\n  },\n  TOGGLE_LOGOS(state, value) {\n    state.showLogos = value ? true : false\n  },\n  TOGGLE_LIQUIDATIONS_ONLY(state, value) {\n    state.liquidationsOnly = value ? true : false\n  },\n  TOGGLE_COUNTERS(state, value) {\n    state.showCounters = value ? true : false\n  },\n  TOGGLE_STATS(state, value) {\n    state.showStats = value ? true : false\n  },\n  TOGGLE_STAT(state, { index, value }) {\n    const stat = state.statsCounters[index]\n\n    stat.enabled = value ? true : false\n\n    Vue.set(state.statsCounters, index, stat)\n  },\n  SET_STAT_OUTPUT(state, { index, value }) {\n    const stat = state.statsCounters[index]\n\n    stat.output = value\n\n    Vue.set(state.statsCounters, index, stat)\n  },\n  SET_STAT_NAME(state, { index, value }) {\n    const stat = state.statsCounters[index]\n    const names = state.statsCounters.map(a => a.name)\n\n    names.splice(index, 1)\n\n    stat.name = uniqueName(value, names)\n\n    Vue.set(state.statsCounters, index, stat)\n  },\n  SET_STAT_COLOR(state, { index, value }) {\n    const stat = state.statsCounters[index]\n\n    stat.color = value\n\n    Vue.set(state.statsCounters, index, stat)\n  },\n  SET_STAT_PRECISION(state, { index, value }) {\n    const stat = state.statsCounters[index]\n\n    value = parseInt(value)\n\n    stat.precision = !isNaN(value) ? value : null\n\n    Vue.set(state.statsCounters, index, stat)\n  },\n  SET_STAT_PERIOD(state, { index, value }) {\n    const stat = state.statsCounters[index]\n    let milliseconds = parseInt(value)\n\n    if (isNaN(milliseconds)) {\n      stat.period = null\n    } else {\n      if (/[\\d.]+s/.test(value)) {\n        milliseconds *= 1000\n      } else if (/[\\d.]+h/.test(value)) {\n        milliseconds *= 1000 * 60 * 60\n      } else {\n        milliseconds *= 1000 * 60\n      }\n\n      stat.period = milliseconds\n    }\n\n    Vue.set(state.statsCounters, index, stat)\n  },\n  CREATE_STAT(state) {\n    state.statsCounters.push({\n      name: uniqueName(\n        'COUNTER',\n        state.statsCounters.map(a => a.name)\n      ),\n      output: 'vbuy + vsell',\n      enabled: false\n    })\n  },\n  REMOVE_STAT(state, index) {\n    state.statsCounters.splice(index, 1)\n  },\n  SET_STATS_PERIOD(state, value) {\n    let milliseconds = parseInt(value) || 0\n\n    if (/[\\d.]+s/.test(value)) {\n      milliseconds *= 1000\n    } else if (/[\\d.]+h/.test(value)) {\n      milliseconds *= 1000 * 60 * 60\n    } else {\n      milliseconds *= 1000 * 60\n    }\n\n    state.statsPeriod = milliseconds\n  },\n  TOGGLE_STATS_CHART(state, value) {\n    state.statsChart = value ? true : false\n  },\n  TOGGLE_STATS_TIMEFRAME(state, value) {\n    state.statsGraphsTimeframe = isNaN(+value) ? 1000 : value\n  },\n  TOGGLE_STATS_LENGTH(state, value) {\n    state.statsGraphsLength = isNaN(+value) ? 50 : value\n  },\n  REPLACE_COUNTERS(state, counters) {\n    state.countersSteps = counters.sort((a, b) => a - b)\n  },\n  TOGGLE_COUNTERS_COUNT(state, value) {\n    state.countersCount = value ? true : false\n  },\n  TOGGLE_THRESHOLDS_TABLE(state, value) {\n    state.showThresholdsAsTable = value ? true : false\n  },\n  SET_THRESHOLD_AMOUNT(state, payload) {\n    const threshold = state.thresholds[payload.index]\n\n    if (threshold) {\n      if (typeof payload.value === 'string' && /m|k$/i.test(payload.value)) {\n        if (/m$/i.test(payload.value)) {\n          threshold.amount = parseFloat(payload.value) * 1000000\n        } else {\n          threshold.amount = parseFloat(payload.value) * 1000\n        }\n      }\n      threshold.amount = +payload.value\n\n      Vue.set(state.thresholds, payload.index, threshold)\n    }\n  },\n  SET_THRESHOLD_GIF(state, payload) {\n    const threshold = state.thresholds[payload.index]\n\n    if (threshold) {\n      if (payload.value.trim().length) {\n        threshold.gif = payload.value\n      } else {\n        payload.value = threshold.gif\n        payload.isDeleted = true\n\n        threshold.gif = null\n      }\n\n      Vue.set(state.thresholds, payload.index, threshold)\n    }\n  },\n  SET_THRESHOLD_COLOR(state, payload) {\n    const threshold = state.thresholds[payload.index]\n\n    if (threshold) {\n      threshold[payload.side] = payload.value\n\n      Vue.set(state.thresholds, payload.index, threshold)\n    }\n  },\n  ADD_THRESHOLD(state) {\n    state.thresholds.push({\n      amount: state.thresholds[state.thresholds.length - 1].amount * 2,\n      buyColor: 'rgb(0, 255, 0)',\n      sellColor: 'rgb(255, 0, 0)'\n    })\n  },\n  SET_DECIMAL_PRECISION(state, value) {\n    state.decimalPrecision = value\n  },\n  DELETE_THREDELETE_THRESHOLD(state, index) {\n    state.thresholds.splice(index, 1)\n  },\n  ENABLE_EXCHANGE(state, exchange) {\n    Vue.set(state.exchanges[exchange], 'disabled', false)\n  },\n  DISABLE_EXCHANGE(state, exchange) {\n    Vue.set(state.exchanges[exchange], 'disabled', true)\n  },\n  SHOW_EXCHANGE(state, exchange) {\n    Vue.set(state.exchanges[exchange], 'hidden', false)\n  },\n  HIDE_EXCHANGE(state, exchange) {\n    Vue.set(state.exchanges[exchange], 'hidden', true)\n  },\n  TOGGLE_EXCHANGE_VISIBILITY(state, exchange) {\n    Vue.set(state.exchanges[exchange], 'hidden', state.exchanges[exchange].hidden === true ? false : true)\n  },\n  TOGGLE_SETTINGS_PANEL(state, value) {\n    const index = state.settings.indexOf(value)\n\n    if (index === -1) {\n      state.settings.push(value)\n    } else {\n      state.settings.splice(index, 1)\n    }\n  },\n  TOGGLE_AUDIO(state, value) {\n    state.useAudio = value ? true : false\n  },\n  TOGGLE_AUDIO_TEN_PERCENT(state, value) {\n    state.audioIncludeInsignificants = value ? true : false\n  },\n  SET_AUDIO_VOLUME(state, value) {\n    state.audioVolume = value\n  },\n  SET_AUDIO_PITCH(state, value) {\n    state.audioPitch = value\n  },\n  SET_TIMEFRAME(state, value) {\n    state.timeframe = value\n  },\n  SET_EXCHANGE_THRESHOLD(state, payload) {\n    Vue.set(state.exchanges[payload.exchange], 'threshold', +payload.threshold)\n  },\n  SET_EXCHANGE_MATCH(state, payload) {\n    Vue.set(state.exchanges[payload.exchange], 'match', payload.match)\n  },\n  TOGGLE_CHART(state, value) {\n    state.showChart = value ? true : false\n  },\n  SET_CHART_HEIGHT(state, value) {\n    state.chartHeight = value || null\n  },\n  SET_SIDEBAR_WIDTH(state, value) {\n    state.sidebarWidth = value || null\n  },\n  SET_CHART_REFRESH_RATE(state, value) {\n    state.chartRefreshRate = +value || 0\n  },\n  SET_TIMEZONE_OFFSET(state, value) {\n    state.timezoneOffset = +value || 0\n  },\n  TOGGLE_SERIE(state, { id, value }) {\n    if (!state.series[id]) {\n      state.series[id] = {}\n    }\n\n    Vue.set(state.series[id], 'enabled', value ? true : false)\n  },\n  SET_SERIE_OPTION(state, { id, key, value }) {\n    if (!state.series[id]) {\n      state.series[id] = {}\n    }\n\n    Vue.set(state.series[id], key, value)\n  },\n  SET_SERIE_TYPE(state, { id, value }) {\n    if (!state.series[id]) {\n      state.series[id] = {}\n    }\n\n    Vue.set(state.series[id], 'type', value)\n  },\n  SET_CHART_PRICE_MARGINS(state, value) {\n    if (!state.series.price) {\n      state.series.price = {}\n    }\n\n    state.series.price = {\n      scaleMargins: value\n    }\n  },\n  TOGGLE_EXCHANGES_BAR(state, value) {\n    state.showExchangesBar = value ? true : false\n  }\n}\n","import actions from './actions'\nimport mutations from './mutations'\nimport state from './state'\n\nexport default {\n  namespaced: true,\n  state,\n  actions,\n  mutations\n}\n","export default {\n  pairs: [],\n  showSearch: false,\n  actives: [],\n  activeSeries: [],\n  notices: [],\n  isLoading: false,\n  supportedPairs: [],\n  indexedProducts: {},\n  proxyUrl: null,\n  apiUrl: null,\n  version: 'DEV',\n  buildDate: 'now'\n}\n","export default {\n  refreshExchange({ commit }, exchange) {\n    const active =\n      !this.state.settings.exchanges[exchange] ||\n      (this.state.settings.exchanges[exchange].match &&\n        !this.state.settings.exchanges[exchange].disabled &&\n        !this.state.settings.exchanges[exchange].hidden)\n\n    commit('EXCHANGE_UPDATED', {\n      exchange,\n      active\n    })\n  },\n  showNotice({ commit, dispatch }, notice) {\n    dispatch('hideNotice', notice.id)\n\n    if (notice.delay !== false) {\n      notice.hideTimeout = setTimeout(() => {\n        dispatch('hideNotice', notice.id)\n      }, notice.delay || 2000)\n    }\n\n    commit('CREATE_NOTICE', notice)\n  },\n  hideNotice({ commit }, id) {\n    for (let i = 0; i < this.state.app.notices.length; i++) {\n      if (this.state.app.notices[i].id === id) {\n        commit('REMOVE_NOTICE', this.state.app.notices[i])\n      }\n    }\n  }\n}\n","import Vue from 'vue'\n\nexport default {\n  SET_EXCHANGE_MATCH(state, payload) {\n    Vue.set(state.exchanges[payload.exchange], 'match', payload.match)\n  },\n  EXCHANGE_UPDATED(state, { exchange, active }) {\n    if (!this.state.settings.exchanges[exchange]) {\n      Vue.set(this.state.settings.exchanges, exchange, {})\n    }\n\n    const index = state.actives.indexOf(exchange)\n\n    if (active && index === -1) {\n      state.actives.push(exchange)\n    } else if (!active && index !== -1) {\n      state.actives.splice(index, 1)\n    }\n  },\n  TOGGLE_LOADING(state, value) {\n    state.isLoading = value ? true : false\n  },\n  CREATE_NOTICE(state, notice) {\n    state.notices.push(notice)\n  },\n  REMOVE_NOTICE(state, notice) {\n    const index = state.notices.indexOf(notice)\n\n    if (index !== -1) {\n      if (notice.hideTimeout) {\n        clearTimeout(notice.hideTimeout)\n      }\n\n      state.notices.splice(index, 1)\n    }\n  },\n  TOGGLE_SEARCH(state, value) {\n    state.showSearch = value ? true : false\n  },\n  SET_OPTIMAL_DECIMAL(state, value) {\n    state.optimalDecimal = value\n  },\n  SET_API_URL(state, value) {\n    state.apiUrl = value\n  },\n  SET_PROXY_URL(state, value) {\n    state.proxyUrl = value\n  },\n  SET_API_SUPPORTED_PAIRS(state, value) {\n    if (!value) {\n      state.apiSupportedPairs = []\n    } else if (typeof value === 'string') {\n      state.apiSupportedPairs = value.split(',').map(a => a.trim())\n    } else {\n      state.apiSupportedPairs = value\n    }\n  },\n  SET_VERSION(state, value) {\n    state.version = value\n  },\n  SET_BUILD_DATE(state, value) {\n    state.buildDate = value\n  },\n  INDEX_PRODUCTS(state, { pairs, exchange }) {\n    for (let pair of pairs) {\n      if (state.indexedProducts[pair]) {\n        state.indexedProducts[pair].count++\n\n        if (state.indexedProducts[pair].exchanges.indexOf(exchange) === -1) {\n          state.indexedProducts[pair].exchanges.push(exchange)\n        }\n      } else {\n        state.indexedProducts[pair] = {\n          value: pair,\n          count: 1,\n          exchanges: [exchange]\n        }\n      }\n    }\n  }\n}\n","import state from './state'\nimport actions from './actions'\nimport mutations from './mutations'\n\nexport default {\n  namespaced: true,\n  state,\n  actions,\n  mutations\n}\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport * as helpers from '../utils/helpers'\n\nconsole.log(helpers)\n\nimport settings from './settings'\nimport app from './app'\n\nVue.use(Vuex)\n\nconst store = new Vuex.Store({\n  modules: {\n    app,\n    settings\n  }\n})\n\nif (store.state.settings.pair && store.state.settings.pair.length) {\n  store.state.app.pairs = store.state.settings.pair.split('+')\n}\n\nlet saveTimeout\n\nstore.subscribe((mutation, state) => {\n  if (/^settings/.test(mutation.type)) {\n    clearTimeout(saveTimeout)\n\n    saveTimeout = setTimeout(() => {\n      console.log(mutation, 'save..')\n      const copy = JSON.parse(JSON.stringify(state.settings))\n      localStorage.setItem('settings', JSON.stringify(copy))\n\n      let exchangeName\n\n      switch (mutation.type) {\n        case 'settings/SHOW_EXCHANGE':\n        case 'settings/HIDE_EXCHANGE':\n        case 'settings/TOGGLE_EXCHANGE_VISIBILITY':\n        case 'settings/ENABLE_EXCHANGE':\n        case 'settings/DISABLE_EXCHANGE':\n        case 'settings/SET_EXCHANGE_MATCH':\n          if (typeof mutation.payload.exchange === 'string') {\n            exchangeName = mutation.payload.exchange\n          } else {\n            exchangeName = mutation.payload\n          }\n\n          store.dispatch('app/refreshExchange', exchangeName)\n          break\n      }\n    }, 200)\n  }\n})\n\nexport default store\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SerieControl.vue?vue&type=style&index=0&lang=scss&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQ5JREFUeNrslz0KwjAUgJNCF3EoiIuniIu7eJF6BE9kLyLuLvYULiJ0EJdC8QWe4NA0eT91sQ9CWkj7ffnhJTHm38MKvs2hLPD5AaX9pcAHnuF7x5WwCnAjkbBKcLYERSBDeB5p16JEpymQCidL2BHgJAk7EjxZIiZQQJkJc80LSsMR0IBHJYYEVspZ90YVWArmvm8t3M0UU1AW4XO3uULllDj1/HRZhzJdKJxiR91Qqg1FpShQsVIxTMMRqlIKh+Hfc0bAx8HPn2Tu8R/87RhGwe8JZ8aa8PAt9L4RH0gYEklw0pGMIJEMJx9KQcKhRBFo0iC8FicihgQZzr6Y9Eiw4KKr2ZeE4cKn8PEWYACxq1U+/EnHbQAAAABJRU5ErkJggg==\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{\n    loading: _vm.isLoading\n  },attrs:{\"id\":\"app\",\"data-prefer\":_vm.preferQuoteCurrencySize ? 'quote' : 'base',\"data-base\":_vm.baseCurrency,\"data-quote\":_vm.quoteCurrency,\"data-symbol\":_vm.symbol,\"data-pair\":_vm.pair}},[_c('div',{staticClass:\"notices\"},_vm._l((_vm.notices),function(notice,index){return _c('Notice',{key:index,attrs:{\"notice\":notice}})}),1),(_vm.showSettings)?_c('Settings',{on:{\"close\":function($event){_vm.showSettings = false}}}):_vm._e(),_c('div',{staticClass:\"app__wrapper\"},[(_vm.showSearch)?_c('div',{ref:\"searchWrapper\",staticClass:\"app__search\",on:{\"click\":function($event){$event.target === _vm.$refs.searchWrapper && _vm.$store.commit('app/TOGGLE_SEARCH', false)}}},[_c('Autocomplete',{attrs:{\"load\":_vm.search,\"selected\":_vm.pairs},on:{\"submit\":function($event){_vm.$store.commit('settings/SET_PAIR', $event.join('+')), _vm.$store.commit('app/TOGGLE_SEARCH', false)}},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n  var item = ref.item;\nreturn [_c('span',[_vm._v(_vm._s(item.value)+\" \"),_c('div',{staticClass:\"badge\"},[_vm._v(_vm._s(item.exchanges.join(', ')))])])]}}],null,false,1471341488)})],1):_vm._e(),_c('Header',{attrs:{\"price\":_vm.price},on:{\"toggleSettings\":function($event){_vm.showSettings = !_vm.showSettings}}}),_c('div',{staticClass:\"app__layout\"},[_c('div',{staticClass:\"app__left\"},[(_vm.showChart)?_c('Chart'):_vm._e(),(_vm.showChart && _vm.showExchangesBar)?_c('Exchanges'):_vm._e()],1),_c('div',{staticClass:\"app__right\"},[(_vm.showCounters)?_c('Counters'):_vm._e(),(_vm.showStats)?_c('Stats'):_vm._e(),_c('TradeList')],1)])],1),_c('dialogs-wrapper')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import EventEmitter from 'eventemitter3'\n\nimport store from '../store'\n\nclass Exchange extends EventEmitter {\n  constructor(options) {\n    super()\n\n    this.indexedProducts = []\n    this.connected = false\n    this.valid = false\n    this.price = null\n    this.error = null\n    this.shouldBeConnected = false\n    this.reconnectionDelay = 1000\n\n    this._pair = []\n\n    this.options = Object.assign(\n      {\n        // default exchanges options\n      },\n      options || {}\n    )\n  }\n\n  set pair(name) {\n    if (!this.products || !name) {\n      this._pair = []\n      return\n    }\n\n    this._pair = name\n      .split('+')\n      .map(a => {\n        if (this.matchPairName && typeof this.matchPairName === 'function') {\n          return this.matchPairName(a)\n        } else if (Array.isArray(this.products) && this.products.indexOf(a) !== -1) {\n          return a\n        } else if (typeof this.products === 'object') {\n          return this.products[a] || null\n        } else {\n          return null\n        }\n      })\n      .filter(a => !!a)\n  }\n\n  get pair() {\n    return this._pair[0]\n  }\n\n  get pairs() {\n    return this._pair\n  }\n\n  initialize() {\n    try {\n      const storage = JSON.parse(localStorage.getItem(this.id))\n\n      if (storage && +new Date() - storage.timestamp < 1000 * 60 * 60 * 24 * 7 && (this.id !== 'okex' || storage.timestamp > 1560235687982)) {\n        if (storage.data && typeof storage.data === 'object' && Object.prototype.hasOwnProperty.call(storage.data, 'products')) {\n          for (let key in storage.data) {\n            this[key] = storage.data[key]\n          }\n        } else {\n          this.products = storage.data\n        }\n\n        if (\n          !this.products ||\n          (Array.isArray(this.products) && !this.products.length) ||\n          (typeof this.products === 'object' && !Object.keys(this.products).length)\n        ) {\n          this.products = null\n        }\n      } else {\n        console.info(`[${this.id}] products data expired`)\n      }\n    } catch (error) {\n      console.error(`[${this.id}] unable to retrieve stored products`, error)\n    }\n\n    this.indexProducts()\n  }\n\n  connect(reconnection = false) {\n    if (this.connected) {\n      this.disconnect()\n    }\n\n    if (this.valid) {\n      if (this.api) {\n        console.warn('previous connection not fully closed')\n        return new Promise((resolve, reject) => {\n          this.connectUponCloseResolver = { resolve, reject }\n        }).then(this.connect.bind(this))\n      }\n\n      if (this.connectUponCloseResolver) {\n        this.connectUponCloseResolver.reject()\n        delete this.connectUponCloseResolver\n      }\n\n      this.shouldBeConnected = true\n\n      console.log(`[${this.id}] ${reconnection ? 're' : ''}connecting... (${this.pairs.join(', ')})`)\n\n      return true\n    }\n  }\n\n  disconnect() {\n    clearTimeout(this.reconnectionTimeout)\n\n    this.shouldBeConnected = false\n    this.price = null\n    this.error = null\n\n    return true\n  }\n\n  reconnect() {\n    clearTimeout(this.reconnectionTimeout)\n\n    if (this.connected) {\n      return\n    }\n\n    console.log(`[${this.id}] schedule reconnection (${this.reconnectionDelay} ms)`)\n\n    this.reconnectionTimeout = setTimeout(() => {\n      if (!this.connected) {\n        this.connect(true)\n      }\n    }, this.reconnectionDelay)\n\n    this.reconnectionDelay *= 2\n  }\n\n  emitOpen(event) {\n    this.connected = true\n    this.error = false\n\n    this.reconnectionDelay = 1000\n\n    this.emit('open', event)\n  }\n\n  queueTrades(trades) {\n    if (!trades || !trades.length) {\n      return\n    }\n\n    this.price = trades[trades.length - 1].price\n\n    this.emit('trades', trades)\n  }\n\n  toFixed(number, precision) {\n    var factor = Math.pow(10, precision)\n    return Math.ceil(number * factor) / factor\n  }\n\n  emitError(error) {\n    this.error = error.message || 'Unknown error'\n\n    this.emit('error')\n  }\n\n  emitClose(event) {\n    this.connected = false\n\n    if (this.api) {\n      delete this.api\n    }\n\n    if (this.connectUponCloseResolver) {\n      this.connectUponCloseResolver.resolve()\n      delete this.connectUponCloseResolver\n    }\n\n    this.emit('close', event)\n  }\n\n  getUrl() {\n    return typeof this.options.url === 'function' ? this.options.url.apply(this, arguments) : this.options.url\n  }\n\n  formatLiveTrades(data) {\n    return data\n  }\n\n  /* formatRecentsTrades(data) {\n    return data;\n  } */\n\n  formatProducts(data) {\n    return data\n  }\n\n  validatePair(pair) {\n    this.valid = false\n\n    if (typeof this.products === 'undefined') {\n      return this.fetchProducts().then(() => this.validatePair(pair))\n    }\n\n    if (!pair || (pair && (!(this.pair = pair) || !this.pairs.length))) {\n      console.log(`[${this.id}] unknown pair ${pair}`)\n\n      this.emit('error', new Error(`Unknown pair ${pair}`))\n\n      this.emit('match', null)\n\n      return Promise.resolve()\n    }\n\n    this.valid = true\n\n    this.emit('match', this.pair)\n\n    return Promise.resolve()\n  }\n\n  refreshProducts() {\n    localStorage.removeItem(this.id)\n    this.products = null\n\n    return this.fetchProducts()\n  }\n\n  indexProducts() {\n    this.indexedProducts = []\n\n    if (!this.products) {\n      return\n    }\n\n    if (Array.isArray(this.products)) {\n      this.indexedProducts = this.products.slice(0, this.products.length)\n    } else if (typeof this.products === 'object') {\n      this.indexedProducts = Object.keys(this.products)\n    }\n\n    store.commit('app/INDEX_PRODUCTS', {\n      pairs: this.indexedProducts,\n      exchange: this.id\n    })\n  }\n\n  fetchProducts() {\n    if (!this.endpoints || !this.endpoints.PRODUCTS) {\n      this.products = []\n\n      return Promise.resolve()\n    }\n\n    let urls = typeof this.endpoints.PRODUCTS === 'function' ? this.endpoints.PRODUCTS(this.pair) : this.endpoints.PRODUCTS\n\n    if (!Array.isArray(urls)) {\n      urls = [urls]\n    }\n\n    console.log(`[${this.id}] fetching products...`, urls)\n\n    return new Promise(resolve => {\n      return Promise.all(\n        urls.map(action => {\n          action = action.split('|')\n\n          let method = action.length > 1 ? action.shift() : 'GET'\n          let url = action[0]\n\n          return new Promise(resolve => {\n            setTimeout(() => {\n              resolve(\n                fetch(`${store.state.app.proxyUrl ? store.state.app.proxyUrl : ''}${url}`, {\n                  method: method\n                })\n                  .then(response => response.json())\n                  .catch(err => {\n                    console.log(err)\n\n                    return null\n                  })\n              )\n            }, 500)\n          })\n        })\n      ).then(data => {\n        console.log(`[${this.id}] received API products response => format products`)\n\n        if (data.indexOf(null) !== -1) {\n          data = null\n        } else if (data.length === 1) {\n          data = data[0]\n        }\n\n        if (data) {\n          const formatedProducts = this.formatProducts(data) || []\n\n          if (typeof formatedProducts === 'object' && Object.prototype.hasOwnProperty.call(formatedProducts, 'products')) {\n            for (let key in formatedProducts) {\n              this[key] = formatedProducts[key]\n            }\n          } else {\n            this.products = formatedProducts\n          }\n\n          console.log(`[${this.id}] storing products`, this.products)\n\n          localStorage.setItem(\n            this.id,\n            JSON.stringify({\n              timestamp: +new Date(),\n              data: formatedProducts\n            })\n          )\n        } else {\n          this.products = null\n        }\n\n        this.indexProducts()\n\n        resolve(this.products)\n      })\n    })\n  }\n}\n\nexport default Exchange\n","import Exchange from '../services/exchange'\n\nclass Kraken extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'kraken'\n\n    this.endpoints = {\n      PRODUCTS: 'https://api.kraken.com/0/public/AssetPairs',\n      TRADES: () => `https://api.kraken.com/0/public/Trades?pair=${this.pair}`\n    }\n\n    this.options = Object.assign(\n      {\n        url: () => {\n          return `wss://ws.kraken.com`\n        }\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n\n      this.api.onopen = e => {\n        this.api.send(\n          JSON.stringify({\n            event: 'subscribe',\n            pair: [this.pair],\n            subscription: {\n              name: 'trade'\n            }\n          })\n        )\n\n        this.emitOpen(e)\n\n        resolve()\n      }\n\n      this.api.onclose = this.emitClose.bind(this)\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(json) {\n    if (json && json[1] && json[1].length) {\n      return json[1].map(trade => ({\n        exchange: this.id,\n        timestamp: trade[2] * 1000,\n        price: +trade[0],\n        size: +trade[1],\n        side: trade[3] === 'b' ? 'buy' : 'sell'\n      }))\n    }\n\n    return false\n  }\n\n  /* formatRecentsTrades(response) {\n    if (response && response.length) {\n      return response.reverse().map(trade => [\n        this.id,\n        +new Date(trade.timestamp),\n        trade.price,\n        trade.size / trade.price,\n        trade.side === 'Buy' ? 1 : 0\n      ])\n    }\n  } */\n\n  matchPairName(name) {\n    name = name.trim().replace('/', '')\n\n    if (this.products.indexOf(name) !== -1 || ((name = name.replace('BTC', 'XBT')) && this.products.indexOf(name) !== -1)) {\n      if (name.indexOf('/') === -1) {\n        name = name.slice(0, name.length - 3) + '/' + name.slice(name.length - 3, name.length)\n      }\n\n      return name\n    }\n\n    return false\n  }\n\n  formatProducts(data) {\n    return Object.keys(data.result).map(id => data.result[id].altname)\n  }\n}\n\nexport default Kraken\n","import Exchange from '../services/exchange'\n\nclass Bitmex extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'bitmex'\n\n    this.endpoints = {\n      PRODUCTS: 'https://www.bitmex.com/api/v1/instrument/active',\n      TRADES: () => `https://www.bitmex.com/api/v1/trade?symbol=${this.pair}&reverse=true&count=500`\n    }\n\n    this.options = Object.assign(\n      {\n        url: () => {\n          return `wss://www.bitmex.com/realtime?subscribe=${this.pairs.map(pair => `trade:${pair}`)},${this.pairs.map(pair => `liquidation:${pair}`)}`\n        }\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.quotedInUSD = /USD$/.test(this.pair) || /^XBT/.test(this.pair)\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n      this.api.onopen = e => {\n        this.emitOpen(e)\n\n        resolve()\n      }\n      this.api.onclose = this.emitClose.bind(this)\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  /*queueTrades(trades) {\n    if (!trades.length) {\n      return\n    }\n\n    return this.emit('trades', trades)\n  }*/\n\n  formatLiveTrades(json) {\n    if (json && json.data && json.data.length) {\n      if (json.table === 'liquidation' && json.action === 'insert') {\n        return json.data.map(trade => ({\n          exchange: this.id,\n          timestamp: +new Date(),\n          price: trade.price,\n          size: trade.leavesQty / (this.quotedInUSD ? trade.price : 1),\n          side: trade.side === 'Buy' ? 'buy' : 'sell',\n          liquidation: true\n        }))\n      } else if (json.table === 'trade' && json.action === 'insert') {\n        return json.data.map(trade => ({\n          exchange: this.id,\n          timestamp: +new Date(trade.timestamp),\n          price: trade.price,\n          size: trade.size / (this.quotedInUSD ? trade.price : 1),\n          side: trade.side === 'Buy' ? 'buy' : 'sell'\n        }))\n      }\n    }\n\n    return false\n  }\n\n  /* formatRecentsTrades(response) {\n        if (response && response.length) {\n            return response.reverse().map(trade => [\n                this.id,\n                +new Date(trade.timestamp),\n                trade.price,\n                trade.size / trade.price,\n                trade.side === 'Buy' ? 1 : 0\n            ])\n        }\n    } */\n\n  formatProducts(data) {\n    return data.map(a => a.symbol)\n  }\n\n  matchPairName(name) {\n    if (this.products.indexOf(name) !== -1) {\n      return name\n    } else if ((name = name.replace('BTC', 'XBT')) && this.products.indexOf(name) !== -1) {\n      return name\n    }\n\n    return false\n  }\n}\n\nexport default Bitmex\n","import Exchange from '../services/exchange'\nimport pako from 'pako'\n\nclass Huobi extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'huobi'\n    this.types = []\n    this.contractTypesAliases = {\n      this_week: 'CW',\n      next_week: 'NW',\n      quarter: 'CQ',\n      next_quarter: 'NQ'\n    }\n\n    this.endpoints = {\n      PRODUCTS: [\n        'https://api.huobi.pro/v1/common/symbols',\n        'https://api.hbdm.com/api/v1/contract_contract_info',\n        'https://api.hbdm.com/swap-api/v1/swap_contract_info'\n      ]\n    }\n\n    // 2019-12-13\n    // retro compatibility for client without contract specification stored\n    // -> force refresh of stored instruments / specs\n    if (this.products && typeof this.specs === 'undefined') {\n      delete this.products\n    }\n\n    this.matchPairName = pair => {\n      let id = this.products[pair] || this.products[pair.replace(/USD$/, 'USDT')]\n\n      if (!id) {\n        for (let name in this.products) {\n          if (pair === this.products[name]) {\n            id = this.products[name]\n            break\n          }\n        }\n      }\n\n      if (id) {\n        if (id.indexOf('-') !== -1) {\n          this.types[id] = 'swap'\n        } else if (id.indexOf('_') !== -1) {\n          this.types[id] = 'futures'\n        } else {\n          this.types[id] = 'spot'\n        }\n      }\n\n      return id || false\n    }\n\n    this.options = Object.assign(\n      {\n        url: pair => {\n          if (this.types[pair] === 'futures') {\n            return 'wss://www.hbdm.com/ws'\n          } else if (this.types[pair] === 'swap') {\n            return 'wss://api.hbdm.com/swap-ws'\n          } else {\n            return 'wss://api.huobi.pro/ws'\n          }\n        }\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl(this.pair))\n\n      this.api.binaryType = 'arraybuffer'\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(event.data))\n\n      this.api.onopen = e => {\n        for (let pair of this.pairs) {\n          this.api.send(\n            JSON.stringify({\n              sub: 'market.' + (this.types[pair] === 'futures' ? pair.toUpperCase() : pair.toLowerCase()) + '.trade.detail',\n              id: pair\n            })\n          )\n        }\n\n        this.emitOpen(e)\n\n        resolve()\n      }\n\n      this.api.onclose = this.emitClose.bind(this)\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(event) {\n    const json = JSON.parse(pako.inflate(event, { to: 'string' }))\n\n    if (!json) {\n      return\n    }\n\n    if (json.ping) {\n      this.api.send(JSON.stringify({ pong: json.ping }))\n      return\n    } else if (json.tick && json.tick.data && json.tick.data.length) {\n      const pair = json.ch.replace(/market.(.*).trade.detail/, '$1')\n\n      return json.tick.data.map(trade => {\n        let amount = +trade.amount\n\n        if (typeof this.specs[pair] !== 'undefined') {\n          amount = (amount * this.specs[pair]) / trade.price\n        }\n\n        return {\n          exchange: this.id,\n          timestamp: trade.ts,\n          price: +trade.price,\n          size: amount,\n          side: trade.direction\n        }\n      })\n    }\n  }\n\n  formatProducts(response) {\n    const products = {}\n    const specs = {}\n\n    const types = ['spot', 'futures', 'swap']\n\n    response.forEach((_data, index) => {\n      _data.data.forEach(product => {\n        let pair\n\n        switch (types[index]) {\n          case 'spot':\n            pair = (product['base-currency'] + product['quote-currency']).toUpperCase()\n            products[pair] = pair\n            break\n          case 'futures':\n            pair = product.symbol + '_' + this.contractTypesAliases[product.contract_type]\n            products[product.symbol + 'USD' + '-' + product.contract_type.toUpperCase()] = pair\n            products[product.contract_code] = pair\n            specs[pair] = +product.contract_size\n            break\n          case 'swap':\n            products[product.symbol + 'USD' + '-PERPETUAL'] = product.contract_code\n            types[product.contract_code] = 'swap'\n            specs[product.contract_code] = +product.contract_size\n            break\n        }\n      })\n    })\n\n    return {\n      products,\n      specs\n    }\n  }\n}\n\nexport default Huobi\n","import Exchange from '../services/exchange'\n\nclass Binance extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'binance'\n\n    this.endpoints = {\n      PRODUCTS: 'https://api.binance.com/api/v1/ticker/allPrices',\n      TRADES: () => `https://api.binance.com/api/v1/trades?symbol=${this.pair.toUpperCase()}`\n    }\n\n    this.matchPairName = pair => {\n      pair = pair.replace(/USD$/, 'USDT')\n\n      if (this.products.indexOf(pair) !== -1) {\n        return pair.toLowerCase()\n      }\n\n      return false\n    }\n\n    this.options = Object.assign(\n      {\n        url: () => {\n          return 'wss://stream.binance.com:9443/ws/' + this.pair + '@aggTrade'\n        }\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n      this.api.onopen = e => {\n        this.emitOpen(e)\n\n        resolve()\n      }\n      this.api.onclose = this.emitClose.bind(this)\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(trade) {\n    if (trade) {\n      return [\n        {\n          exchange: this.id,\n          timestamp: trade.E,\n          price: +trade.p,\n          size: +trade.q,\n          side: trade.m ? 'sell' : 'buy'\n        }\n      ]\n    }\n\n    return false\n  }\n\n  /* formatRecentsTrades(data) {\n    return data.map(trade => [\n      this.id,\n      trade.time,\n      trade.price,\n      trade.qty,\n      !trade.isBuyerMaker ? 1 : 0\n    ])\n  } */\n\n  formatProducts(data) {\n    return data.map(a => a.symbol)\n  }\n}\n\nexport default Binance\n","import Exchange from '../services/exchange'\n\nclass BinanceFutures extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'binance_futures'\n\n    this.endpoints = {\n      PRODUCTS: 'https://fapi.binance.com/fapi/v1/exchangeInfo'\n    }\n\n    this.matchPairName = pair => {\n      if (this.products.indexOf(pair) !== -1) {\n        return pair.toLowerCase()\n      }\n\n      pair = pair.replace(/USD$/, 'USDT')\n\n      if (this.products.indexOf(pair) !== -1) {\n        return pair.toLowerCase()\n      }\n\n      return false\n    }\n\n    this.options = Object.assign(\n      {\n        url: () => {\n          return `wss://fstream.binance.com/stream?streams=${this.pairs.map(pair => `${pair}@aggTrade/${pair}@forceOrder`).join('/')}`\n        }\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n      this.api.onopen = e => {\n        this.emitOpen(e)\n\n        resolve()\n      }\n      this.api.onclose = this.emitClose.bind(this)\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(json) {\n    if (json && json.data) {\n      if (json.data.e === 'aggTrade') {\n        return [\n          {\n            exchange: this.id,\n            timestamp: json.data.T,\n            price: +json.data.p,\n            size: +json.data.q,\n            side: json.data.m ? 'sell' : 'buy'\n          }\n        ]\n      } else if (json.data.e === 'forceOrder') {\n        return [\n          {\n            exchange: this.id,\n            timestamp: json.data.o.T,\n            price: +json.data.o.p,\n            size: +json.data.o.q,\n            side: json.data.o.S === 'BUY' ? 'buy' : 'sell',\n            liquidation: true\n          }\n        ]\n      }\n    }\n\n    return false\n  }\n\n  formatProducts(data) {\n    return data.symbols.map(a => a.symbol)\n  }\n}\n\nexport default BinanceFutures\n","import Exchange from '../services/exchange'\n\nclass Bitfinex extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'bitfinex'\n\n    this.endpoints = {\n      PRODUCTS: 'https://api.bitfinex.com/v1/symbols',\n      TRADES: () => `https://api.bitfinex.com/v2/trades/t${this.pair}/hist?limit=1000`\n    }\n\n    this.matchPairName = pair => {\n      if (this.products.indexOf(pair) !== -1) {\n        return pair\n      }\n\n      return false\n    }\n\n    this.options = Object.assign(\n      {\n        url: 'wss://api.bitfinex.com/ws/2'\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n      this.api.onopen = e => {\n        this.api.send(\n          JSON.stringify({\n            event: 'subscribe',\n            channel: 'trades',\n            symbol: 't' + this.pair\n          })\n        )\n\n        this.emitOpen(e)\n\n        resolve()\n      }\n      this.api.onclose = this.emitClose.bind(this)\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(json) {\n    if (!json || json[1] !== 'te') {\n      return\n    }\n\n    return [\n      {\n        exchange: this.id,\n        timestamp: +new Date(json[2][1]),\n        price: +json[2][3],\n        size: Math.abs(json[2][2]),\n        side: json[2][2] < 0 ? 'sell' : 'buy'\n      }\n    ]\n  }\n\n  /* formatRecentsTrades(response) {\n        if (!response || !response.length) {\n            return;\n        }\n\n        return response.map(trade => [\n            this.id,\n            trade[1],\n            trade[3],\n            Math.abs(trade[2]),\n            trade[2] > 0 ? 1 : 0,\n        ]);\n    } */\n\n  formatProducts(data) {\n    return data.map(a => a.toUpperCase())\n  }\n}\n\nexport default Bitfinex\n","import Exchange from '../services/exchange'\n\nclass Bitstamp extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'bitstamp'\n\n    this.endpoints = {\n      PRODUCTS: 'https://www.bitstamp.net/api/v2/trading-pairs-info/',\n      TRADES: () => `https://www.bitstamp.net/api/v2/transactions/${this.pair}`\n    }\n\n    this.matchPairName = pair => {\n      if (this.products.indexOf(pair) !== -1) {\n        return pair.toLowerCase()\n      }\n\n      return false\n    }\n\n    this.options = Object.assign(\n      {\n        url: () => {\n          return `wss://ws.bitstamp.net`\n        }\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n\n      this.api.onopen = e => {\n        for (let pair of this.pairs) {\n          this.api.send(\n            JSON.stringify({\n              event: 'bts:subscribe',\n              data: {\n                channel: 'live_trades_' + pair\n              }\n            })\n          )\n        }\n\n        this.emitOpen(e)\n\n        resolve()\n      }\n\n      this.api.onclose = event => {\n        this.emitClose(event)\n\n        clearInterval(this.keepalive)\n      }\n\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(event) {\n    const trade = event.data\n\n    if (!trade || !trade.amount) {\n      return\n    }\n\n    return [\n      {\n        exchange: this.id,\n        timestamp: +new Date(trade.microtimestamp / 1000),\n        price: trade.price,\n        size: trade.amount,\n        side: trade.type === 0 ? 'buy' : 'sell'\n      }\n    ]\n  }\n\n  /* formatRecentsTrades(response) {\n    if (response && response.length) {\n      return response.map(trade => [\n        this.id,\n        trade.date * 1000,\n        +trade.price,\n        +trade.amount,\n        trade.type === '1' ? 1 : 0\n      ]);\n    }\n  } */\n\n  formatProducts(data) {\n    return data.map(a => a.name.replace('/', ''))\n  }\n}\n\nexport default Bitstamp\n","import Exchange from '../services/exchange'\n\nclass Gdax extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'gdax'\n\n    this.endpoints = {\n      PRODUCTS: 'https://api.pro.coinbase.com/products',\n      TRADES: () => `https://api.pro.coinbase.com/products/${this.pair}/trades`\n    }\n\n    this.matchPairName = pair => {\n      if (Array.isArray(this.products)) {\n        // todo: remove starting dec 12th\n        if (this.products.indexOf(pair) !== -1) {\n          return pair.substr(0, 3) + '-' + pair.substr(3, pair.length)\n        }\n      } else if (this.products && typeof this.products === 'object' && this.products[pair]) {\n        return this.products[pair]\n      }\n\n      return false\n    }\n\n    this.options = Object.assign(\n      {\n        url: 'wss://ws-feed.pro.coinbase.com'\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n\n      this.api.onopen = e => {\n        this.api.send(\n          JSON.stringify({\n            type: 'subscribe',\n            channels: [{ name: 'matches', product_ids: [this.pair] }]\n          })\n        )\n\n        this.emitOpen(e)\n\n        resolve()\n      }\n\n      this.api.onclose = this.emitClose.bind(this)\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(json) {\n    if (json && json.size > 0) {\n      this.queueTrades([\n        {\n          exchange: this.id,\n          timestamp: +new Date(json.time),\n          price: +json.price,\n          size: +json.size,\n          side: json.side === 'buy' ? 'sell' : 'buy'\n        }\n      ])\n    }\n  }\n\n  formatProducts(data) {\n    return data.reduce((products, product) => {\n      products[product.base_currency + product.quote_currency] = product.id\n      return products\n    }, {})\n  }\n\n  /* formatRecentsTrades(response) {\n        if (response && response.length) {\n            return response.map(trade => [\n                this.id,\n                +new Date(trade.time),\n                +trade.price,\n                +trade.size,\n                trade.side === 'buy' ? 0 : 1,\n            ])\n        }\n    } */\n}\n\nexport default Gdax\n","import Exchange from '../services/exchange'\n\nclass Hitbtc extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'hitbtc'\n\n    this.endpoints = {\n      PRODUCTS: 'https://api.hitbtc.com/api/2/public/symbol',\n      TRADES: () => `https://api.hitbtc.com/api/2/public/trades/${this.pair}?sort=DESC&limit=500`\n    }\n\n    this.options = Object.assign(\n      {\n        url: 'wss://api.hitbtc.com/api/2/ws'\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n\n      this.api.onopen = e => {\n        this.api.send(\n          JSON.stringify({\n            method: 'subscribeTrades',\n            params: {\n              symbol: this.pair\n            }\n          })\n        )\n\n        resolve()\n\n        this.emitOpen(e)\n      }\n\n      this.api.onclose = this.emitClose.bind(this)\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) {\n      return\n    }\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(json) {\n    if (!json) {\n      return\n    }\n\n    if (json.method === 'updateTrades' && json.params && json.params.data && json.params.data.length) {\n      return json.params.data.map(trade => ({\n        exchange: this.id,\n        timestamp: +new Date(trade.timestamp),\n        price: +trade.price,\n        size: +trade.quantity,\n        side: trade.side\n      }))\n    }\n  }\n\n  /* formatRecentsTrades(response) {\n    if (response && response.length) {\n      return response.map(trade => [\n        this.id,\n        +new Date(trade.timestamp),\n        +trade.price,\n        +trade.quantity,\n        trade.side === 'buy' ? 1 : 0\n      ]);\n    }\n  } */\n\n  formatProducts(data) {\n    return data.map(a => a.id)\n  }\n}\n\nexport default Hitbtc\n","import Exchange from '../services/exchange'\nimport pako from 'pako'\n\nclass Okex extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'okex'\n    this.types = []\n\n    this.tradeStack = []\n    this.dispatchTradesTimeout = null\n\n    this.endpoints = {\n      PRODUCTS: [\n        'https://www.okex.com/api/spot/v3/instruments',\n        'https://www.okex.com/api/swap/v3/instruments',\n        'https://www.okex.com/api/futures/v3/instruments'\n      ],\n      TRADES: () => `https://www.okex.com/api/v1/trades.do?symbol=${this.pair}`\n    }\n\n    // 2019-11-06\n    // retro compatibility for client without contract specification stored\n    // -> force refresh of stored instruments / specs\n    if (this.products && typeof this.specs === 'undefined') {\n      delete this.products\n    }\n\n    this.matchPairName = pair => {\n      let id = this.products[pair] || this.products[pair.replace(/USDT/i, 'USD')]\n\n      if (!id) {\n        for (let name in this.products) {\n          if (pair === this.products[name]) {\n            id = this.products[name]\n            break\n          }\n        }\n      }\n\n      if (id) {\n        if (/\\d+$/.test(id)) {\n          this.types[id] = 'futures'\n        } else if (/-SWAP$/.test(id)) {\n          this.types[id] = 'swap'\n        } else {\n          this.types[id] = 'spot'\n        }\n      }\n\n      return id || false\n    }\n\n    this.options = Object.assign(\n      {\n        url: 'wss://real.okex.com:8443/ws/v3'\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.binaryType = 'arraybuffer'\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(event.data))\n\n      this.api.onopen = e => {\n        this.api.send(\n          JSON.stringify({\n            op: 'subscribe',\n            args: this.pairs.map(pair => `${this.types[pair]}/trade:${pair}`)\n          })\n        )\n\n        this.keepalive = setInterval(() => {\n          this.api.send('ping')\n        }, 30000)\n\n        this.emitOpen(e)\n\n        resolve()\n      }\n\n      this.api.onclose = event => {\n        this.emitClose(event)\n\n        clearInterval(this.keepalive)\n      }\n\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    clearInterval(this.keepalive)\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(event) {\n    let json\n\n    try {\n      if (event instanceof String) {\n        json = JSON.parse(event)\n      } else {\n        json = JSON.parse(pako.inflateRaw(event, { to: 'string' }))\n      }\n    } catch (error) {\n      return\n    }\n\n    if (!json || !json.data || !json.data.length) {\n      return\n    }\n\n    return json.data.map(trade => {\n      let size\n\n      if (typeof this.specs[trade.instrument_id] !== 'undefined') {\n        size = ((trade.size || trade.qty) * this.specs[trade.instrument_id]) / trade.price\n      } else {\n        size = trade.size\n      }\n\n      return {\n        exchange: this.id,\n        timestamp: +new Date(trade.timestamp),\n        price: +trade.price,\n        size: +size,\n        side: trade.side\n      }\n    })\n  }\n\n  /* formatRecentsTrades(response) {\n    if (response && response.length) {\n      return response.map(trade => [\n        this.id,\n        trade.date_ms,\n        trade.price,\n        trade.amount,\n        trade.type === 'buy' ? 1 : 0,\n      ]);\n    }\n  } */\n\n  formatProducts(response) {\n    const products = {}\n    const specs = {}\n\n    const types = ['spot', 'swap', 'futures']\n\n    response.forEach((data, index) => {\n      data.forEach(product => {\n        const pair = (\n          (product.base_currency ? product.base_currency : product.underlying_index) +\n          (types[index] === 'spot' ? product.quote_currency.replace(/usdt$/i, 'USD') : product.quote_currency)\n        ).toUpperCase() // base+quote ex: BTCUSD\n\n        switch (types[index]) {\n          case 'spot':\n            products[pair] = product.instrument_id\n            break\n          case 'swap':\n            products[pair + '-SWAP'] = product.instrument_id\n            specs[product.instrument_id] = +product.contract_val\n            break\n          case 'futures':\n            products[pair + '-' + product.alias.toUpperCase()] = product.instrument_id\n            specs[product.instrument_id] = +product.contract_val\n            break\n        }\n      })\n    })\n\n    return {\n      products,\n      specs\n    }\n  }\n\n  pad(num, size) {\n    var s = '000000000' + num\n    return s.substr(s.length - size)\n  }\n}\n\nexport default Okex\n","import Exchange from '../services/exchange'\n\nclass Poloniex extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'poloniex'\n\n    this.endpoints = {\n      PRODUCTS: 'https://www.poloniex.com/public?command=returnTicker',\n      TRADES: () => () =>\n        `https://poloniex.com/public?command=returnTradeHistory&currencyPair=${this.pair}&start=${+new Date() / 1000 - 60 * 15}&end=${+new Date() /\n          1000}`\n    }\n\n    this.options = Object.assign(\n      {\n        url: 'wss://api2.poloniex.com'\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n\n      this.api.onopen = e => {\n        this.api.send(\n          JSON.stringify({\n            command: 'subscribe',\n            channel: this.pair\n          })\n        )\n\n        this.emitOpen(e)\n\n        resolve()\n      }\n\n      this.api.onclose = this.emitClose.bind(this)\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) {\n      return\n    }\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(json) {\n    if (!json || json.length !== 3) {\n      return\n    }\n\n    if (json[2] && json[2].length) {\n      return json[2]\n        .filter(result => result[0] === 't')\n        .map(trade => ({\n          exchange: this.id,\n          timestamp: +new Date(trade[5] * 1000),\n          price: +trade[3],\n          size: +trade[4],\n          side: trade[2] ? 'buy' : 'sell'\n        }))\n    }\n  }\n\n  formatProducts(data) {\n    let output = {}\n\n    Object.keys(data).forEach(a => {\n      output[\n        a\n          .split('_')\n          .reverse()\n          .join('')\n          .replace(/USDT$/, 'USD')\n      ] = a\n    })\n\n    return output\n  }\n\n  /* formatRecentsTrades(response) {\n    if (response && response.length) {\n      return response.map(trade => [\n        this.id,\n        +new Date(trade.date.split(' ').join('T') + 'Z'),\n        +trade.rate,\n        +trade.amount,\n        trade.type === 'buy' ? 1 : 0,\n      ]);\n    }\n  } */\n}\n\nexport default Poloniex\n","import Exchange from '../services/exchange'\n\nclass Deribit extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'deribit'\n\n    this.endpoints = {\n      PRODUCTS: 'https://www.deribit.com/api/v1/public/getinstruments'\n    }\n\n    this.options = Object.assign(\n      {\n        url: () => {\n          return `wss://www.deribit.com/ws/api/v2`\n        }\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n\n      this.api.onopen = e => {\n        this.skip = true\n\n        this.api.send(\n          JSON.stringify({\n            method: 'public/subscribe',\n            params: {\n              channels: ['trades.' + this.pair + '.raw']\n            }\n          })\n        )\n\n        this.keepalive = setInterval(() => {\n          this.api.send(\n            JSON.stringify({\n              method: 'public/ping'\n            })\n          )\n        }, 60000)\n\n        this.emitOpen(e)\n\n        resolve()\n      }\n\n      this.api.onclose = event => {\n        this.emitClose(event)\n\n        clearInterval(this.keepalive)\n      }\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(json) {\n    if (!json.params || !json.params.data || !json.params.data.length) {\n      return\n    }\n\n    return json.params.data.map(a => {\n      const trade = {\n        exchange: this.id,\n        timestamp: +a.timestamp,\n        price: +a.price,\n        size: a.amount / a.price,\n        side: a.direction\n      }\n\n      if (a.liquidation) {\n        trade.liquidation = true\n      }\n\n      return trade\n    })\n  }\n\n  formatProducts(data) {\n    return data.result.reduce((output, product) => {\n      output[product.settlement === 'perpetual' ? product.baseCurrency + product.currency : product.instrumentName] = product.instrumentName\n      return output\n    }, {})\n  }\n}\n\nexport default Deribit\n","import Exchange from '../services/exchange'\n\nclass Bybit extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'bybit'\n\n    this.products = ['BTCUSD', 'ETHUSD', 'EOSUSD', 'XRPUSD']\n\n    this.endpoints = {\n      // PRODUCTS: 'not available yet'\n    }\n\n    this.options = Object.assign(\n      {\n        url: () => {\n          return `wss://stream.bybit.com/realtime`\n        }\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n\n      this.api.onopen = () => {\n        this.skip = true\n\n        this.api.send(\n          JSON.stringify({\n            op: 'subscribe',\n            args: ['trade']\n          })\n        )\n\n        /* this.keepalive = setInterval(() => {\n                  this.api.send(JSON.stringify({\n                      op: 'ping',\n                  }));\n              }, 60000); */\n\n        this.emitOpen(event)\n\n        resolve()\n      }\n\n      this.api.onclose = event => {\n        this.emitClose(event)\n      }\n\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(json) {\n    if (!json.data || json.topic !== 'trade.' + this.pair || !json.data.length) {\n      return\n    }\n\n    return json.data.map(trade => {\n      return {\n        exchange: this.id,\n        timestamp: +new Date(trade.timestamp),\n        price: +trade.price,\n        size: trade.size / trade.price,\n        side: trade.side === 'Buy' ? 'buy' : 'sell'\n      }\n    })\n  }\n\n  formatProducts(data) {\n    return data.result.reduce((output, product) => {\n      output[product.settlement === 'perpetual' ? product.baseCurrency + product.currency : product.instrumentName] = product.instrumentName\n      return output\n    }, {})\n  }\n}\n\nexport default Bybit\n","import Exchange from '../services/exchange'\n\nclass Ftx extends Exchange {\n  constructor(options) {\n    super(options)\n\n    this.id = 'ftx'\n\n    this.endpoints = {\n      PRODUCTS: 'https://ftx.com/api/markets'\n    }\n\n    this.matchPairName = pair => {\n      let id = this.products[pair]\n\n      if (!id) {\n        for (let name in this.products) {\n          if (pair === this.products[name]) {\n            id = this.products[name]\n            break\n          }\n        }\n      }\n\n      /*if (id) {\n        if (/\\d+$/.test(id)) {\n          this.types[id] = 'futures';\n        } else if (/\\-SWAP$/.test(id)) {\n          this.types[id] = 'swap';\n        } else {\n          this.types[id] = 'spot';\n        }\n      }*/\n\n      return id || false\n    }\n\n    this.options = Object.assign(\n      {\n        url: () => {\n          return `wss://ftx.com/ws/`\n        }\n      },\n      this.options\n    )\n\n    this.initialize()\n  }\n\n  connect() {\n    const validation = super.connect()\n    if (!validation) return Promise.reject()\n    else if (validation instanceof Promise) return validation\n\n    return new Promise((resolve, reject) => {\n      this.api = new WebSocket(this.getUrl())\n\n      this.api.onmessage = event => this.queueTrades(this.formatLiveTrades(JSON.parse(event.data)))\n\n      this.api.onopen = e => {\n        this.skip = true\n\n        for (let pair of this.pairs) {\n          this.api.send(JSON.stringify({ op: 'subscribe', channel: 'trades', market: pair }))\n        }\n\n        this.keepalive = setInterval(() => {\n          this.api.send(\n            JSON.stringify({\n              op: 'ping'\n            })\n          )\n        }, 15000)\n\n        this.emitOpen(e)\n\n        resolve()\n      }\n\n      this.api.onclose = event => {\n        this.emitClose(event)\n\n        clearInterval(this.keepalive)\n      }\n      this.api.onerror = () => {\n        this.emitError({ message: `${this.id} disconnected` })\n\n        reject()\n      }\n    })\n  }\n\n  disconnect() {\n    if (!super.disconnect()) return\n\n    if (this.api && this.api.readyState < 2) {\n      this.api.close()\n    }\n  }\n\n  formatLiveTrades(json) {\n    if (!json || !json.data || !json.data.length) {\n      return\n    }\n\n    return json.data.map(trade => {\n      const output = {\n        exchange: this.id,\n        timestamp: +new Date(trade.time),\n        price: +trade.price,\n        size: trade.size,\n        side: trade.side\n      }\n\n      if (trade.liquidation) {\n        output.liquidation = true\n      }\n\n      return output\n    })\n  }\n\n  formatProducts(data) {\n    return data.result.reduce((obj, product) => {\n      let standardName = product.name\n        .replace('/', 'SPOT')\n        .replace(/-PERP$/g, '-USD')\n        .replace(/[/-]/g, '')\n\n      obj[standardName] = product.name\n\n      return obj\n    }, {})\n  }\n}\n\nexport default Ftx\n","import Vue from 'vue'\r\nimport Axios from 'axios'\r\n\r\nimport Kraken from '../exchanges/kraken'\r\nimport Bitmex from '../exchanges/bitmex'\r\nimport Huobi from '../exchanges/huobi'\r\nimport Binance from '../exchanges/binance'\r\nimport BinanceFutures from '../exchanges/binance-futures'\r\nimport Bitfinex from '../exchanges/bitfinex'\r\nimport Bitstamp from '../exchanges/bitstamp'\r\nimport Gdax from '../exchanges/gdax'\r\nimport Hitbtc from '../exchanges/hitbtc'\r\nimport Okex from '../exchanges/okex'\r\nimport Poloniex from '../exchanges/poloniex'\r\nimport Deribit from '../exchanges/deribit'\r\nimport Bybit from '../exchanges/bybit'\r\nimport Ftx from '../exchanges/ftx'\r\n\r\nimport store from '../store'\r\nimport { formatAmount } from '../utils/helpers'\r\n\r\nconst QUEUE = {}\r\nconst REFS = {}\r\nconst SUMS = {\r\n  vbuy: 0,\r\n  vsell: 0,\r\n  lbuy: 0,\r\n  lsell: 0,\r\n  cbuy: 0,\r\n  csell: 0\r\n}\r\nconst AGGR = []\r\n\r\nlet sumsInterval = null\r\nlet activeExchanges = []\r\n\r\nconst emitter = new Vue({\r\n  data() {\r\n    return {\r\n      exchanges: [\r\n        new Bitmex(),\r\n        new Bitfinex(),\r\n        new Binance(),\r\n        new BinanceFutures(),\r\n        new Bitstamp(),\r\n        new Gdax(),\r\n        new Poloniex(),\r\n        new Kraken(),\r\n        new Okex(),\r\n        new Deribit(),\r\n        new Huobi(),\r\n        new Hitbtc(),\r\n        new Bybit(),\r\n        new Ftx()\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    pair() {\r\n      return store.state.settings.pair\r\n    },\r\n    timeframe() {\r\n      return store.state.settings.timeframe\r\n    },\r\n    exchangesSettings() {\r\n      return store.state.settings.exchanges\r\n    },\r\n    showChart() {\r\n      return store.state.settings.showChart\r\n    },\r\n    showSlippage() {\r\n      return store.state.settings.showSlippage\r\n    },\r\n    chartRange() {\r\n      return store.state.settings.chartRange\r\n    },\r\n    aggregateTrades() {\r\n      return store.state.settings.aggregateTrades\r\n    },\r\n    apiUrl() {\r\n      return store.state.app.apiUrl\r\n    },\r\n    proxyUrl() {\r\n      return store.state.app.proxyUrl\r\n    },\r\n    apiSupportedPairs() {\r\n      return store.state.app.apiSupportedPairs\r\n    },\r\n    actives() {\r\n      return store.state.app.actives\r\n    },\r\n    isLoading() {\r\n      return store.state.app.isLoading\r\n    },\r\n    preferQuoteCurrencySize() {\r\n      return store.state.settings.preferQuoteCurrencySize\r\n    },\r\n    showStats() {\r\n      return store.state.settings.showStats\r\n    },\r\n    showCounters() {\r\n      return store.state.settings.showCounters\r\n    }\r\n  },\r\n  created() {\r\n    window.testapi = () => {\r\n      this.testapi()\r\n    }\r\n    window.emitTrade = (exchange, price, amount = 1, side = 1, type = null) => {\r\n      exchange = exchange || 'bitmex'\r\n\r\n      if (price === null) {\r\n        price = this.getExchangeById(exchange).price\r\n      }\r\n\r\n      let trade = {\r\n        exchange: exchange,\r\n        timestamp: +new Date(),\r\n        price: price,\r\n        size: amount,\r\n        side: side ? 'buy' : 'sell'\r\n      }\r\n\r\n      if (type === 1) {\r\n        trade.liquidation = true\r\n      }\r\n\r\n      console.log(price * amount, formatAmount(price * amount))\r\n\r\n      this.$emit('trades', [trade])\r\n      this.$emit('trades.aggr', [trade])\r\n    }\r\n    store.subscribe(mutation => {\r\n      switch (mutation.type) {\r\n        case 'app/EXCHANGE_UPDATED':\r\n          activeExchanges = this.actives.slice(0, this.actives.length)\r\n          break\r\n        case 'settings/TOGGLE_STATS':\r\n        case 'settings/TOGGLE_COUNTERS':\r\n          if (!this.showStats && !this.showCounters && sumsInterval) {\r\n            this.clearSumsInterval()\r\n          } else if (this.showStats || (this.showCounters && !sumsInterval)) {\r\n            this.setupSumsInterval()\r\n          }\r\n          break\r\n      }\r\n    })\r\n\r\n    this.exchanges.forEach(exchange => {\r\n      exchange.on('trades', trades => {\r\n        if (!trades || !trades.length) {\r\n          return\r\n        }\r\n\r\n        const length = trades.length\r\n\r\n        const doAggr = this.aggregateTrades\r\n        const doSlip = this.showSlippage\r\n\r\n        if (!doAggr) {\r\n          for (let i = 0; i < length; i++) {\r\n            const trade = trades[i]\r\n\r\n            if (sumsInterval !== null && activeExchanges.indexOf(trade.exchange) !== -1) {\r\n              const size = (this.preferQuoteCurrencySize ? trade.price : 1) * trade.size\r\n\r\n              if (!SUMS.timestamp) {\r\n                SUMS.timestamp = trade.timestamp\r\n              }\r\n\r\n              if (trade.liquidation) {\r\n                SUMS['l' + trade.side] += size\r\n              } else {\r\n                SUMS['c' + trade.side]++\r\n                SUMS['v' + trade.side] += size\r\n              }\r\n            }\r\n\r\n            doSlip && this.calculateSlippage(trades[i])\r\n\r\n            AGGR.push(trades[i])\r\n          }\r\n\r\n          this.$emit('trades', trades)\r\n        } else {\r\n          const now = +new Date()\r\n\r\n          for (let i = 0; i < length; i++) {\r\n            const trade = trades[i]\r\n\r\n            if (sumsInterval !== null && activeExchanges.indexOf(trade.exchange) !== -1) {\r\n              const size = (this.preferQuoteCurrencySize ? trade.price : 1) * trade.size\r\n\r\n              if (!SUMS.timestamp) {\r\n                SUMS.timestamp = trade.timestamp\r\n              }\r\n\r\n              if (trade.liquidation) {\r\n                SUMS['l' + trade.side] += size\r\n              } else {\r\n                SUMS['c' + trade.side]++\r\n                SUMS['v' + trade.side] += size\r\n              }\r\n            }\r\n\r\n            if (trade.liquidation) {\r\n              AGGR.push(trade)\r\n              continue\r\n            }\r\n\r\n            trade.ref = REFS[exchange.id] || trade.price\r\n\r\n            REFS[exchange.id] = trade.price\r\n\r\n            if (QUEUE[exchange.id]) {\r\n              const queuedTrade = QUEUE[exchange.id]\r\n\r\n              if (queuedTrade.timestamp === trade.timestamp && queuedTrade.side === trade.side) {\r\n                queuedTrade.size += trade.size\r\n                queuedTrade.price += trade.price * trade.size\r\n                queuedTrade.high = Math.max(queuedTrade.high || queuedTrade.price / queuedTrade.size, trade.price)\r\n                queuedTrade.low = Math.min(queuedTrade.low || queuedTrade.price / queuedTrade.size, trade.price)\r\n                continue\r\n              } else {\r\n                queuedTrade.price /= queuedTrade.size\r\n                doSlip && this.calculateSlippage(QUEUE[exchange.id])\r\n                AGGR.push(queuedTrade)\r\n              }\r\n            }\r\n\r\n            QUEUE[exchange.id] = Object.assign({}, trade)\r\n            QUEUE[exchange.id].timeout = now + 50\r\n            QUEUE[exchange.id].high = Math.max(trade.ref, trade.price)\r\n            QUEUE[exchange.id].low = Math.min(trade.ref, trade.price)\r\n            QUEUE[exchange.id].price *= QUEUE[exchange.id].size\r\n          }\r\n\r\n          this.$emit('trades', trades)\r\n        }\r\n      })\r\n\r\n      exchange.on('open', () => {\r\n        //console.log(`[socket.exchange.on.open] ${exchange.id} opened`)\r\n\r\n        this.$emit('connected', exchange.id)\r\n      })\r\n\r\n      exchange.on('close', () => {\r\n        //console.log(`[socket.exchange.on.close] ${exchange.id} closed`)\r\n\r\n        this.$emit('disconnected', exchange.id)\r\n\r\n        if (exchange.shouldBeConnected && !this.exchangesSettings[exchange.id].disabled) {\r\n          exchange.reconnect(this.pair)\r\n        }\r\n      })\r\n\r\n      exchange.on('match', pair => {\r\n        //console.log(`[socket.exchange.on.match] ${exchange.id} matched ${pair}`)\r\n        store.commit('settings/SET_EXCHANGE_MATCH', {\r\n          exchange: exchange.id,\r\n          match: pair\r\n        })\r\n      })\r\n\r\n      exchange.on('error', () => {\r\n        //console.log(`[socket.exchange.on.error] ${exchange.id} reported an error`)\r\n      })\r\n\r\n      store.dispatch('app/refreshExchange', exchange.id)\r\n    })\r\n  },\r\n  methods: {\r\n    initialize() {\r\n      console.log(`[sockets] initializing ${this.exchanges.length} exchange(s)`)\r\n\r\n      setTimeout(this.connectExchanges.bind(this))\r\n\r\n      this.clearSumsInterval()\r\n      if (store.state.settings.showCounters || store.state.settings.showStats) {\r\n        this.setupSumsInterval()\r\n      }\r\n\r\n      setInterval(this.emitAggr.bind(this), 100)\r\n    },\r\n    connectExchanges(pair = null) {\r\n      this.disconnectExchanges()\r\n\r\n      if (!pair && !this.pair) {\r\n        store.dispatch('app/showNotice', {\r\n          type: 'error',\r\n          title: `No pair.`\r\n        })\r\n      }\r\n\r\n      if (pair) {\r\n        this.pair = pair.toUpperCase()\r\n      }\r\n\r\n      console.log(`[socket.connect] connecting to ${this.pair}`)\r\n\r\n      store.dispatch('app/showNotice', {\r\n        type: 'info',\r\n        title: 'Fetching the latest products, please wait.'\r\n      })\r\n\r\n      Promise.all(this.exchanges.map(exchange => exchange.validatePair(this.pair))).then(() => {\r\n        let validExchanges = this.exchanges.filter(exchange => exchange.valid)\r\n\r\n        if (!validExchanges.length) {\r\n          store.dispatch('app/showNotice', {\r\n            type: 'error',\r\n            delay: false,\r\n            title: `Cannot find ${this.pair}, sorry`\r\n          })\r\n\r\n          return\r\n        }\r\n\r\n        const successfullMatches = validExchanges.length\r\n\r\n        console.log(`[socket.connect] ${successfullMatches} successfully matched with ${this.pair}`)\r\n\r\n        validExchanges = validExchanges.filter(exchange => !this.exchangesSettings[exchange.id].disabled)\r\n\r\n        store.dispatch('app/showNotice', {\r\n          type: 'info',\r\n          title: `Connecting to ${validExchanges.length} exchange${validExchanges.length > 1 ? 's' : ''}`\r\n        })\r\n\r\n        console.log(`[socket.connect] batch connect to ${validExchanges.map(a => a.id).join(' / ')}`)\r\n\r\n        Promise.all(validExchanges.map(exchange => exchange.connect())).then(() => {\r\n          store.dispatch('app/showNotice', {\r\n            type: 'success',\r\n            title:\r\n              `Subscribed to ${this.pair} on ${validExchanges.length} exchange${validExchanges.length > 1 ? 's' : ''}` +\r\n              (validExchanges.length < successfullMatches ? ` (${successfullMatches - validExchanges.length} hidden)` : '')\r\n          })\r\n        })\r\n      })\r\n    },\r\n    disconnectExchanges() {\r\n      console.log(`[socket.connect] disconnect exchanges asynchronously`)\r\n\r\n      this.exchanges.forEach(exchange => exchange.disconnect())\r\n    },\r\n    getExchangeById(id) {\r\n      for (let exchange of this.exchanges) {\r\n        if (exchange.id === id) {\r\n          return exchange\r\n        }\r\n      }\r\n\r\n      return null\r\n    },\r\n    setupSumsInterval() {\r\n      console.log(`[socket] setup sums interval`)\r\n\r\n      sumsInterval = setInterval(this.emitSums.bind(this), 1000)\r\n    },\r\n    clearSumsInterval() {\r\n      if (sumsInterval) {\r\n        console.log(`[socket] clear sums interval`)\r\n\r\n        clearInterval(sumsInterval)\r\n        sumsInterval = null\r\n      }\r\n    },\r\n    emitSums() {\r\n      if (SUMS.timestamp) {\r\n        this.$emit('sums', SUMS)\r\n\r\n        SUMS.timestamp = null\r\n        SUMS.vbuy = 0\r\n        SUMS.vsell = 0\r\n        SUMS.cbuy = 0\r\n        SUMS.csell = 0\r\n        SUMS.lbuy = 0\r\n        SUMS.lsell = 0\r\n      }\r\n    },\r\n    emitAggr() {\r\n      const now = +new Date()\r\n      const inQueue = Object.keys(QUEUE)\r\n\r\n      for (let i = 0; i < inQueue.length; i++) {\r\n        const trade = QUEUE[inQueue[i]]\r\n        if (now > trade.timeout) {\r\n          trade.price /= trade.size\r\n          this.calculateSlippage(trade)\r\n          AGGR.push(trade)\r\n\r\n          delete QUEUE[inQueue[i]]\r\n        }\r\n      }\r\n\r\n      if (AGGR.length) {\r\n        this.$emit('trades.aggr', AGGR)\r\n        AGGR.splice(0, AGGR.length)\r\n      }\r\n    },\r\n    calculateSlippage(trade) {\r\n      const type = this.showSlippage\r\n\r\n      if (type === 'price') {\r\n        trade.slippage = (trade.ref - trade.price) * -1\r\n      } else if (type === 'bps') {\r\n        trade.slippage = Math.floor(((trade.high - trade.low) / trade.low) * 10000)\r\n      }\r\n\r\n      return trade.slippage\r\n    },\r\n    canFetch() {\r\n      return this.apiUrl && (!this.apiSupportedPairs || this.apiSupportedPairs.indexOf(this.pair) !== -1)\r\n    },\r\n    getApiUrl(from, to) {\r\n      let url = this.apiUrl\r\n\r\n      url = url.replace(/\\{from\\}/, from)\r\n      url = url.replace(/\\{to\\}/, to)\r\n      url = url.replace(/\\{timeframe\\}/, this.timeframe * 1000)\r\n      url = url.replace(/\\{pair\\}/, this.pair.toLowerCase())\r\n      url = url.replace(/\\{exchanges\\}/, this.actives.join('+'))\r\n\r\n      return url\r\n    },\r\n    fetchHistoricalData(from, to) {\r\n      const url = this.getApiUrl(from, to)\r\n\r\n      if (this.lastFetchUrl === url) {\r\n        return Promise.reject()\r\n      }\r\n\r\n      this.lastFetchUrl = url\r\n\r\n      store.commit('app/TOGGLE_LOADING', true)\r\n\r\n      this.$emit('fetchStart', to - from)\r\n\r\n      return new Promise((resolve, reject) => {\r\n        Axios.get(url, {\r\n          onDownloadProgress: e => {\r\n            this.$emit('loadingProgress', {\r\n              loaded: e.loaded,\r\n              total: e.total,\r\n              progress: e.loaded / e.total\r\n            })\r\n\r\n            this._fetchedBytes += e.loaded\r\n          }\r\n        })\r\n          .then(response => {\r\n            if (!response.data || typeof response.data !== 'object') {\r\n              return reject()\r\n            }\r\n\r\n            const format = response.data.format\r\n            let data = response.data.results\r\n\r\n            if (!data.length) {\r\n              return reject()\r\n            }\r\n\r\n            switch (response.data.format) {\r\n              case 'point':\r\n                ;({ from, to, data } = this.normalisePoints(data))\r\n                break\r\n              default:\r\n                break\r\n            }\r\n\r\n            const output = {\r\n              format: format,\r\n              data: data,\r\n              from: from,\r\n              to: to\r\n            }\r\n\r\n            this.$emit('historical', output)\r\n\r\n            resolve(output)\r\n          })\r\n          .catch(err => {\r\n            err &&\r\n              store.dispatch('app/showNotice', {\r\n                type: 'error',\r\n                message: `API error (${\r\n                  err.response && err.response.data && err.response.data.error ? err.response.data.error : err.message || 'unknown error'\r\n                })`\r\n              })\r\n\r\n            reject()\r\n          })\r\n          .then(() => {\r\n            this._fetchedTime += to - from\r\n\r\n            this.$emit('fetchEnd', to - from)\r\n\r\n            store.commit('app/TOGGLE_LOADING', false)\r\n          })\r\n      })\r\n    },\r\n    normalisePoints(data) {\r\n      if (!data || !data.length) {\r\n        return data\r\n      }\r\n\r\n      const initialTs = +new Date(data[0].time) / 1000\r\n      const exchanges = []\r\n\r\n      let refs = {}\r\n\r\n      for (let i = data.length - 1; i >= 0; i--) {\r\n        refs[data[i].exchange] = data[i].open\r\n        if (typeof data[i].vol_buy !== 'undefined') {\r\n          data[i].vbuy = data[i].vol_buy\r\n          data[i].vsell = data[i].vol_sell\r\n          data[i].cbuy = data[i].count_buy\r\n          data[i].csell = data[i].count_sell\r\n          data[i].lbuy = data[i].liquidation_buy\r\n          data[i].lsell = data[i].liquidation_sell\r\n        }\r\n        data[i].timestamp = +new Date(data[i].time) / 1000\r\n\r\n        delete data[i].time\r\n        delete data[i].count\r\n        delete data[i].vol\r\n        if (typeof data[i].vol_buy !== 'undefined') {\r\n          delete data[i].vol_buy\r\n          delete data[i].vol_sell\r\n          delete data[i].count_buy\r\n          delete data[i].count_sell\r\n          delete data[i].liquidation_buy\r\n          delete data[i].liquidation_sell\r\n        }\r\n\r\n        if (data[i].time === initialTs) {\r\n          delete refs[data[i].exchange]\r\n          exchanges.push(data[i].exchange)\r\n        }\r\n      }\r\n\r\n      for (let exchange in refs) {\r\n        data.unshift({\r\n          timestamp: initialTs,\r\n          exchange: exchange,\r\n          open: refs[exchange],\r\n          high: refs[exchange],\r\n          low: refs[exchange],\r\n          close: refs[exchange],\r\n          vbuy: 0,\r\n          vsell: 0,\r\n          lbuy: 0,\r\n          lsell: 0,\r\n          cbuy: 0,\r\n          csell: 0\r\n        })\r\n\r\n        exchanges.push(exchange)\r\n      }\r\n\r\n      return {\r\n        data,\r\n        exchanges,\r\n        from: data[0].timestamp,\r\n        to: data[data.length - 1].timestamp\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nexport default emitter\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:'notice -' + _vm.notice.type},[_c('span',{staticClass:\"notice__icon icon-\"}),_c('div',{staticClass:\"notice__title\"},[_vm._v(_vm._s(_vm.notice.title))]),(_vm.notice.message)?_c('div',{staticClass:\"notice__message\",domProps:{\"innerHTML\":_vm._s(_vm.notice.message)}}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"'notice -' + notice.type\">\n    <span class=\"notice__icon icon-\"></span>\n    <div class=\"notice__title\">{{ notice.title }}</div>\n    <div v-if=\"notice.message\" class=\"notice__message\" v-html=\"notice.message\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['notice'],\n  data() {\n    return {}\n  },\n  mounted() {\n    this._onClick = this.click.bind(this)\n\n    this.$el.addEventListener('click', this._onClick)\n  },\n  beforeDestroy() {\n    this.$el.removeEventListener('click', this._onClick)\n  },\n  methods: {\n    click() {\n      if (this.notice.click) {\n        this.notice.click(this)\n      } else {\n        this.hide()\n      }\n    },\n    hide() {\n      this.$store.dispatch('app/hideNotice', this.notice.id)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Notice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Notice.vue?vue&type=template&id=4ea831c8&\"\nimport script from \"./Notice.vue?vue&type=script&lang=js&\"\nexport * from \"./Notice.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"header\",attrs:{\"id\":\"header\"}},[_c('div',{staticClass:\"header__wrapper\"},[_c('div',{staticClass:\"header__title\"},[(_vm.pair)?_c('span',{staticClass:\"pair\"},[_vm._v(_vm._s(_vm.pair))]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"icon-quote\"}),_vm._v(\" \"),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.price || 'SignificantTrades')}})]),_c('button',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],attrs:{\"type\":\"button\",\"title\":\"Search\"},on:{\"click\":function($event){return _vm.$store.commit('app/TOGGLE_SEARCH', !_vm.showSearch)}}},[_c('span',{staticClass:\"icon-search\"})]),(_vm.showChart)?_c('dropdown',{attrs:{\"options\":_vm.timeframes,\"selected\":_vm.timeframe,\"placeholder\":\"tf.\"},on:{\"output\":function($event){return _vm.$store.commit('settings/SET_TIMEFRAME', +$event)}}}):_vm._e(),(!_vm.isPopupMode)?_c('button',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],attrs:{\"type\":\"button\",\"title\":\"Open as popup\"},on:{\"click\":_vm.togglePopup}},[_c('span',{staticClass:\"icon-external-link\"})]):_vm._e(),_c('button',{class:{ active: _vm.useAudio },attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_AUDIO', !_vm.useAudio)}}},[_c('span',{staticClass:\"icon-volume-muted\"})]),_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('toggleSettings')}}},[_c('span',{staticClass:\"icon-cog\"})])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <header id=\"header\" class=\"header\">\n    <div class=\"header__wrapper\">\n      <div class=\"header__title\">\n        <span class=\"pair\" v-if=\"pair\">{{ pair }}</span>\n        &nbsp;\n        <span class=\"icon-quote\"></span>\n        &nbsp;\n        <span v-html=\"price || 'SignificantTrades'\"></span>\n      </div>\n      <button type=\"button\" @click=\"$store.commit('app/TOGGLE_SEARCH', !showSearch)\" title=\"Search\" v-tippy=\"{ placement: 'bottom' }\">\n        <span class=\"icon-search\"></span>\n      </button>\n      <dropdown\n        v-if=\"showChart\"\n        :options=\"timeframes\"\n        :selected=\"timeframe\"\n        placeholder=\"tf.\"\n        @output=\"$store.commit('settings/SET_TIMEFRAME', +$event)\"\n      ></dropdown>\n      <button type=\"button\" v-if=\"!isPopupMode\" @click=\"togglePopup\" title=\"Open as popup\" v-tippy=\"{ placement: 'bottom' }\">\n        <span class=\"icon-external-link\"></span>\n      </button>\n      <button type=\"button\" :class=\"{ active: useAudio }\" @click=\"$store.commit('settings/TOGGLE_AUDIO', !useAudio)\">\n        <span class=\"icon-volume-muted\"></span>\n      </button>\n      <button type=\"button\" @click=\"$emit('toggleSettings')\">\n        <span class=\"icon-cog\"></span>\n      </button>\n    </div>\n  </header>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { ago } from '../../utils/helpers'\n\nexport default {\n  props: ['price'],\n  data() {\n    return {\n      fetchLabel: 'Fetch timeframe',\n      isPopupMode: window.opener !== null,\n      showTimeframeDropdown: false,\n      timeframeLabel: '15m',\n      timeframes: {}\n    }\n  },\n  computed: {\n    ...mapState('settings', ['pair', 'useAudio', 'showChart', 'timeframe']),\n    ...mapState('app', ['showSearch'])\n  },\n  created() {\n    this._fetchLabel = this.fetchLabel.substr()\n\n    const now = +new Date()\n\n    ;[1, 3, 5, 10, 15, 30, 60, 60 * 3, 60 * 5, 60 * 15].forEach(span => (this.timeframes[span] = ago(now - span * 1000)))\n\n    this.updateTimeframeLabel()\n  },\n  methods: {\n    setTimeframe(timeframe) {\n      document.activeElement.blur()\n\n      this.updateTimeframeLabel(timeframe)\n\n      setTimeout(() => {\n        this.$store.commit('settings/SET_TIMEFRAME', timeframe)\n      }, 50)\n    },\n    updateTimeframeLabel(timeframe) {\n      this.timeframeLabel = ago(+new Date() - (timeframe || this.timeframe) * 1000)\n    },\n    togglePopup() {\n      window.open(window.location.href, `sig${this.pair}`, 'toolbar=no,status=no,width=350,height=500')\n\n      setTimeout(() => {\n        window.close()\n      }, 500)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\nheader#header {\n  background-color: lighten($dark, 10%);\n  color: white;\n  position: relative;\n\n  div.header__wrapper {\n    position: relative;\n    display: flex;\n    align-items: center;\n\n    > button,\n    .dropdown__selected {\n      padding: 0.2em 0.4em;\n      font-size: 1em;\n\n      @media screen and (min-width: 480px) {\n        padding: 0.2em 0.6em;\n      }\n    }\n\n    .dropdown__option {\n      span {\n        margin-right: 1em;\n      }\n    }\n  }\n\n  .header__title {\n    width: 100%;\n    padding: 10px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n\n    .pair {\n      opacity: 0.5;\n    }\n\n    sup {\n      line-height: 0;\n      opacity: 0.5;\n\n      span {\n        font-size: 80%;\n        margin-left: 2px;\n      }\n    }\n  }\n\n  .dropdown {\n    .options {\n      position: absolute;\n    }\n  }\n\n  button {\n    border: 0;\n    background: none;\n    color: inherit;\n    position: relative;\n    color: white;\n\n    align-self: stretch;\n    cursor: pointer;\n\n    > span {\n      display: inline-block;\n      transition: all 0.5s $easeElastic;\n    }\n\n    .icon-play {\n      opacity: 0.2;\n    }\n\n    .icon-volume-muted {\n      transform: scale(1.2);\n    }\n\n    &:hover,\n    &:active,\n    &.active {\n      .icon-external-link {\n        transform: rotateZ(-7deg) scale(1.2) translate(5%, -5%);\n        text-shadow: 0 0 20px $orange, 0 0 2px white;\n      }\n\n      .icon-play {\n        opacity: 1;\n        transform: rotateZ(-7deg) scale(1.2) translateX(10%);\n        text-shadow: 0 0 20px $blue, 0 0 2px white;\n      }\n\n      .icon-cog {\n        transform: rotateZ(180deg) scale(1.2);\n        text-shadow: 0 0 20px $green, 0 0 2px white;\n      }\n\n      .icon-history {\n        transform: rotateZ(-360deg) scale(1.1);\n        display: inline-block;\n        text-shadow: 0 0 20px $red, 0 0 2px white;\n      }\n\n      .icon-volume-muted {\n        color: white;\n        transform: rotateZ(-7deg) scale(1.3);\n        text-shadow: 0 0 20px $blue, 0 0 2px $blue;\n      }\n    }\n\n    &.active {\n      .icon-play {\n        opacity: 1;\n        color: $red;\n        transform: rotateZ(-7deg) scale(1.2) translateX(10%);\n        text-shadow: 0 0 20px $red, 0 0 2px $red;\n      }\n\n      .icon-volume-muted {\n        &:before {\n          content: unicode($icon-volume);\n        }\n      }\n\n      .icon-history {\n        color: white;\n        text-shadow: 0 0 20px white, 0 0 2px white;\n      }\n    }\n  }\n\n  &:after,\n  &:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    display: block;\n    background-clip: padding-box;\n    transition: background-color 0.4s $easeOutExpo;\n  }\n}\n\n#app.loading header#header {\n  &:before {\n    background-color: lighten($dark, 15%);\n    animation: indeterminate-loading-bar-slow 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n  }\n\n  &:after {\n    background-color: lighten($dark, 15%);\n    animation: indeterminate-loading-bar-fast 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n    animation-delay: 1.15s;\n  }\n}\n\n@keyframes indeterminate-loading-bar-slow {\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n}\n\n@keyframes indeterminate-loading-bar-fast {\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=5f1f3fba&\"\nimport script from \"./Header.vue?vue&type=script&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Header.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"autocomplete\"},[_c('div',{staticClass:\"autocomplete__wrapper\"},[_c('div',{staticClass:\"autocomplete__items\"},[_vm._l((_vm.items),function(value,index){return _c('div',{key:index,staticClass:\"autocomplete__item\",domProps:{\"textContent\":_vm._s(value)},on:{\"click\":function($event){return _vm.removeItem(index)}}})}),_c('div',{ref:\"input\",staticClass:\"autocomplete__input\",attrs:{\"contenteditable\":\"\",\"placeholder\":_vm.placeholder},on:{\"focus\":_vm.open,\"input\":function($event){return _vm.search($event.target.innerText)},\"keydown\":_vm.handleKeydown}})],2),_c('button',{staticClass:\"btn -blue autocomplete__submit\",class:{ active: _vm.items.length > 0 },on:{\"click\":_vm.submit}},[_c('i',{staticClass:\"icon-check\"})])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOpen),expression:\"isOpen\"}],staticClass:\"autocomplete__dropdown\"},_vm._l((_vm.availableOptions),function(item,index){return _c('div',{key:index,staticClass:\"autocomplete__option\",class:{ active: _vm.activeOptionIndex === index },on:{\"click\":function($event){return _vm.addItem(index)}}},[_vm._t(\"default\",[_vm._v(_vm._s(item))],{\"item\":item})],2)}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"autocomplete\">\n    <div class=\"autocomplete__wrapper\">\n      <div class=\"autocomplete__items\">\n        <div class=\"autocomplete__item\" v-for=\"(value, index) in items\" :key=\"index\" @click=\"removeItem(index)\" v-text=\"value\"></div>\n        <div\n          ref=\"input\"\n          class=\"autocomplete__input\"\n          contenteditable\n          :placeholder=\"placeholder\"\n          @focus=\"open\"\n          @input=\"search($event.target.innerText)\"\n          @keydown=\"handleKeydown\"\n        ></div>\n      </div>\n      <button class=\"btn -blue autocomplete__submit\" :class=\"{ active: items.length > 0 }\" @click=\"submit\"><i class=\"icon-check\"></i></button>\n    </div>\n    <div class=\"autocomplete__dropdown\" v-show=\"isOpen\">\n      <div\n        class=\"autocomplete__option\"\n        v-for=\"(item, index) in availableOptions\"\n        :key=\"index\"\n        :class=\"{ active: activeOptionIndex === index }\"\n        @click=\"addItem(index)\"\n      >\n        <slot :item=\"item\">{{ item }}</slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    placeholder: {\n      type: String,\n      default: 'Type something...'\n    },\n    load: {\n      type: Function\n    },\n    selected: {\n      type: Array,\n      default: new Array()\n    }\n  },\n  data() {\n    return {\n      isOpen: false,\n      activeOptionIndex: null,\n      options: [],\n      items: []\n    }\n  },\n  computed: {\n    availableOptions() {\n      return this.options.filter(a => this.items.indexOf(a && typeof a === 'object' ? a.value : a) === -1)\n    }\n  },\n  created() {\n    this.items = this.selected.slice(0, this.selected.length)\n  },\n  mounted() {\n    setTimeout(this.focus.bind(this))\n  },\n  methods: {\n    search(query) {\n      console.log('search', query)\n      this.activeOptionIndex = null\n      if (!this.load) {\n        return\n      }\n      if (Array.isArray(this.load)) {\n        this.options = this.load.filter(a => a.indexOf(query) !== -1)\n      } else if (typeof this.load === 'function') {\n        this.options = this.load(query)\n      }\n      if (!this.options) {\n        this.options = []\n      }\n      this.options.splice(50, this.options.length)\n      if (!this.options.length) {\n        this.close()\n      } else {\n        this.activeOptionIndex = 0\n        this.open()\n      }\n    },\n    open() {\n      if (this.isOpen || !this.options.length) {\n        return\n      }\n\n      this.bindClickOutside()\n\n      this.isOpen = true\n    },\n    close() {\n      if (!this.isOpen) {\n        return\n      }\n\n      this.unbindClickOutside()\n      console.log('close')\n      this.isOpen = false\n    },\n    addItem(index) {\n      const item = this.availableOptions[index]\n      const value = item && typeof item === 'object' ? item.value : item\n\n      if (!value || this.items.indexOf(value) !== -1) {\n        return\n      }\n\n      this.items.push(value)\n      this.$refs.input.innerText = ''\n      this.activeOptionIndex = null\n    },\n    removeItem(index) {\n      this.items.splice(index, 1)\n    },\n    handleKeydown($event) {\n      switch ($event.which) {\n        case 13:\n          event.preventDefault()\n          if (this.activeOptionIndex !== null) {\n            this.addItem(this.activeOptionIndex)\n          } else if (this.items.length && !this.$refs.input.innerText.length) {\n            this.submit()\n          }\n          break\n        case 8:\n          if (this.items.length && !this.$refs.input.innerText.length) {\n            this.removeItem(this.items.length - 1)\n            event.preventDefault()\n          }\n          break\n        case 38:\n        case 40:\n          if (this.options.length) {\n            if ($event.which === 38) {\n              this.activeOptionIndex = Math.max(0, this.activeOptionIndex - 1)\n            } else if ($event.which === 40) {\n              if (this.activeOptionIndex === null) {\n                this.activeOptionIndex = 0\n              } else {\n                this.activeOptionIndex = Math.min(this.availableOptions.length - 1, this.activeOptionIndex + 1)\n              }\n            }\n          }\n          break\n      }\n    },\n    submit() {\n      if (!this.items.length) {\n        return\n      }\n      this.$emit('submit', this.items)\n    },\n    focus() {\n      this.$refs.input.focus()\n      if (typeof window.getSelection !== 'undefined' && typeof document.createRange != 'undefined') {\n        var range = document.createRange()\n        range.selectNodeContents(this.$refs.input)\n        range.collapse(false)\n        var sel = window.getSelection()\n        sel.removeAllRanges()\n        sel.addRange(range)\n      } else if (typeof document.body.createTextRange != 'undefined') {\n        var textRange = document.body.createTextRange()\n        textRange.moveToElementText(this.$refs.input)\n        textRange.collapse(false)\n        textRange.select()\n      }\n\n      if (this.$refs.input.innerText.length) {\n        this.search(this.$refs.input.innerText)\n      }\n    },\n    bindClickOutside() {\n      if (this._clickOutsideHandler) {\n        return\n      }\n\n      this._clickOutsideHandler = (event => {\n        if (this.$el !== event.target && !this.$el.contains(event.target)) {\n          this.close()\n        }\n      }).bind(this)\n\n      document.addEventListener('mousedown', this._clickOutsideHandler)\n    },\n    unbindClickOutside() {\n      if (!this._clickOutsideHandler) {\n        return\n      }\n\n      document.removeEventListener('mousedown', this._clickOutsideHandler)\n      delete this._clickOutsideHandler\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Autocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Autocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Autocomplete.vue?vue&type=template&id=21ea3e17&\"\nimport script from \"./Autocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./Autocomplete.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"settings__container stack__container\",attrs:{\"id\":\"settings\"},on:{\"mousedown\":function($event){$event.target === _vm.$el && _vm.$emit('close')}}},[_c('div',{staticClass:\"stack__scroller\"},[_c('div',{staticClass:\"stack__wrapper\"},[_c('a',{staticClass:\"stack__toggler icon-cross\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.$emit('close')}}}),_c('div',{staticClass:\"form-group settings-pair mb8\"},[_c('label',[_vm._v(\" Pair \"),_c('span',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"icon-info-circle\",attrs:{\"title\":\"The pair to aggregate from\"}})]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"string\",\"placeholder\":\"BTCUSD\"},domProps:{\"value\":_vm.pair},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_PAIR', $event.target.value)}}}),(_vm.showPairSubdomainHelp)?_c('small',{staticClass:\"help-text mt8\"},[_c('i',{staticClass:\"icon-info-circle\"}),_vm._v(\" Consider using \"),_c('a',{attrs:{\"href\":'https://' + _vm.pair.replace(/\\+/g, '_').toLowerCase() + '.aggr.trade'}},[_vm._v(\"https://\"+_vm._s(_vm.pair.replace(/\\+/g, '_').toLowerCase())+\".aggr.trade\")]),_vm._v(\" to hook your settings to \"),_c('strong',[_vm._v(_vm._s(_vm.pair))]),_vm._v(\" indefinitely ! \")]):_vm._e()]),_c('div',{staticClass:\"mb8\"},[_c('div',{staticClass:\"form-group mb8\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"checkbox-control -auto\",attrs:{\"title\":\"Size display preference\"}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.preferQuoteCurrencySize},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_QUOTE_AS_PREFERED_CURRENCY', $event.target.checked)}}}),_c('div',{attrs:{\"on\":\"quote\",\"off\":\"base\"}}),_c('span',[_vm._v(\" Prefer \"),_c('strong',[_vm._v(_vm._s(_vm.preferQuoteCurrencySize ? 'quote' : 'base'))]),_vm._v(\" ( \"),_c('i',{class:_vm.preferQuoteCurrencySize ? 'icon-quote' : 'icon-base'}),_vm._v(\" ) currency \")])])])]),_c('div',{staticClass:\"settings__title\",class:{ closed: _vm.settings.indexOf('list') > -1 },on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'list')}}},[_vm._v(\" Trades list \"),_c('i',{staticClass:\"icon-up\"})]),_c('div',{staticClass:\"mb8\"},[_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"form-group -fill\"},[_c('label',[_vm._v(\" Max rows \"),_c('span',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"icon-info-circle\",attrs:{\"title\":\"Numbers of trades to keep visible\"}})]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"number\",\"min\":\"0\",\"max\":\"1000\",\"step\":\"1\"},domProps:{\"value\":_vm.maxRows},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_MAX_ROWS', $event.target.value)}}})]),_c('div',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"form-group -tight\",attrs:{\"title\":\"Show exchange's logo when available\"}},[_c('label',[_vm._v(\"Logo\")]),_c('label',{staticClass:\"checkbox-control checkbox-control-input flex-right\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.showLogos},on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_LOGOS', $event.target.checked)}}}),_c('div')])]),_c('div',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"form-group -tight\",attrs:{\"title\":\"Toggle aggregation\"}},[_c('label',[_vm._v(\"Aggr.\")]),_c('label',{staticClass:\"checkbox-control -aggr checkbox-control-input flex-right\",on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_AGGREGATION', $event.target.checked)}}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.aggregateTrades}}),_c('div')])]),_c('div',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"form-group -tight\",attrs:{\"title\":\"ONLY show liquidation\"}},[_vm._m(0),_c('label',{staticClass:\"checkbox-control -rip checkbox-control-input flex-right\",on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_LIQUIDATIONS_ONLY', $event.target.checked)}}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.liquidationsOnly}}),_c('div')])]),_c('div',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"form-group -tight\",attrs:{\"title\":_vm.showSlippage === 'price' ? 'Show slippage in $' : _vm.showSlippage === 'bps' ? 'Show slippage in basis point (bps)' : 'Slippage disabled'}},[_c('label',[_vm._v(\"Slipp.\")]),_c('label',{staticClass:\"checkbox-control -slippage checkbox-control-input flex-right\",on:{\"click\":function($event){$event.stopPropagation();return _vm.$store.commit('settings/TOGGLE_SLIPPAGE')}}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.showSlippage}}),_c('div'),(_vm.showSlippage === 'price')?_c('span',[_c('i',{staticClass:\"icon-dollar\"})]):_vm._e(),(_vm.showSlippage === 'bps')?_c('span',[_c('i',{staticClass:\"icon-bps\",staticStyle:{\"font-size\":\"1.5em\"}})]):_vm._e()])])])]),_c('div',{staticClass:\"settings__title\",class:{ closed: _vm.settings.indexOf('thresholds') > -1 },on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'thresholds')}}},[_vm._v(\" Thresholds (\"+_vm._s(_vm.thresholds.length)+\") \"),_c('i',{staticClass:\"icon-up\"})]),_c('div',{staticClass:\"settings-thresholds settings-section mb8\"},[_c('div',{staticClass:\"settings-section__controls\"},[_c('a',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"settings-thresholds__display-toggle\",attrs:{\"href\":\"javascript:void(0);\",\"title\":\"Switch thresholds display\"},on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_THRESHOLDS_TABLE', !_vm.showThresholdsAsTable)}}},[_vm._v(_vm._s(_vm.showThresholdsAsTable ? 'slider' : 'table'))]),_vm._v(\" | \"),_c('a',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"settings-section__add\",attrs:{\"href\":\"javascript:void(0);\",\"title\":\"Add threshold\"},on:{\"click\":function($event){return _vm.$store.commit('settings/ADD_THRESHOLD')}}},[_vm._v(\" Add \"),_c('i',{staticClass:\"icon-add\"})])]),_c('Thresholds',{ref:\"thresholdsComponent\"})],1),_c('div',{staticClass:\"settings__title\",class:{ closed: _vm.settings.indexOf('audio') > -1 },on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'audio')}}},[_vm._v(\" Audio \"),_c('i',{staticClass:\"icon-up\"})]),_c('div',{staticClass:\"settings-audio mb8 -activable column\",class:{ active: _vm.useAudio }},[_c('div',{staticClass:\"form-group -tight\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"checkbox-control -on-off checkbox-control-input flex-right\",attrs:{\"title\":\"Enable audio\"}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.useAudio},on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_AUDIO', $event.target.checked)}}}),_c('div')])]),_c('div',{staticClass:\"form-group -tight\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"checkbox-control checkbox-control-input flex-right\",attrs:{\"title\":\"Include orders down to 10% of significant orders\"}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.audioIncludeInsignificants},on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_AUDIO_TEN_PERCENT', $event.target.checked)}}}),_c('div',{staticClass:\"icon-expand\"})])]),_c('div',{staticClass:\"form-group -fill\"},[_c('input',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'top' }),expression:\"{ placement: 'top' }\"}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"10\",\"step\":\".1\",\"title\":'ajust gain (' + _vm.audioVolume + ')'},domProps:{\"value\":_vm.audioVolume},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_AUDIO_VOLUME', $event.target.value)}}})]),_c('div',{staticClass:\"form-group -fill\"},[_c('input',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'top' }),expression:\"{ placement: 'top' }\"}],attrs:{\"type\":\"range\",\"min\":\".25\",\"max\":\"2.5\",\"step\":\".05\",\"title\":'ajust pitch (' + _vm.audioPitch + ')'},domProps:{\"value\":_vm.audioPitch},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_AUDIO_PITCH', $event.target.value)}}})])]),_c('div',{staticClass:\"settings__title\",class:{ closed: _vm.settings.indexOf('stats') > -1 },on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'stats')}}},[_vm._v(\" Stats \"),_c('i',{staticClass:\"icon-up\"})]),_c('div',{staticClass:\"settings-stats settings-section mb8 -activable column mb8\",class:{ active: _vm.showStats }},[_c('div',{staticClass:\"settings-section__controls\"},[_c('a',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"settings-controls__add\",attrs:{\"href\":\"javascript:void(0);\",\"title\":\"Add a stat\"},on:{\"click\":function($event){_vm.$store.commit('settings/CREATE_STAT'), _vm.openStat(_vm.statsCounters.length - 1)}}},[_vm._v(\" Add \"),_c('i',{staticClass:\"icon-add\"})])]),_c('div',{staticClass:\"form-group -tight\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"checkbox-control -on-off checkbox-control-input flex-right\",attrs:{\"title\":\"Enable stats\"}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.showStats},on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_STATS', $event.target.checked)}}}),_c('div')])]),_c('div',{staticClass:\"form-group -fill\"},[_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"form-group -fill\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"Period (minutes)\"},domProps:{\"value\":_vm.statsPeriodStringified},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_STATS_PERIOD', $event.target.value)}}})]),_c('div',{staticClass:\"form-group -tight\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"checkbox-control checkbox-control-input flex-right\",attrs:{\"title\":\"Enable graph\"}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.statsChart},on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_STATS_CHART', $event.target.checked)}}}),_c('div')])])]),_vm._l((_vm.statsCounters),function(counter,index){return _c('div',{key:index,staticClass:\"column mt8\"},[_c('div',{staticClass:\"form-group -tight\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"checkbox-control -on-off checkbox-control-input flex-right\",attrs:{\"title\":\"Enable counter\"}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":counter.enabled},on:{\"change\":function($event){return _vm.$store.dispatch('settings/updateStat', { index: index, prop: 'enabled', value: $event.target.checked })}}}),_c('div')])]),_c('div',{staticClass:\"form-group -fill -center\"},[_vm._v(\" \"+_vm._s(counter.name)+\" \")]),_c('div',{staticClass:\"form-group -tight\"},[_c('button',{staticClass:\"btn -green\",on:{\"click\":function($event){return _vm.openStat(index)}}},[_c('i',{staticClass:\"icon-edit\"})])])])})],2)]),_c('div',{staticClass:\"settings__title\",class:{ closed: _vm.settings.indexOf('counters') > -1 },on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'counters')}}},[_vm._v(\" Counter \"),_c('i',{staticClass:\"icon-up\"})]),_c('div',{staticClass:\"settings-counters mb8 -activable column\",class:{ active: _vm.showCounters }},[_c('div',{staticClass:\"form-group -tight\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"checkbox-control -on-off checkbox-control-input flex-right\",attrs:{\"title\":\"Enable counters\"}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.showCounters},on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_COUNTERS', $event.target.checked)}}}),_c('div')])]),_c('div',{staticClass:\"form-group -tight\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"checkbox-control -count-or-volume checkbox-control-input flex-right\",attrs:{\"title\":\"Sum amount of trades instead of volume\"}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.countersCount},on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_COUNTERS_COUNT', $event.target.checked)}}}),_c('div')])]),_c('div',{staticClass:\"form-group -fill\"},[_c('input',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"form-control\",attrs:{\"title\":\"Counters step separed by a comma (ie: 1m, 5m, 10m, 15m)\",\"type\":\"string\",\"placeholder\":\"Enter a set of timeframe (ie 1m, 15m)\"},domProps:{\"value\":_vm.countersStepsStringified},on:{\"change\":function($event){return _vm.replaceCounters($event.target.value)}}})])]),_c('div',{staticClass:\"settings__title\",class:{ closed: _vm.settings.indexOf('chart') > -1 },on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'chart')}}},[_vm._v(\" Chart \"),_c('i',{staticClass:\"icon-up\"})]),_c('div',{staticClass:\"settings-chart mb8 -activable column\",class:{ active: _vm.showChart }},[_c('div',{staticClass:\"form-group -tight\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"checkbox-control -on-off checkbox-control-input flex-right\",attrs:{\"title\":\"Enable chart\"}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.showChart},on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_CHART', $event.target.checked)}}}),_c('div')])]),_c('div',{staticClass:\"-fill\"},[_c('div',{staticClass:\"form-group mb8\"},[_c('span',[_vm._v(\" Refresh chart every \"),_c('editable',{attrs:{\"content\":_vm.chartRefreshRate},on:{\"output\":function($event){return _vm.$store.commit('settings/SET_CHART_REFRESH_RATE', $event)}}}),_vm._v(\" ms \")],1)]),_c('div',{staticClass:\"form-group mb8\"},[_c('span',[_c('label',{staticClass:\"checkbox-control flex-left\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":!!_vm.timezoneOffset},on:{\"change\":function($event){_vm.$store.commit('settings/SET_TIMEZONE_OFFSET', !_vm.timezoneOffset ? new Date().getTimezoneOffset() * 60000 * -1 : 0)}}}),_c('div'),_c('span',[_vm._v(\"Show local time\")])])])])])]),_c('div',{staticClass:\"settings__title\",class:{ closed: _vm.settings.indexOf('exchanges') > -1 },on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'exchanges')}}},[_vm._v(\" Exchanges \"),_c('i',{staticClass:\"icon-up\"})]),_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"settings-exchanges\"},[_vm._l((_vm.exchanges),function(exchange,index){return _c('Exchange',{key:index,attrs:{\"exchange\":exchange}})}),(!_vm.exchanges.length)?_c('div',{staticClass:\"mb8\"},[_vm._v(\"You are not connected to any exchanges\")]):_vm._e()],2)]),_c('div',{staticClass:\"settings__title\",class:{ closed: _vm.settings.indexOf('other') > -1 },on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'other')}}},[_vm._v(\" Other \"),_c('i',{staticClass:\"icon-up\"})]),_c('div',{staticClass:\"mb8\"},[_c('div',{staticClass:\"form-group mb8\"},[_c('label',{staticClass:\"checkbox-control\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":!!_vm.decimalPrecision},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_DECIMAL_PRECISION', _vm.decimalPrecision ? null : 2)}}}),_c('div'),_c('span',{on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return $event.currentTarget.children[0].focus()}}},[_vm._v(\" Round up to \"),_c('editable',{attrs:{\"placeholder\":\"auto\",\"content\":_vm.decimalPrecision},on:{\"output\":function($event){return _vm.$store.commit('settings/SET_DECIMAL_PRECISION', $event)}}}),_vm._v(\" decimal(s) \")],1)])]),_c('div',{staticClass:\"form-group mb8\"},[_c('label',{staticClass:\"checkbox-control\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.showExchangesBar},on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_EXCHANGES_BAR', $event.target.checked)}}}),_c('div'),_c('span',[_vm._v(\"Show exchanges bar\")])])])]),_c('div',{staticClass:\"mt15 settings__footer flex-middle\"},[_c('div',{staticClass:\"form-group\"},[(_vm.version)?_c('div',[_c('span',[_vm._v(\" v\"+_vm._s(_vm.version)+\" \"),_c('sup',{staticClass:\"version-date\"},[_vm._v(_vm._s(_vm.buildDate))])]),_c('i',{staticClass:\"divider\"},[_vm._v(\"|\")]),_c('a',{attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":function($event){return _vm.reset()}}},[_vm._v(\"reset\")]),_c('i',{staticClass:\"divider\"},[_vm._v(\"|\")]),_c('a',{attrs:{\"target\":\"_blank\",\"href\":\"https://github.com/Tucsky/SignificantTrades\",\"title\":\"Run your own instance !\"}},[_vm._v(\"github\")]),_c('i',{staticClass:\"divider\"},[_vm._v(\"|\")]),_c('a',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({\n                animateFill: false,\n                interactive: true,\n                theme: 'blue'\n              }),expression:\"{\\n                animateFill: false,\\n                interactive: true,\\n                theme: 'blue'\\n              }\"}],attrs:{\"target\":\"_blank\",\"href\":\"bitcoin:3PK1bBK8sG3zAjPBPD7g3PL14Ndux3zWEz\"}},[_vm._v(\"donate\")])]):_vm._e()])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"condensed\"},[_c('small',[_vm._v(\"Rip only\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"settings-exchange\",class:{\n    '-active': _vm.exchange.connected,\n    '-enabled': !_vm.settings.disabled,\n    '-loading': !_vm.settings.disabled && !_vm.exchange.connected && _vm.exchange.valid,\n    '-error': _vm.exchange.error,\n    '-unmatched': !_vm.exchange.valid,\n    '-invisible': _vm.settings.hidden,\n    '-expanded': _vm.expanded\n  }},[_c('div',{staticClass:\"settings-exchange__header\",on:{\"click\":_vm.toggleExchange}},[(!isNaN(_vm.exchangeMultiplier) && _vm.exchangeMultiplier !== 1)?_c('span',{staticClass:\"settings-exchange__threshold\"},[_vm._v(_vm._s(_vm.$root.formatAmount(_vm.minimumThreshold * _vm.exchangeMultiplier)))]):_vm._e(),_c('div',{staticClass:\"settings-exchange__identity\"},[_c('div',{staticClass:\"settings-exchange__name\"},[_vm._v(_vm._s(_vm.exchange.id.replace('_', ' ')))]),(_vm.exchange.error)?_c('small',{staticClass:\"settings-exchange__error\"},[_vm._v(\" \"+_vm._s(_vm.exchange.error)+\" \")]):_vm._e(),(_vm.exchange.price)?_c('small',{staticClass:\"settings-exchange__price\",domProps:{\"innerHTML\":_vm._s(_vm.$root.formatPrice(_vm.exchange.price))}}):_vm._e()]),_c('div',{staticClass:\"settings-exchange__controls\"},[_c('button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"settings-exchange__visibility\",attrs:{\"title\":_vm.exchange.hidden ? 'Show' : 'Hide (from everything)'},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.$store.commit('settings/TOGGLE_EXCHANGE_VISIBILITY', _vm.exchange.id)}}},[_c('i',{staticClass:\"icon-eye\"})]),_c('button',{staticClass:\"settings-exchange__more\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();_vm.expanded = !_vm.expanded}}},[_c('i',{staticClass:\"icon-down\"})])])]),(_vm.expanded)?_c('div',{staticClass:\"settings-exchange__detail\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"column\",staticStyle:{\"justify-content\":\"space-between\"}},[_c('span',{staticClass:\"condensed\"},[_vm._v(\"Adj. threshold:\")]),(_vm.exchanges[_vm.exchange.id].threshold !== 1)?_c('span',[_vm._v(_vm._s(_vm.$root.formatAmount(_vm.minimumThreshold * _vm.exchangeMultiplier)))]):_vm._e()]),_c('slider',{attrs:{\"step\":0.0001,\"min\":0,\"max\":2,\"value\":_vm.exchanges[_vm.exchange.id].threshold},on:{\"reset\":function($event){return _vm.$store.commit('settings/SET_EXCHANGE_THRESHOLD', {\n            exchange: _vm.exchange.id,\n            threshold: 1\n          })},\"output\":function($event){return _vm.$store.commit('settings/SET_EXCHANGE_THRESHOLD', {\n            exchange: _vm.exchange.id,\n            threshold: $event\n          })}}})],1),(_vm.exchange.indexedProducts.length)?_c('div',{staticClass:\"form-group mt8\"},[(_vm.canRefreshProducts)?_c('button',{staticClass:\"btn -red -small\",on:{\"click\":_vm.refreshProducts}},[_vm._v(\" Refresh products (\"+_vm._s(_vm.exchange.indexedProducts.length)+\") \")]):_vm._e()]):_vm._e()]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"settings-exchange\"\n    :class=\"{\n      '-active': exchange.connected,\n      '-enabled': !settings.disabled,\n      '-loading': !settings.disabled && !exchange.connected && exchange.valid,\n      '-error': exchange.error,\n      '-unmatched': !exchange.valid,\n      '-invisible': settings.hidden,\n      '-expanded': expanded\n    }\"\n  >\n    <div class=\"settings-exchange__header\" @click=\"toggleExchange\">\n      <span v-if=\"!isNaN(exchangeMultiplier) && exchangeMultiplier !== 1\" class=\"settings-exchange__threshold\">{{\n        $root.formatAmount(minimumThreshold * exchangeMultiplier)\n      }}</span>\n      <div class=\"settings-exchange__identity\">\n        <div class=\"settings-exchange__name\">{{ exchange.id.replace('_', ' ') }}</div>\n        <small class=\"settings-exchange__error\" v-if=\"exchange.error\">\n          {{ exchange.error }}\n        </small>\n        <small class=\"settings-exchange__price\" v-if=\"exchange.price\" v-html=\"$root.formatPrice(exchange.price)\"></small>\n      </div>\n      <div class=\"settings-exchange__controls\">\n        <button\n          class=\"settings-exchange__visibility\"\n          v-tippy\n          :title=\"exchange.hidden ? 'Show' : 'Hide (from everything)'\"\n          @click.stop.prevent=\"$store.commit('settings/TOGGLE_EXCHANGE_VISIBILITY', exchange.id)\"\n        >\n          <i class=\"icon-eye\"></i>\n        </button>\n        <button class=\"settings-exchange__more\" @click.stop.prevent=\"expanded = !expanded\">\n          <i class=\"icon-down\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"settings-exchange__detail\" v-if=\"expanded\">\n      <div class=\"form-group\">\n        <label class=\"column\" style=\"justify-content:space-between\">\n          <span class=\"condensed\">Adj. threshold:</span>\n          <span v-if=\"exchanges[exchange.id].threshold !== 1\">{{ $root.formatAmount(minimumThreshold * exchangeMultiplier) }}</span>\n        </label>\n        <slider\n          :step=\"0.0001\"\n          :min=\"0\"\n          :max=\"2\"\n          :value=\"exchanges[exchange.id].threshold\"\n          @reset=\"\n            $store.commit('settings/SET_EXCHANGE_THRESHOLD', {\n              exchange: exchange.id,\n              threshold: 1\n            })\n          \"\n          @output=\"\n            $store.commit('settings/SET_EXCHANGE_THRESHOLD', {\n              exchange: exchange.id,\n              threshold: $event\n            })\n          \"\n        />\n      </div>\n      <div v-if=\"exchange.indexedProducts.length\" class=\"form-group mt8\">\n        <button v-if=\"canRefreshProducts\" class=\"btn -red -small\" @click=\"refreshProducts\">\n          Refresh products ({{ exchange.indexedProducts.length }})\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nexport default {\n  data() {\n    return {\n      canRefreshProducts: true,\n      expanded: false\n    }\n  },\n  props: ['exchange'],\n  computed: {\n    ...mapState('settings', ['pair', 'exchanges']),\n    settings() {\n      return this.$store.state.settings.exchanges[this.exchange.id]\n    },\n    minimumThreshold() {\n      return this.$store.state.settings.thresholds[0].amount\n    },\n    exchangeMultiplier() {\n      return typeof this.$store.state.settings.exchanges[this.exchange.id].threshold === 'undefined'\n        ? 1\n        : this.$store.state.settings.exchanges[this.exchange.id].threshold\n    }\n  },\n  methods: {\n    toggleExchange() {\n      if (!this.settings.disabled) {\n        this.exchange.disconnect()\n\n        this.$store.commit('settings/DISABLE_EXCHANGE', this.exchange.id)\n      } else {\n        this.exchange.connect(this.pair)\n\n        this.$store.commit('settings/ENABLE_EXCHANGE', this.exchange.id)\n      }\n    },\n    refreshProducts() {\n      this.canRefreshProducts = false\n\n      setTimeout(() => {\n        this.canRefreshProducts = true\n      }, 3000)\n\n      this.exchange.refreshProducts().then(() => {\n        this.exchange.pair = this.pair\n        this.exchange.connect()\n        this.$store.dispatch('app/showNotice', {\n          type: 'success',\n          title: `${this.exchange.id}'s products refreshed`\n        })\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.settings-exchange {\n  background-color: rgba(white, 0.15);\n  color: white;\n  transition: all 0.2s $easeOutExpo;\n  border-radius: 2px;\n  margin-bottom: 8px;\n  flex-basis: calc(50% - 4px);\n  max-width: calc(50% - 4px);\n\n  &:nth-child(odd) {\n    margin-right: 8px;\n  }\n\n  &.-loading {\n    background-color: $blue;\n\n    .settings-exchange__header:before {\n      transition: all 0.2s $easeElastic;\n      display: block;\n      opacity: 1;\n      width: 16px;\n      height: 16px;\n    }\n  }\n\n  &.-enabled {\n    .settings-exchange__threshold {\n      display: block;\n    }\n\n    .settings-exchange__name:before {\n      width: 0%;\n    }\n  }\n\n  &.-active {\n    background-color: $green;\n    color: white;\n\n    .settings-exchange__visibility {\n      display: flex;\n    }\n\n    &.-invisible {\n      .icon-visibility:before {\n        transform: scale(1.2) rotateY(180deg);\n      }\n    }\n  }\n\n  &.-invisible {\n    opacity: 0.8;\n\n    .icon-eye:before {\n      content: unicode($icon-eye-crossed);\n    }\n  }\n\n  &.-error {\n    background-color: $red;\n\n    .icon-warning {\n      display: block;\n      margin-left: 5px;\n    }\n  }\n\n  &.-unmatched {\n    background-color: #555;\n\n    color: rgba(white, 0.75);\n  }\n\n  &.-expanded {\n    .settings-exchange__more i:before {\n      content: unicode($icon-up);\n    }\n  }\n}\n\n.settings-exchange__identity {\n  position: relative;\n  margin: 0px 10px;\n  display: flex;\n  flex-direction: column;\n  height: 40px;\n  justify-content: center;\n}\n\n.settings-exchange__name {\n  position: relative;\n  margin-right: auto;\n\n  .icon-line-chart {\n    position: absolute;\n    right: -1.5em;\n    top: 0.05em;\n  }\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: calc(50% - 0px);\n    height: 1px;\n    background-color: white;\n    transition: width 0.2s $easeOutExpo 0.2s;\n    left: -2px;\n    width: calc(100% + 4px);\n  }\n}\n\n.settings-exchange__price {\n  opacity: 0.8;\n}\n\n.settings-exchange__threshold {\n  display: none;\n  position: absolute;\n  top: -0.5em;\n  right: -0.5em;\n  pointer-events: none;\n  font-size: 90%;\n  background-color: $blue;\n  border-radius: 2px;\n  color: white;\n  padding: 0.1em 0.2em;\n  box-shadow: 0 0 0 1px rgba(black, 0.2);\n}\n\n.settings-exchange__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  cursor: pointer;\n\n  &:before {\n    content: '';\n    width: 0px;\n    height: 0px;\n\n    background-color: #fff;\n    border-radius: 50%;\n    animation: circle-scaleout 1s infinite ease-in-out;\n    transition: all 0.2s $easeElastic, visibility 0.2s linear 0.2s;\n    left: 3px;\n    display: none;\n    align-self: center;\n    position: relative;\n\n    opacity: 0;\n\n    @keyframes circle-scaleout {\n      0% {\n        -webkit-transform: scale(0);\n        transform: scale(0);\n      }\n      100% {\n        -webkit-transform: scale(1);\n        transform: scale(1);\n        opacity: 0;\n      }\n    }\n  }\n\n  .icon-warning {\n    display: none;\n  }\n}\n\n.settings-exchange__controls {\n  display: flex;\n  margin-left: auto;\n  align-self: stretch;\n\n  .settings-exchange__visibility {\n    display: none;\n  }\n\n  button {\n    border: 0;\n    background: none;\n    cursor: pointer;\n    color: white;\n    font-size: 18px;\n    display: flex;\n    align-items: center;\n\n    &:hover {\n      background-color: rgba(white, 0.1);\n    }\n  }\n}\n\n.settings-exchange__detail {\n  padding: 10px;\n  background-color: rgba(black, 0.25);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exchange.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exchange.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Exchange.vue?vue&type=template&id=87b81b72&\"\nimport script from \"./Exchange.vue?vue&type=script&lang=js&\"\nexport * from \"./Exchange.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Exchange.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"thresholds\",class:{ '-dragging': _vm.dragging, '-rendering': _vm.rendering }},[(_vm.picking !== null)?_c('verte',{ref:\"picker\",style:({ opacity: 0, position: 'absolute' }),attrs:{\"display\":\"widget\",\"draggable\":true,\"picker\":\"square\",\"model\":\"rgb\",\"colorHistory\":_vm.colors,\"value\":_vm.thresholds[_vm.picking.index][_vm.picking.side]},on:{\"input\":_vm.updateColor}}):_vm._e(),(_vm.showThresholdsAsTable)?_c('table',{staticClass:\"thresholds-table\"},_vm._l((_vm.thresholds),function(threshold,index){return _c('tr',{key:(\"threshold-\" + index)},[_c('td',{staticClass:\"thresholds-table__input\"},[_c('input',{attrs:{\"type\":\"number\",\"placeholder\":\"Amount*\"},domProps:{\"value\":_vm.thresholds[index].amount},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_THRESHOLD_AMOUNT', {\n              index: index,\n              value: $event.target.value\n            })}}}),_c('i',{staticClass:\"icon icon-currency\"})]),_c('td',{staticClass:\"thresholds-table__input\"},[_c('input',{attrs:{\"type\":\"text\",\"placeholder\":\"Giphy\"},domProps:{\"value\":_vm.thresholds[index].gif},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_THRESHOLD_GIF', {\n              index: index,\n              value: $event.target.value\n            })}}})]),_c('td',{staticClass:\"thresholds-table__color\",style:({ backgroundColor: _vm.thresholds[index].buyColor }),on:{\"click\":function($event){return _vm.openPicker('buyColor', index, $event)}}}),_c('td',{staticClass:\"thresholds-table__color\",style:({ backgroundColor: _vm.thresholds[index].sellColor }),on:{\"click\":function($event){return _vm.openPicker('sellColor', index, $event)}}}),_c('td',{staticClass:\"thresholds-table__delete\",on:{\"click\":function($event){return _vm.deleteThreshold(index)}}},[_c('i',{staticClass:\"icon-cross\"})])])}),0):_c('div',{staticClass:\"thresholds-slider\"},[_c('div',{staticClass:\"thresholds-gradients\"},[_c('div',{ref:\"buysGradient\",staticClass:\"thresholds-gradients__buys\"}),_c('div',{ref:\"sellsGradient\",staticClass:\"thresholds-gradients__sells\"})]),_c('div',{ref:\"thresholdContainer\",staticClass:\"thresholds-slider__bar\"},_vm._l((_vm.thresholds),function(threshold,index){return _c('div',{key:(\"threshold-\" + index),staticClass:\"thresholds-slider__handler\",class:{ '-selected': _vm.selectedIndex === index },attrs:{\"data-amount\":_vm.$root.formatAmount(threshold.amount, 2)}})}),0),(_vm.selectedIndex !== null)?_c('div',{ref:\"thresholdPanel\",staticClass:\"threshold-panel\",class:{ '-minimum': _vm.selectedIndex === 0 },style:({\n        transform: 'translateX(' + this.panelOffsetPosition + 'px)'\n      }),on:{\"click\":function($event){_vm.editing = true}}},[_c('div',{staticClass:\"threshold-panel__caret\",style:({\n          transform: 'translateX(' + this.panelCaretPosition + 'px)'\n        })}),_c('a',{staticClass:\"threshold-panel__close icon-cross\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){;(_vm.selectedIndex = null), (_vm.editing = false), (_vm.picking = null)}}}),_c('h3',[_vm._v(\" if amount > \"),_c('editable',{attrs:{\"content\":_vm.thresholds[_vm.selectedIndex].amount},on:{\"output\":function($event){return _vm.$store.commit('settings/SET_THRESHOLD_AMOUNT', {\n              index: _vm.selectedIndex,\n              value: $event\n            })}}})],1),_c('div',{staticClass:\"form-group mb8 threshold-panel__gif\"},[_c('label',[_vm._v(\"Show themed gif\")]),_vm._m(0),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":_vm.thresholds[_vm.selectedIndex].gif},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_THRESHOLD_GIF', {\n              index: _vm.selectedIndex,\n              value: $event.target.value\n            })}}})]),_c('div',{staticClass:\"form-group mb8 threshold-panel__colors\"},[_c('label',[_vm._v(\"Custom colors\")]),_c('small',{staticClass:\"help-text\"},[_vm._v(\"Will show colored line\")]),_c('div',{staticClass:\"column\"},[_c('div',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"form-group\",attrs:{\"title\":\"When buy\"}},[_c('input',{staticClass:\"form-control\",style:({ backgroundColor: _vm.thresholds[_vm.selectedIndex].buyColor }),attrs:{\"type\":\"text\"},domProps:{\"value\":_vm.thresholds[_vm.selectedIndex].buyColor},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_THRESHOLD_COLOR', {\n                  index: _vm.selectedIndex,\n                  side: 'buyColor',\n                  value: $event.target.value\n                })},\"click\":function($event){return _vm.openPicker('buyColor', _vm.selectedIndex, $event)}}})]),_c('div',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"form-group\",attrs:{\"title\":\"When sell\"}},[_c('input',{staticClass:\"form-control\",style:({\n                backgroundColor: _vm.thresholds[_vm.selectedIndex].sellColor\n              }),attrs:{\"type\":\"text\"},domProps:{\"value\":_vm.thresholds[_vm.selectedIndex].sellColor},on:{\"change\":function($event){return _vm.$store.commit('settings/SET_THRESHOLD_COLOR', {\n                  index: _vm.selectedIndex,\n                  side: 'sellColor',\n                  value: $event.target.value\n                })},\"click\":function($event){return _vm.openPicker('sellColor', _vm.selectedIndex, $event)}}})])])])]):_vm._e()])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('small',{staticClass:\"help-text\"},[_vm._v(\" Random gif based on \"),_c('a',{attrs:{\"href\":\"https://gfycat.com\",\"target\":\"_blank\"}},[_vm._v(\"Gifycat\")]),_vm._v(\" keyword \")])}]\n\nexport { render, staticRenderFns }","export const PALETTE = [\n  '#F44336',\n  '#FF9800',\n  '#ffeb3b',\n  '#4caf50',\n  '#009688',\n  '#00bcd4',\n  '#2196F3',\n  '#673ab7',\n  '#9c27b0',\n  '#e91e63',\n  '#FFCDD2',\n  '#FFE0B2',\n  '#FFF9C4',\n  '#C8E6C9',\n  '#B2DFDB',\n  '#B2EBF2',\n  '#BBDEFB',\n  '#D1C4E9',\n  '#E1BEE7',\n  '#F8BBD0',\n  '#ef9a9a',\n  '#FFCC80',\n  '#FFF59D',\n  '#A5D6A7',\n  '#80cbc4',\n  '#80DEEA',\n  '#90CAF9',\n  '#B39DDB',\n  '#CE93D8',\n  '#f48fb1',\n  '#E57373',\n  '#ffb74d',\n  '#FFF176',\n  '#81c784',\n  '#4db6ac',\n  '#4dd0e1',\n  '#64B5F6',\n  '#9575cd',\n  '#ba68c8',\n  '#f06292',\n  '#EF5350',\n  '#FFA726',\n  '#ffee58',\n  '#66BB6A',\n  '#26a69a',\n  '#26c6da',\n  '#42A5F5',\n  '#7e57c2',\n  '#ab47bc',\n  '#ec407a',\n  '#D32F2F',\n  '#F57C00',\n  '#fbc02d',\n  '#388e3c',\n  '#00796b',\n  '#0097A7',\n  '#1976D2',\n  '#512da8',\n  '#7b1fa2',\n  '#C2185B',\n  '#B71C1C',\n  '#e65100',\n  '#F57F17',\n  '#1B5E20',\n  '#004D40',\n  '#006064',\n  '#0d47a1',\n  '#311B92',\n  '#4A148C',\n  '#880e4f'\n]\n\nexport function getColor(except = []) {\n  let color\n\n  while (!color || except.indexOf(color) !== -1) {\n    color = PALETTE[Math.floor(Math.random() * PALETTE.length)]\n  }\n\n  return color\n}\n\nexport function getColorByWeight(a, b, weight) {\n  var p = weight\n  var w = p * 2 - 1\n  var w1 = (w / 1 + 1) / 2\n  var w2 = 1 - w1\n  var rgb = [Math.round(b[0] * w1 + a[0] * w2), Math.round(b[1] * w1 + a[1] * w2), Math.round(b[2] * w1 + a[2] * w2)]\n  return rgb\n}\n\nwindow.getColorByWeight = getColorByWeight\n\nexport function rgbaToRgb(color, backgroundColor) {\n  const alpha = 1 - color[3]\n\n  color[0] = Math.round((color[3] * (color[0] / 255) + alpha * (backgroundColor[0] / 255)) * 255)\n  color[1] = Math.round((color[3] * (color[1] / 255) + alpha * (backgroundColor[1] / 255)) * 255)\n  color[2] = Math.round((color[3] * (color[2] / 255) + alpha * (backgroundColor[2] / 255)) * 255)\n  color.splice(3, 1)\n\n  return color\n}\n\nexport function hexToRgb(hex) {\n  var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i\n  hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n    return r + r + g + g + b + b\n  })\n\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n  return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)] : null\n}\n\nexport function getColorLuminance(color, backgroundColor) {\n  if (typeof color[3] !== 'undefined' && backgroundColor) {\n    color = rgbaToRgb(color, backgroundColor)\n  }\n\n  return Math.sqrt(color[0] * color[0] * 0.241 + color[1] * color[1] * 0.691 + color[2] * color[2] * 0.068)\n}\n\nexport function splitRgba(string, backgroundColor) {\n  const match = string.match(/rgba?\\((\\d+)[\\s,]*(\\d+)[\\s,]*(\\d+)(?:[\\s,]*([\\d.]+))?\\)/)\n\n  let color = [+match[1], +match[2], +match[3]]\n\n  if (typeof match[4] !== 'undefined') {\n    color.push(+match[4])\n\n    if (backgroundColor) {\n      color = rgbaToRgb(color, backgroundColor)\n    }\n  }\n\n  return color\n}\n\nexport function getAppBackgroundColor() {\n  let color = getComputedStyle(document.getElementById('app')).backgroundColor\n\n  if (color.indexOf('#') !== -1) {\n    color = hexToRgb(color)\n  } else {\n    color = splitRgba(color)\n  }\n\n  return color\n}\n\nexport function getLogShade(color, percent) {\n  const r = Math.round\n  const [a, b, c, d] = color\n  var P = percent < 0\n  var t = P ? 0 : percent * 255 ** 2\n  P = P ? 1 + percent : 1 - percent\n  return (\n    'rgb' + (d ? 'a(' : '(') + r((P * a ** 2 + t) ** 0.5) + ',' + r((P * b ** 2 + t) ** 0.5) + ',' + r((P * c ** 2 + t) ** 0.5) + (d ? ',' + d : ')')\n  )\n}\n","<template>\n  <div class=\"thresholds\" :class=\"{ '-dragging': dragging, '-rendering': rendering }\">\n    <verte\n      v-if=\"picking !== null\"\n      :style=\"{ opacity: 0, position: 'absolute' }\"\n      display=\"widget\"\n      :draggable=\"true\"\n      ref=\"picker\"\n      picker=\"square\"\n      model=\"rgb\"\n      :colorHistory=\"colors\"\n      :value=\"thresholds[picking.index][picking.side]\"\n      @input=\"updateColor\"\n    ></verte>\n    <table class=\"thresholds-table\" v-if=\"showThresholdsAsTable\">\n      <tr v-for=\"(threshold, index) in thresholds\" :key=\"`threshold-${index}`\">\n        <td class=\"thresholds-table__input\">\n          <input\n            type=\"number\"\n            placeholder=\"Amount*\"\n            :value=\"thresholds[index].amount\"\n            @change=\"\n              $store.commit('settings/SET_THRESHOLD_AMOUNT', {\n                index: index,\n                value: $event.target.value\n              })\n            \"\n          />\n          <i class=\"icon icon-currency\"></i>\n        </td>\n        <td class=\"thresholds-table__input\">\n          <input\n            type=\"text\"\n            placeholder=\"Giphy\"\n            :value=\"thresholds[index].gif\"\n            @change=\"\n              $store.commit('settings/SET_THRESHOLD_GIF', {\n                index: index,\n                value: $event.target.value\n              })\n            \"\n          />\n        </td>\n        <td\n          class=\"thresholds-table__color\"\n          :style=\"{ backgroundColor: thresholds[index].buyColor }\"\n          @click=\"openPicker('buyColor', index, $event)\"\n        ></td>\n        <td\n          class=\"thresholds-table__color\"\n          :style=\"{ backgroundColor: thresholds[index].sellColor }\"\n          @click=\"openPicker('sellColor', index, $event)\"\n        ></td>\n        <td class=\"thresholds-table__delete\" @click=\"deleteThreshold(index)\">\n          <i class=\"icon-cross\"></i>\n        </td>\n      </tr>\n    </table>\n\n    <div class=\"thresholds-slider\" v-else>\n      <div class=\"thresholds-gradients\">\n        <div class=\"thresholds-gradients__buys\" ref=\"buysGradient\"></div>\n        <div class=\"thresholds-gradients__sells\" ref=\"sellsGradient\"></div>\n      </div>\n\n      <div class=\"thresholds-slider__bar\" ref=\"thresholdContainer\">\n        <div\n          v-for=\"(threshold, index) in thresholds\"\n          :key=\"`threshold-${index}`\"\n          class=\"thresholds-slider__handler\"\n          :class=\"{ '-selected': selectedIndex === index }\"\n          :data-amount=\"$root.formatAmount(threshold.amount, 2)\"\n        ></div>\n      </div>\n      <div\n        class=\"threshold-panel\"\n        v-if=\"selectedIndex !== null\"\n        @click=\"editing = true\"\n        ref=\"thresholdPanel\"\n        :class=\"{ '-minimum': selectedIndex === 0 }\"\n        :style=\"{\n          transform: 'translateX(' + this.panelOffsetPosition + 'px)'\n        }\"\n      >\n        <div\n          class=\"threshold-panel__caret\"\n          :style=\"{\n            transform: 'translateX(' + this.panelCaretPosition + 'px)'\n          }\"\n        ></div>\n        <a href=\"#\" class=\"threshold-panel__close icon-cross\" @click=\";(selectedIndex = null), (editing = false), (picking = null)\"></a>\n        <h3>\n          if amount >\n          <editable\n            :content=\"thresholds[selectedIndex].amount\"\n            @output=\"\n              $store.commit('settings/SET_THRESHOLD_AMOUNT', {\n                index: selectedIndex,\n                value: $event\n              })\n            \"\n          ></editable>\n        </h3>\n        <div class=\"form-group mb8 threshold-panel__gif\">\n          <label>Show themed gif</label>\n          <small class=\"help-text\">\n            Random gif based on\n            <a href=\"https://gfycat.com\" target=\"_blank\">Gifycat</a>\n            keyword\n          </small>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            :value=\"thresholds[selectedIndex].gif\"\n            @change=\"\n              $store.commit('settings/SET_THRESHOLD_GIF', {\n                index: selectedIndex,\n                value: $event.target.value\n              })\n            \"\n          />\n        </div>\n        <div class=\"form-group mb8 threshold-panel__colors\">\n          <label>Custom colors</label>\n          <small class=\"help-text\">Will show colored line</small>\n          <div class=\"column\">\n            <div class=\"form-group\" title=\"When buy\" v-tippy=\"{ placement: 'bottom' }\">\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                :value=\"thresholds[selectedIndex].buyColor\"\n                :style=\"{ backgroundColor: thresholds[selectedIndex].buyColor }\"\n                @change=\"\n                  $store.commit('settings/SET_THRESHOLD_COLOR', {\n                    index: selectedIndex,\n                    side: 'buyColor',\n                    value: $event.target.value\n                  })\n                \"\n                @click=\"openPicker('buyColor', selectedIndex, $event)\"\n              />\n            </div>\n            <div class=\"form-group\" title=\"When sell\" v-tippy=\"{ placement: 'bottom' }\">\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                :value=\"thresholds[selectedIndex].sellColor\"\n                :style=\"{\n                  backgroundColor: thresholds[selectedIndex].sellColor\n                }\"\n                @change=\"\n                  $store.commit('settings/SET_THRESHOLD_COLOR', {\n                    index: selectedIndex,\n                    side: 'sellColor',\n                    value: $event.target.value\n                  })\n                \"\n                @click=\"openPicker('sellColor', selectedIndex, $event)\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nimport { TOUCH_SUPPORTED } from '../utils/constants'\nimport { formatPrice } from '../utils/helpers'\nimport { PALETTE } from '../utils/colors'\n\nexport default {\n  data() {\n    return {\n      rendering: true,\n      dragging: null,\n      picking: null,\n      editing: null,\n      selectedIndex: null,\n      selectedElement: null,\n      panelCaretPosition: 0,\n      panelOffsetPosition: 0\n    }\n  },\n\n  computed: {\n    ...mapState('settings', ['thresholds', 'showThresholdsAsTable', 'preferQuoteCurrencySize']),\n    colors: () => PALETTE\n  },\n\n  created() {\n    this.onStoreMutation = this.$store.subscribe(mutation => {\n      switch (mutation.type) {\n        case 'settings/TOGGLE_SETTINGS_PANEL':\n        case 'settings/TOGGLE_THRESHOLDS_TABLE':\n          if (this.picking) {\n            this.closePicker(event)\n          }\n\n          if (\n            (mutation.type === 'settings/TOGGLE_SETTINGS_PANEL' && mutation.payload === 'thresholds') ||\n            (mutation.type === 'settings/TOGGLE_THRESHOLDS_TABLE' && mutation.payload === false)\n          ) {\n            this.rendering = true\n\n            setTimeout(() => {\n              this.refreshHandlers()\n              this.refreshGradients()\n            }, 100)\n          }\n          break\n        case 'settings/SET_THRESHOLD_AMOUNT':\n          this.reorderThresholds()\n          this.refreshHandlers()\n          break\n        case 'settings/SET_THRESHOLD_COLOR':\n          this.refreshGradients()\n          break\n        case 'settings/ADD_THRESHOLD':\n          this.refreshHandlers()\n          break\n      }\n    })\n  },\n\n  mounted() {\n    if (!this.showThresholdsAsTable) {\n      this.refreshHandlers()\n      this.refreshGradients()\n    }\n\n    this._startDrag = this.startDrag.bind(this)\n\n    this.$el.addEventListener(TOUCH_SUPPORTED ? 'touchstart' : 'mousedown', this._startDrag, false)\n\n    this._doDrag = this.doDrag.bind(this)\n\n    window.addEventListener(TOUCH_SUPPORTED ? 'touchmove' : 'mousemove', this._doDrag, false)\n\n    this._endDrag = this.endDrag.bind(this)\n\n    window.addEventListener(TOUCH_SUPPORTED ? 'touchend' : 'mouseup', this._endDrag, false)\n\n    this._doResize = this.refreshHandlers.bind(this)\n\n    window.addEventListener('resize', this._doResize, false)\n  },\n\n  beforeDestroy() {\n    window.removeEventListener(TOUCH_SUPPORTED ? 'touchmove' : 'mousemove', this._doDrag)\n    window.removeEventListener(TOUCH_SUPPORTED ? 'touchend' : 'mouseup', this._endDrag)\n    window.removeEventListener('resize', this._doResize)\n\n    this.onStoreMutation()\n  },\n\n  methods: {\n    startDrag(event) {\n      if (!event.target.classList.contains('thresholds-slider__handler')) {\n        return\n      }\n\n      let x = event.pageX\n\n      if (event.touches && event.touches.length) {\n        x = event.touches[0].pageX\n      }\n\n      this.selectedIndex = Array.prototype.slice.call(event.target.parentNode.children).indexOf(event.target)\n\n      if (this.selectedIndex > -1) {\n        this.selectedElement = event.target\n      }\n\n      setTimeout(this.refreshCaretPosition.bind(this, event.target))\n\n      this.dragStartedAt = {\n        timestamp: +new Date(),\n        position: x\n      }\n    },\n\n    doDrag(event) {\n      let x = event.pageX\n\n      if (event.touches && event.touches.length) {\n        x = event.touches[0].pageX\n      }\n\n      if (\n        this.selectedElement === null ||\n        !this.dragStartedAt ||\n        (new Date() - this.dragStartedAt.timestamp < 1000 && Math.abs(this.dragStartedAt.position - x) < 3)\n      ) {\n        return\n      }\n\n      this.dragging = true\n\n      const minLog = Math.max(0, Math.log(this.minimum + 1) || 0)\n      const minLeft = (minLog / Math.log(this.maximum + 1)) * this.width\n\n      let left = Math.max((this.width / 3) * -1, Math.min(this.width * 1.5, x - this.offsetLeft))\n      let amount = Math.exp(((minLeft + (left / this.width) * (this.width - minLeft)) / this.width) * Math.log(this.maximum + 1)) - 1\n\n      if (x < this.offsetLeft) {\n        amount = this.thresholds[this.selectedIndex].amount - (this.thresholds[this.selectedIndex].amount - amount) * 0.1\n        left = 0\n      } else if (x > this.offsetLeft + this.width) {\n        amount = this.thresholds[this.selectedIndex].amount - (this.thresholds[this.selectedIndex].amount - amount) * 0.1\n        left = this.width\n      }\n\n      if (amount < 0) {\n        amount = 0\n      }\n\n      this.selectedElement.style.transform = 'translateX(' + left + 'px)'\n\n      this.refreshCaretPosition()\n\n      this.thresholds[this.selectedIndex].amount = +formatPrice(amount)\n    },\n\n    endDrag(event) {\n      if (this.selectedElement) {\n        if (this.dragging) {\n          this.$store.commit('settings/SET_THRESHOLD_AMOUNT', {\n            index: this.selectedIndex,\n            value: this.thresholds[this.selectedIndex].amount\n          })\n        }\n\n        if (this.picking) {\n          this.closePicker(event)\n        }\n\n        this.selectedElement = null\n\n        this.reorderThresholds()\n        this.refreshHandlers()\n        this.refreshGradients()\n      }\n\n      this.dragging = false\n    },\n\n    refreshHandlers() {\n      const amounts = this.thresholds.map(threshold => threshold.amount)\n\n      this.minimum = this.thresholds[0].amount\n      this.maximum = Math.max.apply(null, amounts)\n\n      if (this.showThresholdsAsTable) {\n        return\n      }\n\n      const bounds = this.$refs.thresholdContainer.getBoundingClientRect()\n\n      this.offsetTop = bounds.top\n      this.offsetLeft = bounds.left\n      this.width = this.$refs.thresholdContainer.clientWidth\n\n      const handlers = this.$refs.thresholdContainer.children\n\n      const minLog = Math.max(0, Math.log(this.minimum + 1) || 0)\n      const maxLog = Math.log(this.maximum + 1) - minLog\n\n      for (let i = 0; i < this.thresholds.length; i++) {\n        const handler = handlers[i]\n        const threshold = this.thresholds[i]\n        const posLog = Math.log(threshold.amount + 1) - minLog\n        const posPx = this.width * (posLog / maxLog)\n\n        handler.style.transform = 'translateX(' + posPx + 'px)'\n      }\n\n      this.rendering = false\n    },\n\n    refreshCaretPosition(selectedElement = this.selectedElement) {\n      const left = parseFloat(selectedElement.style.transform.replace(/[^\\d.]/g, '')) || 0\n      const panelWidth = this.$refs.thresholdPanel.clientWidth\n      const caretMargin = 12\n      const panelRange = (this.width - panelWidth) / 2 + caretMargin\n\n      this.panelOffsetPosition = -panelRange + panelRange * 2 * (left / this.width)\n      this.panelCaretPosition = caretMargin + (panelWidth - caretMargin * 2) * (left / this.width)\n    },\n\n    refreshGradients() {\n      if (this.showThresholdsAsTable) {\n        return\n      }\n\n      const minLog = Math.max(0, Math.log(this.minimum + 1) || 0)\n      const maxLog = Math.log(this.maximum + 1)\n\n      let buysStops = []\n      let sellsStops = []\n\n      for (let i = 0; i < this.thresholds.length; i++) {\n        const percent =\n          i === 0\n            ? 0\n            : i === this.thresholds.length - 1\n            ? 100\n            : (((Math.log(this.thresholds[i].amount + 1) - minLog) / (maxLog - minLog)) * 100).toFixed(2)\n\n        buysStops.push(`${this.thresholds[i].buyColor} ${percent}%`)\n        sellsStops.push(`${this.thresholds[i].sellColor} ${percent}%`)\n      }\n\n      this.$refs.buysGradient.style.backgroundImage = `linear-gradient(to right, ${buysStops.join(', ')})`\n      this.$refs.sellsGradient.style.backgroundImage = `linear-gradient(to right, ${sellsStops.join(', ')})`\n    },\n\n    reorderThresholds() {\n      let selectedThreshold\n\n      if (this.selectedIndex !== null) {\n        selectedThreshold = this.thresholds[this.selectedIndex]\n      }\n\n      this.$store.state.thresholds = this.thresholds.sort((a, b) => a.amount - b.amount)\n\n      if (selectedThreshold) {\n        for (let i = 0; i < this.thresholds.length; i++) {\n          if (selectedThreshold.amount === this.thresholds[i].amount && selectedThreshold.gif === this.thresholds[i].gif) {\n            this.selectedIndex = i\n          }\n        }\n      }\n    },\n\n    deleteThreshold(index) {\n      if (this.thresholds.length <= 2) {\n        return\n      }\n\n      this.$store.commit('settings/DELETE_THRESHOLD', index)\n    },\n\n    openPicker(side, index, event) {\n      if (this.picking && this.picking.index === index && this.picking.side === side) {\n        return this.closePicker(event)\n      }\n\n      if (!this.thresholds[index][side]) {\n        this.$store.commit('settings/SET_THRESHOLD_COLOR', {\n          index: index,\n          side: side,\n          value: '#ffffff'\n        })\n      }\n\n      if (this.picking) {\n        this.picking.target.classList.remove('-active')\n      }\n\n      this.picking = { side, index, target: event.target }\n\n      this.picking.target.classList.add('-active')\n\n      setTimeout(() => {\n        const containerBounds = this.$el.getBoundingClientRect()\n        const targetBounds = event.target.getBoundingClientRect()\n\n        let left = Math.max(\n          8,\n          Math.min(\n            this.$el.clientWidth - this.$refs.picker.$el.clientWidth - 8,\n            targetBounds.left + targetBounds.width - containerBounds.left - this.$refs.picker.$el.clientWidth\n          )\n        )\n        let top = targetBounds.top - containerBounds.top + event.target.clientHeight * 1.3\n\n        this.$refs.picker.$el.style.top = top + 'px'\n        this.$refs.picker.$el.style.left = left + 'px'\n        this.$refs.picker.$el.style.position = 'absolute'\n        this.$refs.picker.$el.style.opacity = 1\n        this.$refs.picker.$el.style.zIndex = 10\n\n        this.$refs.picker.fieldsIndex = 1\n      }, 100)\n\n      event.stopPropagation()\n\n      if (!this._clickOutsideHandler) {\n        this._clickOutsideHandler = (event => {\n          if (!this.$refs.picker.$el.contains(event.target)) {\n            this.closePicker()\n          }\n        }).bind(this)\n\n        document.addEventListener('mousedown', this._clickOutsideHandler)\n      }\n    },\n\n    closePicker() {\n      if (this._clickOutsideHandler) {\n        document.removeEventListener('mousedown', this._clickOutsideHandler)\n        delete this._clickOutsideHandler\n      }\n\n      this.picking.target.classList.remove('-active')\n\n      this.picking = null\n    },\n\n    updateColor(color) {\n      if (!this.picking || this.thresholds[this.picking.index][`${this.picking.side}Color`] === color) {\n        return\n      }\n      console.log(this.thresholds[this.picking.index][`${this.picking.side}Color`])\n      this.$store.commit('settings/SET_THRESHOLD_COLOR', {\n        index: this.picking.index,\n        side: this.picking.side,\n        value: color\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.thresholds {\n  position: relative;\n  z-index: 1;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n\n  &.-rendering .thresholds-slider {\n    opacity: 0;\n\n    &__handler {\n      transform: scale(0.5) !important;\n    }\n  }\n\n  .vc-chrome {\n    position: absolute;\n    z-index: 1;\n    box-shadow: 0;\n    display: flex;\n    flex-direction: column;\n    height: 250px;\n    bottom: 0;\n    flex-grow: 1;\n    opacity: 0;\n    transition: all 0.2s $easeOutExpo;\n\n    .vc-chrome-fields .vc-input__label {\n      font-family: monospace;\n    }\n\n    .vc-input__input {\n      background: none;\n      border: 1px solid white;\n      border-radius: 2px;\n      color: white;\n      box-shadow: none;\n    }\n\n    .vc-chrome-body {\n      border-radius: 0 0 2px 2px;\n      background: lighten($dark, 18%) !important;\n    }\n\n    .vc-chrome-saturation-wrap {\n      flex-grow: 1;\n      padding: 0;\n      border-radius: 2px 2px 0 0;\n    }\n\n    .vc-chrome-toggle-icon-highlight {\n      background-color: rgba(black, 0.2);\n    }\n\n    .vc-chrome-toggle-icon {\n      path {\n        fill: white;\n      }\n    }\n\n    &,\n    .vc-chrome-body {\n      box-shadow: none;\n    }\n  }\n\n  &.-dragging {\n    .thresholds-gradients,\n    .thresholds-slider__handler {\n      opacity: 0.5;\n\n      &.-selected {\n        opacity: 1;\n      }\n    }\n\n    .thresholds-slider__handler {\n      transition: box-shadow 0.2s $easeElastic;\n    }\n\n    .threshold-panel {\n      transition: none;\n\n      &__caret {\n        transition: none;\n      }\n    }\n  }\n}\n\n.thresholds-table {\n  width: 100%;\n  border: 0;\n  border-spacing: 0px;\n  padding: 0.5em 0 0.75em;\n\n  &__input {\n    position: relative;\n    background-color: transparent;\n    padding: 0.5em;\n\n    i.icon {\n      position: absolute;\n      right: 7px;\n      top: 7px;\n    }\n\n    input {\n      width: 100%;\n      border: 0;\n      padding: 0;\n      background: 0;\n      color: white;\n\n      &[type='number'] {\n        font-weight: 600;\n      }\n    }\n\n    + .thresholds-table__input {\n      border-left: 1px solid rgba(white, 0.1);\n      border-top: 1px solid rgba(white, 0.1);\n    }\n  }\n\n  tr {\n    &:first-child .thresholds-table__input {\n      border-top: 0;\n    }\n\n    + tr .thresholds-table__input {\n      border-left: 1px solid rgba(white, 0.1);\n      border-top: 1px solid rgba(white, 0.1);\n\n      &:first-child {\n        border-left: 0;\n      }\n    }\n\n    &:first-child {\n      .thresholds-table__input:nth-child(2) {\n        pointer-events: none;\n        background-color: rgba(white, 0.05);\n        cursor: not-allowed;\n        border-left: 1px solid transparent;\n      }\n    }\n  }\n\n  tr:last-child .__input {\n    border-bottom: 0;\n  }\n\n  &__color {\n    width: 2em;\n    transition: box-shadow 0.2s $easeOutExpo;\n    cursor: pointer;\n\n    &.-active {\n      box-shadow: 0 0 0 0.5em rgba(white, 0.2);\n      position: relative;\n      z-index: 1;\n    }\n  }\n\n  &__delete {\n    cursor: pointer;\n    padding: 0.5em 0 0.5em 0.5em;\n\n    opacity: 0.5;\n\n    &:hover {\n      opacity: 1;\n    }\n\n    &.-disabled {\n      opacity: 0.5;\n\n      cursor: not-allowed;\n    }\n  }\n}\n\n.thresholds-slider {\n  padding: 2em 0 1em;\n  transition: opacity 0.2s $easeOutExpo;\n  position: relative;\n\n  &__bar {\n    position: absolute;\n    z-index: 1;\n\n    padding: 2.75em 0 0;\n    top: 0;\n    left: 1em;\n    right: 1em;\n  }\n\n  &__handler {\n    position: absolute;\n    width: 1em;\n    height: 1em;\n    background-color: white;\n    margin-top: -0.5em;\n    margin-left: -0.75em;\n    padding: 0.25em;\n    border-radius: 50%;\n    transition: box-shadow 0.2s $easeElastic, transform 0.2s $easeOutExpo;\n    box-shadow: 0 1px 0 1px rgba(black, 0.2);\n    cursor: move;\n\n    &:before {\n      position: absolute;\n      content: attr(data-amount);\n      top: -2em;\n      left: 50%;\n      transform: translateX(-50%);\n      font-size: 0.89em;\n    }\n\n    &.-selected {\n      box-shadow: 0 1px 0 1px rgba(black, 0.2), 0 0 0 12px rgba(white, 0.2);\n    }\n  }\n}\n\n.thresholds-gradients {\n  width: 100%;\n\n  > div {\n    height: 1em;\n    width: 100%;\n    border-radius: 0.75em 0.75em 0 0;\n\n    + div {\n      border-radius: 0 0 0.75em 0.75em;\n    }\n  }\n}\n\n.threshold-panel {\n  position: relative;\n  background-color: lighten($dark, 18%);\n  border-radius: 4px;\n  padding: 1em;\n  margin: 1.5em auto 0;\n  transition: transform 0.2s $easeOutExpo;\n  max-width: 220px;\n\n  .form-group {\n    min-width: 1px;\n\n    .form-control {\n      background: none;\n      border: 2px solid white;\n      color: white;\n\n      &::-webkit-input-placeholder {\n        color: rgba(white, 0.55);\n      }\n\n      &:-moz-placeholder {\n        /* Mozilla Firefox 4 to 18 */\n        color: rgba(white, 0.55);\n        opacity: 1;\n      }\n\n      &::-moz-placeholder {\n        /* Mozilla Firefox 19+ */\n        color: rgba(white, 0.55);\n        opacity: 1;\n      }\n\n      &:-ms-input-placeholder {\n        /* Internet Explorer 10-11 */\n        color: rgba(white, 0.55);\n      }\n\n      &::-ms-input-placeholder {\n        /* Microsoft Edge */\n        color: rgba(white, 0.55);\n      }\n\n      &::placeholder {\n        /* Most modern browsers support this now. */\n        color: rgba(white, 0.55);\n      }\n    }\n  }\n\n  code {\n    color: white;\n    font-weight: 600;\n  }\n\n  h3 {\n    font-weight: 400;\n    margin: 0 0 1em;\n    color: rgba(white, 0.6);\n\n    [contenteditable] {\n      color: black;\n      background-color: white;\n      padding: 0.25em;\n      border-radius: 1px;\n      font-size: 0.75em;\n      vertical-align: top;\n      font-family: inherit;\n    }\n  }\n\n  &__close {\n    position: absolute;\n    opacity: 0.5;\n    right: 0;\n    top: 0;\n    padding: 1em;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n\n  &__caret {\n    position: absolute;\n    top: -0.75em;\n    border-left: 0.75em solid transparent;\n    border-right: 0.75em solid transparent;\n    border-bottom: 0.75em solid lighten($dark, 18%);\n    margin-left: -1.75em;\n    transition: transform 0.2s $easeOutExpo;\n  }\n\n  &__colors {\n    .form-group .form-control {\n      height: auto;\n      width: auto;\n      min-width: 1px;\n      border: 0;\n      font-family: monospace;\n      letter-spacing: -0.1em;\n      font-size: 0.9em;\n      font-weight: 400;\n      padding: 1.25em 1em;\n    }\n  }\n\n  &.-minimum {\n    &:before {\n      content: 'Minimum for a trade to show up';\n      display: block;\n      margin-bottom: 1em;\n      text-decoration: underline;\n    }\n\n    .threshold-panel__gif {\n      display: none;\n    }\n  }\n}\n\n@keyframes picker-in {\n  from {\n    opacity: 0;\n    transform: translateY(-10%);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0%);\n  }\n}\n</style>\n","<template>\n  <div id=\"trades\" :class=\"{ '-logos': this.showLogos, '-slippage': this.showSlippage }\">\n    <ul ref=\"tradesContainer\"></ul>\n    <div v-if=\"!tradesCount\" class=\"trade -empty\">Nothing to show, yet.</div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nimport { ago, formatPrice, formatAmount } from '../utils/helpers'\nimport { getColorByWeight, getColorLuminance, getAppBackgroundColor, splitRgba, getLogShade } from '../utils/colors'\n\nimport socket from '../services/socket'\nimport Sfx from '../services/sfx'\n\nlet LAST_TRADE_TIMESTAMP // to control whether we show timestamp on trade or not\nlet LAST_SIDE // to control wheter we show \"up\" or \"down\" icon in front of trade\nlet MINIMUM_AMOUNT // alias threshold[0].amount\nlet SIGNIFICANT_AMOUNT // alias threshold[1].amount\nlet COLORS // prepared array of buy / sell colors ranges\nlet GIFS // gifs from storages, by threshold gif keyword\n\nlet activeExchanges = []\n\nexport default {\n  data() {\n    return {\n      tradesCount: 0\n    }\n  },\n  computed: {\n    ...mapState('settings', [\n      'pair',\n      'maxRows',\n      'thresholds',\n      'exchanges',\n      'useAudio',\n      'showSlippage',\n      'liquidationsOnly',\n      'audioIncludeInsignificants',\n      'preferQuoteCurrencySize',\n      'decimalPrecision',\n      'showLogos'\n    ]),\n    ...mapState('app', ['actives'])\n  },\n  created() {\n    // cache list of active exchange\n    activeExchanges = this.$store.state.app.actives.slice(0, this.$store.state.app.actives.length)\n\n    this.retrieveStoredGifs()\n    this.prepareColorsSteps()\n\n    socket.$on('trades.aggr', this.onTrades)\n\n    this.onStoreMutation = this.$store.subscribe((mutation, state) => {\n      switch (mutation.type) {\n        case 'app/EXCHANGE_UPDATED':\n          activeExchanges = state.app.actives.slice(0, state.app.actives.length)\n          break\n        case 'settings/SET_PAIR':\n          this.clearList()\n          break\n        case 'settings/TOGGLE_AUDIO':\n          if (mutation.payload) {\n            this.sfx = new Sfx()\n          } else {\n            this.sfx && this.sfx.disconnect() && delete this.sfx\n          }\n          break\n        case 'settings/SET_THRESHOLD_GIF':\n          this.fetchGifByKeyword(mutation.payload.value, mutation.payload.isDeleted)\n          break\n        case 'settings/SET_THRESHOLD_COLOR':\n        case 'settings/SET_THRESHOLD_AMOUNT':\n        case 'settings/DELETE_THRESHOLD':\n        case 'settings/ADD_THRESHOLD':\n          this.prepareColorsSteps()\n          break\n      }\n    })\n  },\n  mounted() {\n    if (this.useAudio) {\n      this.sfx = new Sfx()\n\n      if (this.sfx.context.state === 'suspended') {\n        const resumeOnFocus = (() => {\n          if (this.useAudio) {\n            this.sfx.context.resume()\n          }\n\n          if (!this.useAudio || this.sfx.context.state !== 'suspended') {\n            window.removeEventListener('focus', resumeOnFocus, false)\n            window.removeEventListener('blur', resumeOnFocus, false)\n          }\n        }).bind(this)\n\n        window.addEventListener('blur', resumeOnFocus, false)\n        window.addEventListener('focus', resumeOnFocus, false)\n      }\n    }\n\n    this._timeAgoInterval = setInterval(() => {\n      const elements = this.$el.getElementsByClassName('-timestamp')\n\n      if (!elements.length) {\n        return\n      }\n\n      let ref\n\n      for (let i = 0; i < elements.length; i++) {\n        const txt = ago(elements[i].getAttribute('timestamp'))\n\n        if (typeof ref !== 'undefined' && ref === txt) {\n          elements[i].textContent = ''\n          elements[i].className = 'trade__date'\n          i++\n          continue\n        }\n\n        if (txt !== elements[i].textContent) {\n          elements[i].textContent = txt\n        }\n\n        ref = txt\n      }\n    }, 1000)\n  },\n  beforeDestroy() {\n    socket.$off('trades.aggr', this.onTrades)\n\n    this.onStoreMutation()\n\n    clearInterval(this._timeAgoInterval)\n\n    this.sfx && this.sfx.disconnect()\n  },\n  methods: {\n    onTrades(trades) {\n      for (let i = 0; i < trades.length; i++) {\n        if (activeExchanges.indexOf(trades[i].exchange) === -1) {\n          continue\n        }\n\n        const trade = trades[i]\n        const amount = trade.size * (this.preferQuoteCurrencySize ? trade.price : 1)\n        const multiplier = typeof this.exchanges[trade.exchange].threshold !== 'undefined' ? +this.exchanges[trade.exchange].threshold : 1\n\n        if (trade.liquidation) {\n          if (this.useAudio && amount > SIGNIFICANT_AMOUNT * multiplier * 0.1) {\n            this.sfx.liquidation((amount / SIGNIFICANT_AMOUNT) * multiplier)\n          }\n\n          if (amount >= MINIMUM_AMOUNT * multiplier) {\n            let liquidationMessage = `<i class=\"icon-currency\"></i> <strong>${formatAmount(amount, 1)}</strong>`\n\n            liquidationMessage += `&nbsp;liq<span class=\"min-280\">uidate</span>d <strong>${\n              trade.side === 'buy' ? 'SHORT' : 'LONG'\n            }</strong> @ <i class=\"icon-quote\"></i> ${formatPrice(trade.price)}`\n\n            this.appendRow(trade, amount, multiplier, '-liquidation', liquidationMessage)\n          }\n          continue\n        } else if (this.liquidationsOnly) {\n          continue\n        }\n\n        if (amount >= MINIMUM_AMOUNT * multiplier) {\n          this.appendRow(trade, amount, multiplier)\n        } else {\n          if (this.useAudio && this.audioIncludeInsignificants && amount >= SIGNIFICANT_AMOUNT * 0.1) {\n            this.sfx.tradeToSong(amount / (SIGNIFICANT_AMOUNT * multiplier), trade.side, 0)\n          }\n        }\n      }\n    },\n    appendRow(trade, amount, multiplier = 1, classname = '', message = null) {\n      if (!this.tradesCount) {\n        this.$forceUpdate()\n      }\n\n      this.tradesCount++\n\n      const li = document.createElement('li')\n      li.className = ('trade ' + classname).trim()\n      li.className += ' -' + trade.exchange\n\n      li.className += ' -' + trade.side\n\n      if (trade.exchange.length > 10) {\n        li.className += ' -sm'\n      }\n\n      if (amount >= SIGNIFICANT_AMOUNT * multiplier) {\n        li.className += ' -significant'\n      }\n\n      for (let i = 0; i < this.thresholds.length; i++) {\n        li.className += ' -level-' + i\n\n        if (!this.thresholds[i + 1] || amount < this.thresholds[i + 1].amount * multiplier) {\n          // THIS IS OUR THRESHOLD\n          const color = COLORS[Math.min(this.thresholds.length - 2, i)]\n          const threshold = this.thresholds[i]\n\n          if (threshold.gif && GIFS[threshold.gif]) {\n            // get random gif for this threshold\n            li.style.backgroundImage = `url('${GIFS[threshold.gif][Math.floor(Math.random() * (GIFS[threshold.gif].length - 1))]}`\n          }\n\n          // percentage to next threshold\n          const percentToNextThreshold = (Math.max(amount, color.threshold) - color.threshold) / color.range\n\n          // 0-255 luminance of nearest color\n          const luminance = color[trade.side][(percentToNextThreshold < 0.5 ? 'from' : 'to') + 'Luminance']\n\n          // background color simple color to color based on percentage of amount to next threshold\n          const backgroundColor = getColorByWeight(color[trade.side].from, color[trade.side].to, percentToNextThreshold)\n          li.style.backgroundColor = 'rgb(' + backgroundColor[0] + ', ' + backgroundColor[1] + ', ' + backgroundColor[2] + ')'\n\n          if (i >= 1) {\n            // ajusted amount > SIGNIFICANT_AMOUNT\n            // only pure black or pure white foreground\n            li.style.color = luminance < 175 ? 'white' : 'black'\n          } else {\n            // take background color and apply logarithmic shade based on amount to SIGNIFICANT_AMOUNT percentage\n            // darken if luminance of background is high, lighten otherwise\n            li.style.color = getLogShade(backgroundColor, Math.max(0.25, Math.min(1, amount / SIGNIFICANT_AMOUNT)) * (luminance < 175 ? 1 : -1))\n          }\n\n          if (this.useAudio && amount >= (this.audioIncludeInsignificants ? SIGNIFICANT_AMOUNT * 0.1 : MINIMUM_AMOUNT * 1) * multiplier) {\n            this.sfx.tradeToSong(amount / (SIGNIFICANT_AMOUNT * multiplier), trade.side, i)\n          }\n\n          break\n        }\n      }\n\n      if (!message) {\n        if (trade.side !== LAST_SIDE) {\n          const side = document.createElement('div')\n          side.className = 'trade__side icon-side'\n          li.appendChild(side)\n        }\n\n        LAST_SIDE = trade.side\n      }\n\n      const exchange = document.createElement('div')\n      exchange.className = 'trade__exchange'\n      exchange.innerText = trade.exchange.replace('_', ' ')\n      exchange.setAttribute('title', trade.exchange)\n      li.appendChild(exchange)\n\n      if (message) {\n        const message_div = document.createElement('div')\n        message_div.className = 'trade__message'\n        message_div.innerHTML = message\n        li.appendChild(message_div)\n      } else {\n        const price = document.createElement('div')\n        price.className = 'trade__price'\n        price.innerHTML = `<span class=\"icon-quote\"></span> <span>${formatPrice(trade.price)}</span>`\n        li.appendChild(price)\n\n        if (this.showSlippage === 'price' && trade.slippage / trade.price > 0.0001) {\n          price.setAttribute(\n            'slippage',\n            (trade.slippage > 0 ? '+' : '-') + document.getElementById('app').getAttribute('data-symbol') + Math.abs(trade.slippage).toFixed(1)\n          )\n        } else if (this.showSlippage === 'bps' && trade.slippage) {\n          price.setAttribute('slippage', (trade.slippage > 0 ? '+' : '-') + trade.slippage)\n        }\n\n        const amount_div = document.createElement('div')\n        amount_div.className = 'trade__amount'\n\n        const amount_quote = document.createElement('span')\n        amount_quote.className = 'trade__amount__quote'\n        amount_quote.innerHTML = `<span class=\"icon-quote\"></span> <span>${formatAmount(trade.price * trade.size)}</span>`\n\n        const amount_base = document.createElement('span')\n        amount_base.className = 'trade__amount__base'\n        amount_base.innerHTML = `<span class=\"icon-base\"></span> <span>${formatAmount(trade.size)}</span>`\n\n        amount_div.appendChild(amount_quote)\n        amount_div.appendChild(amount_base)\n        li.appendChild(amount_div)\n      }\n\n      const date = document.createElement('div')\n      date.className = 'trade__date'\n\n      let timestamp = Math.floor(trade.timestamp / 1000) * 1000\n\n      if (timestamp !== LAST_TRADE_TIMESTAMP) {\n        LAST_TRADE_TIMESTAMP = timestamp\n\n        date.setAttribute('timestamp', trade.timestamp)\n        date.innerText = ago(timestamp)\n\n        date.className += ' -timestamp'\n      }\n\n      li.appendChild(date)\n\n      this.$refs.tradesContainer.appendChild(li)\n\n      while (this.tradesCount > this.maxRows) {\n        this.tradesCount--\n        this.$refs.tradesContainer.removeChild(this.$refs.tradesContainer.firstChild)\n      }\n    },\n    retrieveStoredGifs(refresh) {\n      GIFS = {}\n\n      this.thresholds.forEach(threshold => {\n        if (!threshold.gif) {\n          return\n        }\n\n        const slug = this.slug(threshold.gif)\n        const storage = localStorage ? JSON.parse(localStorage.getItem('threshold_' + slug + '_gifs')) : null\n\n        if (!refresh && storage && +new Date() - storage.timestamp < 1000 * 60 * 60 * 24 * 7) {\n          GIFS[threshold.gif] = storage.data\n        } else {\n          this.fetchGifByKeyword(threshold.gif)\n        }\n      })\n    },\n    fetchGifByKeyword(keyword, isDeleted = false) {\n      if (!keyword || !GIFS) {\n        return\n      }\n\n      const slug = this.slug(keyword)\n\n      if (isDeleted) {\n        if (GIFS[keyword]) {\n          delete GIFS[keyword]\n        }\n\n        localStorage.removeItem('threshold_' + slug + '_gifs')\n\n        return\n      }\n\n      fetch('https://api.giphy.com/v1/gifs/search?q=' + keyword + '&rating=r&limit=100&api_key=b5Y5CZcpj9spa0xEfskQxGGnhChYt3hi')\n        .then(res => res.json())\n        .then(res => {\n          if (!res.data || !res.data.length) {\n            return\n          }\n\n          GIFS[keyword] = []\n\n          for (let item of res.data) {\n            GIFS[keyword].push(item.images.original.url)\n          }\n\n          localStorage.setItem(\n            'threshold_' + slug + '_gifs',\n            JSON.stringify({\n              timestamp: +new Date(),\n              data: GIFS[keyword]\n            })\n          )\n        })\n    },\n    slug(keyword) {\n      return keyword\n        .toLowerCase()\n        .trim()\n        .replace(/[^a-zA-Z0-9]+/g, '-')\n    },\n    prepareColorsSteps() {\n      const appBackgroundColor = getAppBackgroundColor()\n\n      COLORS = []\n      MINIMUM_AMOUNT = this.thresholds[0].amount\n      SIGNIFICANT_AMOUNT = this.thresholds[1].amount\n\n      for (let i = 0; i < this.thresholds.length - 1; i++) {\n        const buyFrom = splitRgba(this.thresholds[i].buyColor, appBackgroundColor)\n        const buyTo = splitRgba(this.thresholds[i + 1].buyColor, appBackgroundColor)\n        const sellFrom = splitRgba(this.thresholds[i].sellColor, appBackgroundColor)\n        const sellTo = splitRgba(this.thresholds[i + 1].sellColor, appBackgroundColor)\n\n        COLORS.push({\n          threshold: this.thresholds[i].amount,\n          range: this.thresholds[i + 1].amount - this.thresholds[i].amount,\n          buy: {\n            from: buyFrom,\n            to: buyTo,\n            fromLuminance: getColorLuminance(buyFrom),\n            toLuminance: getColorLuminance(buyTo)\n          },\n          sell: {\n            from: sellFrom,\n            to: sellTo,\n            fromLuminance: getColorLuminance(sellFrom),\n            toLuminance: getColorLuminance(sellTo)\n          }\n        })\n      }\n    },\n\n    clearList() {\n      this.$refs.tradesContainer.innerHTML = ''\n      this.tradesCount = 0\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@keyframes highlight {\n  0% {\n    opacity: 0.75;\n  }\n\n  100% {\n    opacity: 0;\n  }\n}\n\n#trades {\n  background-color: rgba(black, 0.2);\n  line-height: 1;\n\n  ul {\n    margin: 0;\n    padding: 0;\n    display: flex;\n    flex-flow: column-reverse nowrap;\n  }\n\n  &.-slippage {\n    .trade__price {\n      flex-grow: 1.5;\n    }\n  }\n\n  &.-logos {\n    .trade__exchange {\n      text-indent: -9999px;\n      flex-basis: 0;\n      flex-grow: 0.4;\n    }\n\n    @each $exchange in $exchanges {\n      .-#{$exchange} .trade__exchange {\n        background-image: url('../assets/exchanges/#{$exchange}.svg');\n      }\n    }\n\n    .-liquidation {\n      .trade__exchange {\n        position: absolute;\n        width: 1em;\n      }\n    }\n  }\n\n  &:not(.-logos) .trade.-sm {\n    .trade__exchange {\n      font-size: 0.75em;\n      letter-spacing: -0.5px;\n      margin-top: -5px;\n      margin-bottom: -5px;\n      white-space: normal;\n      word-break: break-word;\n      line-height: 0.9;\n    }\n\n    &.-liquidation .trade__exchange {\n      max-width: 4em;\n    }\n  }\n}\n\n.trade {\n  display: flex;\n  flex-flow: row nowrap;\n  padding: 0.4em 0.6em;\n  background-position: center center;\n  background-size: cover;\n  background-blend-mode: overlay;\n  position: relative;\n  align-items: center;\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    opacity: 0;\n    background-color: white;\n    animation: 1s $easeOutExpo highlight;\n    pointer-events: none;\n  }\n\n  &.-empty {\n    justify-content: center;\n    padding: 20px;\n    font-size: 0.8rem;\n\n    &:after {\n      display: none;\n    }\n  }\n\n  &.-sell {\n    background-blend-mode: soft-light;\n    background-color: lighten($red, 35%);\n    color: $red;\n\n    .icon-side:before {\n      content: unicode($icon-down);\n    }\n  }\n\n  &.-buy {\n    background-color: lighten($green, 50%);\n    color: $green;\n\n    .icon-side:before {\n      content: unicode($icon-up);\n    }\n  }\n\n  &.-level-1 {\n    color: white;\n  }\n\n  &.-level-2 {\n    padding: 0.5em 0.6em;\n  }\n\n  &.-level-3 {\n    box-shadow: 0 0 20px rgba(red, 0.5);\n    z-index: 1;\n  }\n\n  > div {\n    flex-grow: 1;\n    flex-basis: 0;\n    word-break: break-word;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .trade__side {\n    flex-grow: 0;\n    flex-basis: 1em;\n    font-size: 1em;\n    position: absolute;\n\n    + .trade__message {\n      margin-left: 0.5em;\n    }\n  }\n\n  .icon-currency,\n  .icon-quote,\n  .icon-base {\n    line-height: 0;\n  }\n\n  .trade__exchange {\n    background-repeat: no-repeat;\n    background-position: center center;\n    flex-grow: 0.75;\n    margin-left: 5%;\n\n    small {\n      opacity: 0.8;\n    }\n  }\n\n  &.-liquidation {\n    background-color: $pink !important;\n    color: white !important;\n\n    .trade__exchange {\n      flex-grow: 0;\n      flex-basis: auto;\n      margin-left: 0;\n    }\n  }\n\n  .trade__price:after {\n    content: attr(slippage);\n    font-size: 80%;\n    position: relative;\n    top: -2px;\n    left: 2px;\n    opacity: 0.75;\n  }\n\n  .trade__amount {\n    flex-grow: 1;\n    position: relative;\n\n    > span {\n      max-width: 100%;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      transition: all 0.1s ease-in-out;\n      display: block;\n\n      &.trade__amount__quote {\n        position: absolute;\n      }\n\n      &.trade__amount__base {\n        transform: translateX(25%);\n        opacity: 0;\n      }\n    }\n\n    &:hover {\n      > span.trade__amount__base {\n        transform: none;\n        opacity: 1;\n      }\n\n      > span.trade__amount__quote {\n        transform: translateX(-25%);\n        opacity: 0;\n      }\n    }\n  }\n\n  .trade__date {\n    text-align: right;\n    flex-basis: 2em;\n    flex-grow: 0;\n  }\n\n  .trade__message {\n    flex-grow: 2;\n    text-align: center;\n    font-size: 90%;\n    line-height: 1.5;\n\n    + .trade__date {\n      overflow: visible;\n      flex-basis: auto;\n      font-size: 0.8em;\n      margin-left: -0.2em;\n    }\n  }\n}\n\n#app[data-prefer='base'] .trade .trade__amount {\n  .trade__amount__quote {\n    transform: translateX(-25%);\n    opacity: 0;\n  }\n\n  .trade__amount__base {\n    transform: none;\n    opacity: 1;\n  }\n\n  &:hover {\n    > span.trade__amount__base {\n      transform: translateX(25%);\n      opacity: 0;\n    }\n\n    > span.trade__amount__quote {\n      transform: none;\n      opacity: 1;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thresholds.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thresholds.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Thresholds.vue?vue&type=template&id=0484d2b2&\"\nimport script from \"./Thresholds.vue?vue&type=script&lang=js&\"\nexport * from \"./Thresholds.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Thresholds.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"serie-dialog dialog-mask\",on:{\"mousedown\":function($event){return _vm.cancelIfOutside($event)}}},[_c('div',{staticClass:\"dialog-content\"},[_c('header',[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"form-group\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"checkbox-control -on-off\",attrs:{\"title\":!_vm.enabled ? 'Enable ' + _vm.id : 'Disable ' + _vm.id},on:{\"change\":function($event){return _vm.$store.dispatch('settings/updateStat', { index: _vm.id, prop: 'enabled', value: $event.target.checked })}}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.enabled}}),_c('div')])])]),_c('div',{staticClass:\"dialog-body grid\"},[_c('div',{staticClass:\"form-group mb8\"},[_c('label',[_vm._v(\"Name\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":_vm.model.name},on:{\"change\":function($event){return _vm.$store.dispatch('settings/updateStat', {\n              index: _vm.id,\n              prop: 'name',\n              value: $event.target.value\n            })}}})]),_c('div',{ref:\"colorContainer\",staticClass:\"form-group -tight\"},[_c('label',[_vm._v(\"Color\")]),_c('verte',{attrs:{\"picker\":\"square\",\"menuPosition\":\"left\",\"model\":\"rgb\",\"value\":_vm.model.color},on:{\"input\":function($event){return _vm.$store.dispatch('settings/updateStat', {\n              index: _vm.id,\n              prop: 'color',\n              value: $event\n            })}}})],1),_c('div',{staticClass:\"form-group mb8\"},[_c('label',[_vm._v(\"Period (m)\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":_vm.getHms(_vm.$store.state.settings.statsPeriod)},domProps:{\"value\":_vm.getHms(_vm.model.period)},on:{\"change\":function($event){return _vm.$store.dispatch('settings/updateStat', {\n              index: _vm.id,\n              prop: 'period',\n              value: $event.target.value\n            })}}})]),_c('div',{staticClass:\"form-group mb8\"},[_c('label',[_vm._v(\"Precision\")]),_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"auto\"},domProps:{\"value\":_vm.model.precision},on:{\"change\":function($event){return _vm.$store.dispatch('settings/updateStat', {\n              index: _vm.id,\n              prop: 'precision',\n              value: $event.target.value\n            })}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\"Value \"),_c('span',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"icon-info-circle\",attrs:{\"title\":\"Javascript syntax, use build in variable such as vbuy/vsell (volume) cbuy/csell (trade count) lbuy/lsell (liquidation volume)\"}})]),_c('textarea',{staticClass:\"form-control\",attrs:{\"rows\":\"5\"},domProps:{\"value\":_vm.model.output},on:{\"change\":function($event){return _vm.$store.dispatch('settings/updateStat', {\n              index: _vm.id,\n              prop: 'output',\n              value: $event.target.value\n            })}}}),_c('p',{staticClass:\"help-text mt-8\"},[_vm._v(\" Sum \"),_c('code',[_vm._v(_vm._s(_vm.model.output))]),_vm._v(\" over \"+_vm._s(_vm.getHms(_vm.model.period || _vm.$store.state.settings.statsPeriod))+\" period \")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"serie-dialog dialog-mask\" @mousedown=\"cancelIfOutside($event)\">\n    <div class=\"dialog-content\">\n      <header>\n        <div class=\"title\">{{ title }}</div>\n        <div class=\"form-group\">\n          <label\n            class=\"checkbox-control -on-off\"\n            v-tippy=\"{ placement: 'bottom' }\"\n            :title=\"!enabled ? 'Enable ' + id : 'Disable ' + id\"\n            @change=\"$store.dispatch('settings/updateStat', { index: id, prop: 'enabled', value: $event.target.checked })\"\n          >\n            <input type=\"checkbox\" class=\"form-control\" :checked=\"enabled\" />\n            <div></div>\n          </label>\n        </div>\n      </header>\n      <div class=\"dialog-body grid\">\n        <div class=\"form-group mb8\">\n          <label>Name</label>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            :value=\"model.name\"\n            @change=\"\n              $store.dispatch('settings/updateStat', {\n                index: id,\n                prop: 'name',\n                value: $event.target.value\n              })\n            \"\n          />\n        </div>\n        <div class=\"form-group -tight\" ref=\"colorContainer\">\n          <label>Color</label>\n          <verte\n            picker=\"square\"\n            menuPosition=\"left\"\n            model=\"rgb\"\n            :value=\"model.color\"\n            @input=\"\n              $store.dispatch('settings/updateStat', {\n                index: id,\n                prop: 'color',\n                value: $event\n              })\n            \"\n          ></verte>\n        </div>\n        <div class=\"form-group mb8\">\n          <label>Period (m)</label>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            :value=\"getHms(model.period)\"\n            :placeholder=\"getHms($store.state.settings.statsPeriod)\"\n            @change=\"\n              $store.dispatch('settings/updateStat', {\n                index: id,\n                prop: 'period',\n                value: $event.target.value\n              })\n            \"\n          />\n        </div>\n        <div class=\"form-group mb8\">\n          <label>Precision</label>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"auto\"\n            :value=\"model.precision\"\n            @change=\"\n              $store.dispatch('settings/updateStat', {\n                index: id,\n                prop: 'precision',\n                value: $event.target.value\n              })\n            \"\n          />\n        </div>\n        <div class=\"form-group\">\n          <label for\n            >Value\n            <span\n              class=\"icon-info-circle\"\n              title=\"Javascript syntax, use build in variable such as vbuy/vsell (volume) cbuy/csell (trade count) lbuy/lsell (liquidation volume)\"\n              v-tippy\n            ></span\n          ></label>\n          <textarea\n            class=\"form-control\"\n            rows=\"5\"\n            :value=\"model.output\"\n            @change=\"\n              $store.dispatch('settings/updateStat', {\n                index: id,\n                prop: 'output',\n                value: $event.target.value\n              })\n            \"\n          ></textarea>\n          <p class=\"help-text mt-8\">\n            Sum <code>{{ model.output }}</code> over {{ getHms(model.period || $store.state.settings.statsPeriod) }} period\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport store from '../store'\nimport { getHms } from '../utils/helpers'\n\nexport default {\n  data: () => ({\n    title: 'Stat',\n    enabled: true,\n    model: {\n      color: null,\n      enabled: null,\n      name: null,\n      output: null,\n      precision: null,\n      period: null\n    }\n  }),\n  created() {\n    this.model = store.state.settings.statsCounters[this.id] || {}\n  },\n  methods: {\n    cancelIfOutside(event) {\n      if (event.target.classList.contains('dialog-mask')) {\n        this.$close(false)\n      }\n    },\n    getHms(value) {\n      return getHms(value)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StatDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StatDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StatDialog.vue?vue&type=template&id=b9d655cc&\"\nimport script from \"./StatDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./StatDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"settings\" class=\"settings__container stack__container\" @mousedown=\"$event.target === $el && $emit('close')\">\r\n    <div class=\"stack__scroller\">\r\n      <!-- <a href=\"https://github.com/Tucsky/SignificantTrades/issues\" target=\"_blank\" class=\"settings__report\"><i class=\"icon-warning\"></i> Found a bug or feedback ? Let me know on Github !</a> -->\r\n      <div class=\"stack__wrapper\">\r\n        <a href=\"#\" class=\"stack__toggler icon-cross\" @click=\"$emit('close')\"></a>\r\n        <div class=\"form-group settings-pair mb8\">\r\n          <label>\r\n            Pair\r\n            <span class=\"icon-info-circle\" title=\"The pair to aggregate from\" v-tippy></span>\r\n          </label>\r\n          <input\r\n            type=\"string\"\r\n            placeholder=\"BTCUSD\"\r\n            class=\"form-control\"\r\n            :value=\"pair\"\r\n            @change=\"$store.commit('settings/SET_PAIR', $event.target.value)\"\r\n          />\r\n          <small class=\"help-text mt8\" v-if=\"showPairSubdomainHelp\">\r\n            <i class=\"icon-info-circle\"></i> Consider using\r\n            <a :href=\"'https://' + pair.replace(/\\+/g, '_').toLowerCase() + '.aggr.trade'\"\r\n              >https://{{ pair.replace(/\\+/g, '_').toLowerCase() }}.aggr.trade</a\r\n            >\r\n            to hook your settings to\r\n            <strong>{{ pair }}</strong> indefinitely !\r\n          </small>\r\n        </div>\r\n        <div class=\"mb8\">\r\n          <div class=\"form-group mb8\">\r\n            <label class=\"checkbox-control -auto\" v-tippy title=\"Size display preference\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"form-control\"\r\n                :checked=\"preferQuoteCurrencySize\"\r\n                @change=\"$store.commit('settings/SET_QUOTE_AS_PREFERED_CURRENCY', $event.target.checked)\"\r\n              />\r\n              <div on=\"quote\" off=\"base\"></div>\r\n              <span>\r\n                Prefer\r\n                <strong>{{ preferQuoteCurrencySize ? 'quote' : 'base' }}</strong> (\r\n                <i :class=\"preferQuoteCurrencySize ? 'icon-quote' : 'icon-base'\"></i>&nbsp;) currency\r\n              </span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"settings__title\"\r\n          @click=\"$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'list')\"\r\n          :class=\"{ closed: settings.indexOf('list') > -1 }\"\r\n        >\r\n          Trades list\r\n          <i class=\"icon-up\"></i>\r\n        </div>\r\n        <div class=\"mb8\">\r\n          <div class=\"column\">\r\n            <div class=\"form-group -fill\">\r\n              <label>\r\n                Max rows\r\n                <span class=\"icon-info-circle\" title=\"Numbers of trades to keep visible\" v-tippy></span>\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                max=\"1000\"\r\n                step=\"1\"\r\n                class=\"form-control\"\r\n                :value=\"maxRows\"\r\n                @change=\"$store.commit('settings/SET_MAX_ROWS', $event.target.value)\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"form-group -tight\" title=\"Show exchange's logo when available\" v-tippy>\r\n              <label>Logo</label>\r\n              <label class=\"checkbox-control checkbox-control-input flex-right\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  class=\"form-control\"\r\n                  :checked=\"showLogos\"\r\n                  @change=\"$store.commit('settings/TOGGLE_LOGOS', $event.target.checked)\"\r\n                />\r\n                <div></div>\r\n              </label>\r\n            </div>\r\n\r\n            <div class=\"form-group -tight\" title=\"Toggle aggregation\" v-tippy>\r\n              <label>Aggr.</label>\r\n              <label\r\n                class=\"checkbox-control -aggr checkbox-control-input flex-right\"\r\n                @change=\"$store.commit('settings/TOGGLE_AGGREGATION', $event.target.checked)\"\r\n              >\r\n                <input type=\"checkbox\" class=\"form-control\" :checked=\"aggregateTrades\" />\r\n                <div></div>\r\n              </label>\r\n            </div>\r\n\r\n            <div class=\"form-group -tight\" title=\"ONLY show liquidation\" v-tippy>\r\n              <label class=\"condensed\"><small>Rip only</small></label>\r\n              <label\r\n                class=\"checkbox-control -rip checkbox-control-input flex-right\"\r\n                @change=\"$store.commit('settings/TOGGLE_LIQUIDATIONS_ONLY', $event.target.checked)\"\r\n              >\r\n                <input type=\"checkbox\" class=\"form-control\" :checked=\"liquidationsOnly\" />\r\n                <div></div>\r\n              </label>\r\n            </div>\r\n\r\n            <div\r\n              class=\"form-group -tight\"\r\n              :title=\"\r\n                showSlippage === 'price' ? 'Show slippage in $' : showSlippage === 'bps' ? 'Show slippage in basis point (bps)' : 'Slippage disabled'\r\n              \"\r\n              v-tippy\r\n            >\r\n              <label>Slipp.</label>\r\n              <label class=\"checkbox-control -slippage checkbox-control-input flex-right\" @click.stop=\"$store.commit('settings/TOGGLE_SLIPPAGE')\">\r\n                <input type=\"checkbox\" class=\"form-control\" :checked=\"showSlippage\" />\r\n                <div></div>\r\n                <span v-if=\"showSlippage === 'price'\">\r\n                  <i class=\"icon-dollar\"></i>\r\n                </span>\r\n                <span v-if=\"showSlippage === 'bps'\">\r\n                  <i class=\"icon-bps\" style=\"font-size:1.5em;\"></i>\r\n                </span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"settings__title\"\r\n          @click=\"$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'thresholds')\"\r\n          :class=\"{ closed: settings.indexOf('thresholds') > -1 }\"\r\n        >\r\n          Thresholds ({{ thresholds.length }})\r\n          <i class=\"icon-up\"></i>\r\n        </div>\r\n        <div class=\"settings-thresholds settings-section mb8\">\r\n          <div class=\"settings-section__controls\">\r\n            <a\r\n              href=\"javascript:void(0);\"\r\n              class=\"settings-thresholds__display-toggle\"\r\n              v-tippy\r\n              title=\"Switch thresholds display\"\r\n              @click=\"$store.commit('settings/TOGGLE_THRESHOLDS_TABLE', !showThresholdsAsTable)\"\r\n              >{{ showThresholdsAsTable ? 'slider' : 'table' }}</a\r\n            >\r\n            |\r\n            <a\r\n              href=\"javascript:void(0);\"\r\n              class=\"settings-section__add\"\r\n              v-tippy\r\n              title=\"Add threshold\"\r\n              @click=\"$store.commit('settings/ADD_THRESHOLD')\"\r\n            >\r\n              Add\r\n              <i class=\"icon-add\"></i>\r\n            </a>\r\n          </div>\r\n          <Thresholds ref=\"thresholdsComponent\" />\r\n        </div>\r\n        <div\r\n          class=\"settings__title\"\r\n          @click=\"$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'audio')\"\r\n          :class=\"{ closed: settings.indexOf('audio') > -1 }\"\r\n        >\r\n          Audio\r\n          <i class=\"icon-up\"></i>\r\n        </div>\r\n        <div class=\"settings-audio mb8 -activable column\" :class=\"{ active: useAudio }\">\r\n          <div class=\"form-group -tight\">\r\n            <label class=\"checkbox-control -on-off checkbox-control-input flex-right\" v-tippy=\"{ placement: 'bottom' }\" title=\"Enable audio\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"form-control\"\r\n                :checked=\"useAudio\"\r\n                @change=\"$store.commit('settings/TOGGLE_AUDIO', $event.target.checked)\"\r\n              />\r\n              <div></div>\r\n            </label>\r\n          </div>\r\n          <div class=\"form-group -tight\">\r\n            <label class=\"checkbox-control checkbox-control-input flex-right\" v-tippy title=\"Include orders down to 10% of significant orders\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"form-control\"\r\n                :checked=\"audioIncludeInsignificants\"\r\n                @change=\"$store.commit('settings/TOGGLE_AUDIO_TEN_PERCENT', $event.target.checked)\"\r\n              />\r\n              <div class=\"icon-expand\"></div>\r\n            </label>\r\n          </div>\r\n          <div class=\"form-group -fill\">\r\n            <input\r\n              type=\"range\"\r\n              min=\"0\"\r\n              max=\"10\"\r\n              step=\".1\"\r\n              :title=\"'ajust gain (' + audioVolume + ')'\"\r\n              v-tippy=\"{ placement: 'top' }\"\r\n              :value=\"audioVolume\"\r\n              @change=\"$store.commit('settings/SET_AUDIO_VOLUME', $event.target.value)\"\r\n            />\r\n          </div>\r\n          <div class=\"form-group -fill\">\r\n            <input\r\n              type=\"range\"\r\n              min=\".25\"\r\n              max=\"2.5\"\r\n              step=\".05\"\r\n              :value=\"audioPitch\"\r\n              :title=\"'ajust pitch (' + audioPitch + ')'\"\r\n              v-tippy=\"{ placement: 'top' }\"\r\n              @change=\"$store.commit('settings/SET_AUDIO_PITCH', $event.target.value)\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"settings__title\"\r\n          @click=\"$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'stats')\"\r\n          :class=\"{ closed: settings.indexOf('stats') > -1 }\"\r\n        >\r\n          Stats <i class=\"icon-up\"></i>\r\n        </div>\r\n        <div class=\"settings-stats settings-section mb8 -activable column mb8\" :class=\"{ active: showStats }\">\r\n          <div class=\"settings-section__controls\">\r\n            <a\r\n              href=\"javascript:void(0);\"\r\n              class=\"settings-controls__add\"\r\n              v-tippy\r\n              title=\"Add a stat\"\r\n              @click=\"$store.commit('settings/CREATE_STAT'), openStat(statsCounters.length - 1)\"\r\n            >\r\n              Add\r\n              <i class=\"icon-add\"></i>\r\n            </a>\r\n          </div>\r\n          <div class=\"form-group -tight\">\r\n            <label class=\"checkbox-control -on-off checkbox-control-input flex-right\" v-tippy=\"{ placement: 'bottom' }\" title=\"Enable stats\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"form-control\"\r\n                :checked=\"showStats\"\r\n                @change=\"$store.commit('settings/TOGGLE_STATS', $event.target.checked)\"\r\n              />\r\n              <div></div>\r\n            </label>\r\n          </div>\r\n          <div class=\"form-group -fill\">\r\n            <div class=\"column\">\r\n              <div class=\"form-group -fill\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  :value=\"statsPeriodStringified\"\r\n                  placeholder=\"Period (minutes)\"\r\n                  @change=\"$store.commit('settings/SET_STATS_PERIOD', $event.target.value)\"\r\n                />\r\n              </div>\r\n              <div class=\"form-group -tight\">\r\n                <label class=\"checkbox-control checkbox-control-input flex-right\" v-tippy=\"{ placement: 'bottom' }\" title=\"Enable graph\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    class=\"form-control\"\r\n                    :checked=\"statsChart\"\r\n                    @change=\"$store.commit('settings/TOGGLE_STATS_CHART', $event.target.checked)\"\r\n                  />\r\n                  <div></div>\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div v-for=\"(counter, index) in statsCounters\" :key=\"index\" class=\"column mt8\">\r\n              <div class=\"form-group -tight\">\r\n                <label class=\"checkbox-control -on-off checkbox-control-input flex-right\" v-tippy=\"{ placement: 'bottom' }\" title=\"Enable counter\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    class=\"form-control\"\r\n                    :checked=\"counter.enabled\"\r\n                    @change=\"$store.dispatch('settings/updateStat', { index: index, prop: 'enabled', value: $event.target.checked })\"\r\n                  />\r\n                  <div></div>\r\n                </label>\r\n              </div>\r\n              <div class=\"form-group -fill -center\">\r\n                {{ counter.name }}\r\n              </div>\r\n              <div class=\"form-group -tight\">\r\n                <button class=\"btn -green\" @click=\"openStat(index)\"><i class=\"icon-edit\"></i></button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"settings__title\"\r\n          @click=\"$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'counters')\"\r\n          :class=\"{ closed: settings.indexOf('counters') > -1 }\"\r\n        >\r\n          Counter <i class=\"icon-up\"></i>\r\n        </div>\r\n        <div class=\"settings-counters mb8 -activable column\" :class=\"{ active: showCounters }\">\r\n          <div class=\"form-group -tight\">\r\n            <label class=\"checkbox-control -on-off checkbox-control-input flex-right\" v-tippy=\"{ placement: 'bottom' }\" title=\"Enable counters\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"form-control\"\r\n                :checked=\"showCounters\"\r\n                @change=\"$store.commit('settings/TOGGLE_COUNTERS', $event.target.checked)\"\r\n              />\r\n              <div></div>\r\n            </label>\r\n          </div>\r\n          <div class=\"form-group -tight\">\r\n            <label\r\n              class=\"checkbox-control -count-or-volume checkbox-control-input flex-right\"\r\n              v-tippy=\"{ placement: 'bottom' }\"\r\n              title=\"Sum amount of trades instead of volume\"\r\n            >\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"form-control\"\r\n                :checked=\"countersCount\"\r\n                @change=\"$store.commit('settings/TOGGLE_COUNTERS_COUNT', $event.target.checked)\"\r\n              />\r\n              <div></div>\r\n            </label>\r\n          </div>\r\n          <div class=\"form-group -fill\">\r\n            <input\r\n              v-tippy\r\n              title=\"Counters step separed by a comma (ie: 1m, 5m, 10m, 15m)\"\r\n              type=\"string\"\r\n              placeholder=\"Enter a set of timeframe (ie 1m, 15m)\"\r\n              class=\"form-control\"\r\n              :value=\"countersStepsStringified\"\r\n              @change=\"replaceCounters($event.target.value)\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"settings__title\"\r\n          @click=\"$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'chart')\"\r\n          :class=\"{ closed: settings.indexOf('chart') > -1 }\"\r\n        >\r\n          Chart\r\n          <i class=\"icon-up\"></i>\r\n        </div>\r\n        <div class=\"settings-chart mb8 -activable column\" :class=\"{ active: showChart }\">\r\n          <div class=\"form-group -tight\">\r\n            <label class=\"checkbox-control -on-off checkbox-control-input flex-right\" v-tippy=\"{ placement: 'bottom' }\" title=\"Enable chart\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"form-control\"\r\n                :checked=\"showChart\"\r\n                @change=\"$store.commit('settings/TOGGLE_CHART', $event.target.checked)\"\r\n              />\r\n              <div></div>\r\n            </label>\r\n          </div>\r\n          <div class=\"-fill\">\r\n            <div class=\"form-group mb8\">\r\n              <span>\r\n                Refresh chart every\r\n                <editable :content=\"chartRefreshRate\" @output=\"$store.commit('settings/SET_CHART_REFRESH_RATE', $event)\"></editable>&nbsp;ms\r\n              </span>\r\n            </div>\r\n            <div class=\"form-group mb8\">\r\n              <span>\r\n                <label class=\"checkbox-control flex-left\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    class=\"form-control\"\r\n                    :checked=\"!!timezoneOffset\"\r\n                    @change=\"$store.commit('settings/SET_TIMEZONE_OFFSET', !timezoneOffset ? new Date().getTimezoneOffset() * 60000 * -1 : 0)\"\r\n                  />\r\n                  <div></div>\r\n                  <span>Show local time</span>\r\n                </label>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"settings__title\"\r\n          @click=\"$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'exchanges')\"\r\n          :class=\"{ closed: settings.indexOf('exchanges') > -1 }\"\r\n        >\r\n          Exchanges\r\n          <i class=\"icon-up\"></i>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <div class=\"settings-exchanges\">\r\n            <Exchange v-for=\"(exchange, index) in exchanges\" :key=\"index\" :exchange=\"exchange\" />\r\n            <div v-if=\"!exchanges.length\" class=\"mb8\">You are not connected to any exchanges</div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"settings__title\"\r\n          @click=\"$store.commit('settings/TOGGLE_SETTINGS_PANEL', 'other')\"\r\n          :class=\"{ closed: settings.indexOf('other') > -1 }\"\r\n        >\r\n          Other\r\n          <i class=\"icon-up\"></i>\r\n        </div>\r\n        <div class=\"mb8\">\r\n          <div class=\"form-group mb8\">\r\n            <label class=\"checkbox-control\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"form-control\"\r\n                :checked=\"!!decimalPrecision\"\r\n                @change=\"$store.commit('settings/SET_DECIMAL_PRECISION', decimalPrecision ? null : 2)\"\r\n              />\r\n              <div></div>\r\n              <span @click.stop.prevent=\"$event.currentTarget.children[0].focus()\">\r\n                Round up to\r\n                <editable placeholder=\"auto\" :content=\"decimalPrecision\" @output=\"$store.commit('settings/SET_DECIMAL_PRECISION', $event)\"></editable\r\n                >&nbsp;decimal(s)\r\n              </span>\r\n            </label>\r\n          </div>\r\n          <div class=\"form-group mb8\">\r\n            <label class=\"checkbox-control\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"form-control\"\r\n                :checked=\"showExchangesBar\"\r\n                @change=\"$store.commit('settings/TOGGLE_EXCHANGES_BAR', $event.target.checked)\"\r\n              />\r\n              <div></div>\r\n              <span>Show exchanges bar</span>\r\n            </label>\r\n          </div>\r\n          <!--<div class=\"form-group mb8\">\r\n            <label class=\"checkbox-control\">\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"form-control\"\r\n                :checked=\"debug\"\r\n                @change=\"$store.commit('toggleDebug', $event.target.checked)\"\r\n              />\r\n              <div></div>\r\n              <span>Debug</span>\r\n            </label>\r\n          </div>-->\r\n        </div>\r\n        <div class=\"mt15 settings__footer flex-middle\">\r\n          <div class=\"form-group\">\r\n            <div v-if=\"version\">\r\n              <span>\r\n                v{{ version }}\r\n                <sup class=\"version-date\">{{ buildDate }}</sup>\r\n              </span>\r\n              <i class=\"divider\">|</i>\r\n              <a href=\"javascript:void(0);\" @click=\"reset()\">reset</a>\r\n              <i class=\"divider\">|</i>\r\n              <a target=\"_blank\" href=\"https://github.com/Tucsky/SignificantTrades\" title=\"Run your own instance !\">github</a>\r\n              <i class=\"divider\">|</i>\r\n              <a\r\n                target=\"_blank\"\r\n                href=\"bitcoin:3PK1bBK8sG3zAjPBPD7g3PL14Ndux3zWEz\"\r\n                v-tippy=\"{\r\n                  animateFill: false,\r\n                  interactive: true,\r\n                  theme: 'blue'\r\n                }\"\r\n                >donate</a\r\n              >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\n\r\nimport { ago } from '../utils/helpers'\r\nimport { MASTER_DOMAIN } from '../utils/constants'\r\n\r\nimport socket from '../services/socket'\r\n\r\nimport Exchange from './Exchange.vue'\r\nimport Thresholds from './Thresholds.vue'\r\n\r\nimport StatDialog from './StatDialog'\r\nimport { create } from 'vue-modal-dialogs'\r\n\r\nexport default {\r\n  components: {\r\n    Exchange,\r\n    Thresholds\r\n  },\r\n  data() {\r\n    return {\r\n      expanded: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('app', ['actives', 'version', 'buildDate']),\r\n    ...mapState('settings', [\r\n      'pair',\r\n      'maxRows',\r\n      'decimalPrecision',\r\n      'showLogos',\r\n      'showSlippage',\r\n      'liquidationsOnly',\r\n      'aggregateTrades',\r\n      'preferQuoteCurrencySize',\r\n      'thresholds',\r\n      'showThresholdsAsTable',\r\n      'showCounters',\r\n      'showStats',\r\n      'statsPeriod',\r\n      'statsChart',\r\n      'statsCounters',\r\n      'countersSteps',\r\n      'countersCount',\r\n      'useAudio',\r\n      'audioIncludeInsignificants',\r\n      'audioVolume',\r\n      'audioPitch',\r\n      'timeframe',\r\n      'showChart',\r\n      'chartRefreshRate',\r\n      'timezoneOffset',\r\n      'showExchangesBar',\r\n      'settings',\r\n      'debug'\r\n    ]),\r\n    exchanges: () => {\r\n      return socket.exchanges\r\n    },\r\n    showPairSubdomainHelp: state => {\r\n      if (!MASTER_DOMAIN || !state.pair) {\r\n        return false\r\n      }\r\n\r\n      const match = window.location.hostname.match(/^([\\d\\w]+)\\..*\\./i)\r\n\r\n      return !match || match.length < 2 || match[1].toLowerCase() !== state.pair.toLowerCase()\r\n    }\r\n  },\r\n  created() {\r\n    this.stringifyCounters()\r\n    this.stringifyStatsPeriod()\r\n\r\n    document.body.classList.add('-translate')\r\n  },\r\n  beforeDestroy() {\r\n    document.body.classList.remove('-translate')\r\n  },\r\n  methods: {\r\n    reset() {\r\n      window.localStorage && window.localStorage.clear()\r\n\r\n      window.location.reload(true)\r\n    },\r\n    stringifyStatsPeriod() {\r\n      this.statsPeriodStringified = ago(+new Date() - (this.statsPeriod || 0))\r\n    },\r\n    stringifyCounters() {\r\n      const now = +new Date()\r\n      this.countersStepsStringified = this.countersSteps.map(a => ago(now - a)).join(', ')\r\n    },\r\n    replaceCounters(value) {\r\n      const counters = value\r\n        .split(',')\r\n        .map(a => {\r\n          a = a.trim()\r\n\r\n          if (/[\\d.]+s/.test(a)) {\r\n            return parseFloat(a) * 1000\r\n          } else if (/[\\d.]+h/.test(a)) {\r\n            return parseFloat(a) * 1000 * 60 * 60\r\n          } else {\r\n            return parseFloat(a) * 1000 * 60\r\n          }\r\n        })\r\n        .filter(function(item, pos, self) {\r\n          return self.indexOf(item) == pos\r\n        })\r\n\r\n      if (counters.filter(a => isNaN(a)).length) {\r\n        this.$store.dispatch('app/showNotice', {\r\n          type: 'error',\r\n          title: `Counters (${value}) contains invalid steps.`\r\n        })\r\n        return\r\n      }\r\n\r\n      this.$store.commit('settings/REPLACE_COUNTERS', counters)\r\n\r\n      this.stringifyCounters()\r\n    },\r\n    openStat(id) {\r\n      const dialog = create(StatDialog, 'id')\r\n      dialog(id)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@media screen and (min-width: 500px) {\r\n  body {\r\n    overflow-x: hidden;\r\n  }\r\n\r\n  body.-translate {\r\n    .stack__container,\r\n    #app {\r\n      overflow: visible;\r\n    }\r\n\r\n    #app {\r\n      transform: translateX(-320px);\r\n\r\n      .stack__scroller {\r\n        transform: translateX(100%);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.settings__report {\r\n  display: block;\r\n  padding: 7px 6px 6px;\r\n  background-color: $red;\r\n}\r\n\r\n.settings__title {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0.5em 0;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n  opacity: 0.5;\r\n  -webkit-touch-callout: none;\r\n  -webkit-user-select: none;\r\n  -khtml-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n\r\n  &:hover {\r\n    opacity: 1;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .icon-up {\r\n    transition: transform 0.2s $easeElastic;\r\n    margin-left: 0.5em;\r\n  }\r\n\r\n  &.closed {\r\n    .icon-up {\r\n      transform: rotateZ(180deg);\r\n    }\r\n\r\n    + div {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n\r\n.settings__container {\r\n  background-color: rgba($dark, 0.5);\r\n  color: white;\r\n\r\n  &.-stack__container {\r\n    z-index: 10;\r\n  }\r\n\r\n  .stack__scroller {\r\n    background-color: $dark;\r\n  }\r\n\r\n  @media screen and (min-width: 500px) {\r\n    position: fixed;\r\n    height: 100%;\r\n    width: 100%;\r\n\r\n    .stack__scroller {\r\n      width: 320px;\r\n      height: 100%;\r\n      position: absolute;\r\n      right: 0;\r\n    }\r\n\r\n    .stack__wrapper {\r\n      display: flex;\r\n      flex-direction: column;\r\n      min-height: calc(100% - 40px);\r\n\r\n      > div:last-child {\r\n        margin-top: auto;\r\n        padding-top: 16px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .stack__wrapper {\r\n    padding: 20px;\r\n  }\r\n\r\n  a {\r\n    color: white;\r\n  }\r\n\r\n  .settings__footer {\r\n    a {\r\n      opacity: 0.5;\r\n\r\n      &:hover {\r\n        opacity: 1;\r\n      }\r\n    }\r\n\r\n    .form-group {\r\n      flex-basis: auto;\r\n      max-width: none;\r\n      flex-grow: 1;\r\n    }\r\n\r\n    .version-date {\r\n      opacity: 0.75;\r\n      line-height: 0;\r\n    }\r\n\r\n    .divider {\r\n      opacity: 0.2;\r\n      margin: 0 2px;\r\n    }\r\n\r\n    .donation {\r\n      display: block;\r\n      font-weight: 600;\r\n      letter-spacing: -0.5px;\r\n      font-size: 14px;\r\n      font-family: monospace;\r\n      color: white;\r\n      text-shadow: 0 2px rgba(0, 0, 0, 0.2);\r\n\r\n      img {\r\n        width: 100%;\r\n        margin: 0px;\r\n        display: block;\r\n        transition: transform 0.2s $easeElastic;\r\n\r\n        &:active {\r\n          transform: scale(0.9);\r\n        }\r\n      }\r\n\r\n      .donation__address {\r\n        letter-spacing: -0.5px;\r\n        font-size: 10px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .form-group {\r\n    .checkbox-control {\r\n      &.-luminosity {\r\n        input {\r\n          ~ div {\r\n            background-color: $blue;\r\n\r\n            &:before {\r\n              content: unicode($icon-day);\r\n            }\r\n\r\n            &:after {\r\n              content: unicode($icon-night);\r\n            }\r\n          }\r\n\r\n          &:checked ~ div {\r\n            background-color: $green;\r\n          }\r\n        }\r\n      }\r\n\r\n      &.-slippage input ~ div {\r\n        &:before,\r\n        &:after {\r\n          content: unicode($icon-slippery);\r\n        }\r\n\r\n        &:before {\r\n          font-size: 1.5em;\r\n        }\r\n      }\r\n\r\n      &.-count-or-volume input ~ div {\r\n        &:before {\r\n          content: unicode($icon-countdown);\r\n          font-size: 1.5em;\r\n        }\r\n\r\n        &:after {\r\n          content: unicode($icon-balance);\r\n        }\r\n      }\r\n\r\n      &.-aggr input ~ div {\r\n        &:before {\r\n          content: unicode($icon-ms);\r\n          font-size: 1.5em;\r\n        }\r\n\r\n        &:after {\r\n          content: unicode($icon-cross);\r\n        }\r\n      }\r\n\r\n      &.-rip input ~ div {\r\n        &:before,\r\n        &:after {\r\n          content: unicode($icon-skull);\r\n        }\r\n\r\n        &:before {\r\n          font-size: 1.5em;\r\n        }\r\n      }\r\n\r\n      &.-auto input {\r\n        ~ div {\r\n          width: auto;\r\n          display: flex;\r\n\r\n          &:before,\r\n          &:after {\r\n            font-family: inherit;\r\n            position: relative;\r\n            line-height: 1;\r\n            order: 0;\r\n          }\r\n\r\n          i {\r\n            order: 1;\r\n            top: 0;\r\n          }\r\n\r\n          &:before {\r\n            content: attr(on);\r\n            display: none;\r\n          }\r\n\r\n          &:after {\r\n            content: attr(off);\r\n          }\r\n        }\r\n\r\n        &:checked ~ div {\r\n          &:before {\r\n            display: block;\r\n          }\r\n\r\n          &:after {\r\n            display: none;\r\n          }\r\n        }\r\n      }\r\n\r\n      &.-cml-abs input {\r\n        ~ div {\r\n          &:before,\r\n          &:after {\r\n            font-family: inherit;\r\n          }\r\n\r\n          &:before {\r\n            content: 'CML';\r\n          }\r\n\r\n          &:after {\r\n            content: 'ABS';\r\n          }\r\n        }\r\n\r\n        &:not(:checked) ~ div {\r\n          background-color: $blue;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .settings__title {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0.5em 0;\r\n    text-transform: uppercase;\r\n    letter-spacing: 0.5px;\r\n    opacity: 0.5;\r\n    -webkit-touch-callout: none;\r\n    -webkit-user-select: none;\r\n    -khtml-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n\r\n    &:hover {\r\n      opacity: 1;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .icon-up {\r\n      transition: transform 0.2s $easeElastic;\r\n      margin-left: 0.5em;\r\n    }\r\n\r\n    &.closed {\r\n      .icon-up {\r\n        transform: rotateZ(180deg);\r\n      }\r\n\r\n      + div {\r\n        display: none;\r\n      }\r\n    }\r\n  }\r\n\r\n  .settings-audio {\r\n    align-items: center;\r\n\r\n    label {\r\n      margin: 0;\r\n    }\r\n\r\n    input[type='range'] {\r\n      width: 100%;\r\n      margin: 0;\r\n    }\r\n  }\r\n\r\n  .settings-section {\r\n    position: relative;\r\n\r\n    &__controls {\r\n      position: absolute;\r\n      right: 0;\r\n      top: -1.75em;\r\n      text-transform: uppercase;\r\n      letter-spacing: 0.5px;\r\n\r\n      > a {\r\n        opacity: 0.5;\r\n\r\n        &:hover {\r\n          opacity: 1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .settings-exchanges {\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    align-items: flex-start;\r\n  }\r\n\r\n  &.open {\r\n    background-color: #222;\r\n  }\r\n\r\n  .settings-chart {\r\n    &__sub-settings {\r\n      margin-left: 2.4em;\r\n      margin-bottom: 0.5em;\r\n\r\n      > div {\r\n        + div {\r\n          margin-top: 0.75em;\r\n        }\r\n      }\r\n\r\n      > div + div {\r\n        margin-top: 0.75em;\r\n      }\r\n\r\n      input[type='range'] {\r\n        font-size: 0.5em;\r\n        vertical-align: middle;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=52d0a835&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Settings.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ '-logos': this.showLogos, '-slippage': this.showSlippage },attrs:{\"id\":\"trades\"}},[_c('ul',{ref:\"tradesContainer\"}),(!_vm.tradesCount)?_c('div',{staticClass:\"trade -empty\"},[_vm._v(\"Nothing to show, yet.\")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Tuna from 'tunajs'\nimport store from '../store'\n\nclass Sfx {\n  constructor() {\n    this.timestamp = +new Date()\n\n    this.connect()\n  }\n\n  connect() {\n    this.context = new (window.AudioContext || window.webkitAudioContext)()\n    this.queued = 0\n\n    var tuna = new Tuna(this.context)\n    this.output = new tuna.PingPongDelay({\n      wetLevel: 0.6, //0 to 1\n      feedback: 0.01, //0 to 1\n      delayTimeLeft: 175, //1 to 10000 (milliseconds)\n      delayTimeRight: 100 //1 to 10000 (milliseconds)\n    })\n    var delay = new tuna.Delay({\n      feedback: 0.3, //0 to 1+\n      delayTime: 80, //1 to 10000 milliseconds\n      wetLevel: 0.3, //0 to 1+\n      dryLevel: 0.5, //0 to 1+\n      cutoff: 2000, //cutoff frequency of the built in lowpass-filter. 20 to 22050\n      bypass: 1\n    })\n    var compressor = new tuna.Compressor({\n      threshold: -1, //-100 to 0\n      makeupGain: 1, //0 and up (in decibels)\n      attack: 1, //0 to 1000\n      release: 0, //0 to 3000\n      ratio: 4, //1 to 20\n      knee: 5, //0 to 40\n      automakeup: true, //true/false\n      bypass: 0\n    })\n    var filter = new tuna.Filter({\n      frequency: 800, //20 to 22050\n      Q: 10, //0.001 to 100\n      gain: -10, //-40 to 40 (in decibels)\n      filterType: 'highpass', //lowpass, highpass, bandpass, lowshelf, highshelf, peaking, notch, allpass\n      bypass: 0\n    })\n    this.output.connect(filter)\n    filter.connect(delay)\n    delay.connect(compressor)\n    compressor.connect(this.context.destination)\n  }\n\n  tradeToSong(factor, side, variant) {\n    const now = +new Date()\n    const pitch = store.state.settings.audioPitch\n\n    this.queued++\n\n    setTimeout(() => {\n      this.queued--\n\n      if (side === 'buy') {\n        if (variant === 0) {\n          this.play(659.26 * pitch, Math.sqrt(factor) / 10, 0.1 + Math.sqrt(factor) / 10)\n        } else if (variant === 1) {\n          this.play(659.26 * pitch, 0.05 + Math.sqrt(factor) / 10, 0.1 + factor * 0.1)\n          setTimeout(() => this.play(830.6 * pitch, 0.05 + Math.sqrt(factor) / 10, 0.1 + factor * 0.1), 80)\n        } else {\n          this.play(659.26 * pitch, 0.05 + Math.sqrt(factor) / 25, 0.1 + factor * 0.1)\n          setTimeout(() => this.play(830.6 * pitch, 0.05 + Math.sqrt(factor) / 25, 0.1 + factor * 0.1), 80)\n          setTimeout(() => this.play(987.76 * pitch, 0.05 + Math.sqrt(factor) / 25, 0.1 + factor * 0.1), 160)\n          setTimeout(() => this.play(1318.52 * pitch, 0.05 + Math.sqrt(factor) / 10, 0.1 + factor * 0.1), 240)\n        }\n      } else {\n        if (variant === 0) {\n          this.play(493.88 * pitch, Math.sqrt(factor * 1.5) / 10, 0.1 + Math.sqrt(factor) / 10)\n        } else if (variant === 1) {\n          this.play(493.88 * pitch, 0.05 + Math.sqrt(factor * 1.5) / 10, 0.1 + factor * 0.1)\n          setTimeout(() => this.play(392 * pitch, 0.05 + Math.sqrt(factor * 1.5) / 10, 0.1 + factor * 0.1), 80)\n        } else {\n          this.play(493.88 * pitch, 0.05 + Math.sqrt(factor) / 25, 0.1 + factor * 0.1)\n          setTimeout(() => this.play(369.99 * pitch, 0.05 + Math.sqrt(factor * 1.5) / 10, 0.2), 80)\n          setTimeout(() => this.play(293.66 * pitch, 0.05 + Math.sqrt(factor * 1.5) / 10, 0.2), 160)\n          setTimeout(() => this.play(246.94 * pitch, 0.05 + Math.sqrt(factor * 1.5) / 10, 0.1 + factor * 0.1), 240)\n        }\n      }\n    }, this.timestamp - now)\n\n    this.timestamp = Math.max(this.timestamp, now) + (this.queued > 10 ? (this.queued > 20 ? 20 : 40) : 80)\n  }\n\n  play(frequency, value = 0.5, length = 0.1, type = 'triangle') {\n    if (this.context.state !== 'running') {\n      return\n    }\n\n    const time = this.context.currentTime\n    const oscillator = this.context.createOscillator()\n    const gain = this.context.createGain()\n\n    oscillator.frequency.value = frequency\n    oscillator.type = type\n\n    oscillator.onended = () => {\n      oscillator.disconnect()\n    }\n\n    gain.connect(this.output)\n    oscillator.connect(gain)\n    length *= 1.3\n\n    var volume = Math.max(0.02, Math.min(1, value)) * store.state.settings.audioVolume\n\n    gain.gain.value = volume\n\n    gain.gain.setValueAtTime(gain.gain.value, time)\n    gain.gain.exponentialRampToValueAtTime(0.001, time + length)\n\n    oscillator.start(time)\n    oscillator.stop(time + length)\n  }\n\n  liquidation(size) {\n    const now = +new Date()\n\n    this.queued++\n\n    setTimeout(() => {\n      this.queued--\n      ;[329.63, 329.63].forEach((f, i) => {\n        size = Math.sqrt(size) / 4\n\n        setTimeout(() => this.play(f, size, 0.25, 'sine'), i * 80)\n      })\n    }, this.timestamp - now)\n\n    this.timestamp = Math.max(this.timestamp, now) + (this.queued > 10 ? (this.queued > 20 ? 20 : 40) : 80)\n  }\n\n  disconnect() {\n    this.context && this.context.state === 'running' && this.context.close()\n  }\n}\n\nexport default Sfx\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TradeList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TradeList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TradeList.vue?vue&type=template&id=6bdefb99&\"\nimport script from \"./TradeList.vue?vue&type=script&lang=js&\"\nexport * from \"./TradeList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TradeList.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"chart\"}},[_c('div',{ref:\"chartContainer\",staticClass:\"chart__container\"}),_c('div',{ref:\"chartWidthHandler\",staticClass:\"chart__handler -width\",on:{\"mousedown\":function($event){return _vm.startManualResize($event, 'width')},\"dblclick\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.resetWidth($event)}}}),_c('div',{ref:\"chartHeightHandler\",staticClass:\"chart__handler -height\",on:{\"mousedown\":function($event){return _vm.startManualResize($event, 'height')},\"dblclick\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.resetHeight($event)}}}),_c('div',{staticClass:\"chart__series\"},[_vm._l((_vm.activeSeries),function(serie,index){return _c('SerieControl',{key:index,attrs:{\"id\":serie,\"legend\":_vm.legend[serie]}})}),(_vm.availableSeries.length)?_c('dropdown',{staticClass:\"available-series mt15 -left\",attrs:{\"options\":_vm.availableSeries,\"placeholder\":\"+ serie\"},on:{\"output\":function($event){return _vm.$store.commit('settings/TOGGLE_SERIE', { id: _vm.availableSeries[$event], value: true })}}}):_vm._e()],2),_c('div',{staticClass:\"chart__controls\"},[_c('button',{staticClass:\"btn -small\",on:{\"click\":_vm.refreshChart}},[_vm._v(\"Refresh\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"serie\"},[_c('div',{staticClass:\"serie__name\",on:{\"click\":_vm.edit}},[_vm._v(_vm._s(_vm.id))]),(_vm.legend)?_c('div',{staticClass:\"serie__legend\"},[_vm._v(_vm._s(_vm.legend))]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"serie-dialog dialog-mask\",on:{\"mousedown\":function($event){return _vm.cancelIfOutside($event)}}},[_c('div',{staticClass:\"dialog-content\"},[_c('header',[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"column -center\"},[_c('dropdown',{staticClass:\"available-types -left -center\",attrs:{\"selected\":_vm.type,\"label\":\"Type\",\"options\":_vm.availableTypes,\"placeholder\":\"type\"},on:{\"output\":function($event){return _vm.$store.commit('settings/SET_SERIE_TYPE', { id: _vm.id, value: $event })}}}),_c('div',{staticClass:\"form-group\"},[_c('label',{directives:[{name:\"tippy\",rawName:\"v-tippy\",value:({ placement: 'bottom' }),expression:\"{ placement: 'bottom' }\"}],staticClass:\"checkbox-control -on-off\",attrs:{\"title\":!_vm.enabled ? 'Enable ' + _vm.id : 'Disable ' + _vm.id},on:{\"change\":function($event){return _vm.$store.commit('settings/TOGGLE_SERIE', { id: _vm.id, value: $event.target.checked })}}},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.enabled}}),_c('div')])])],1)]),_c('div',{staticClass:\"dialog-body grid\"},_vm._l((_vm.model),function(option,index){return _c('div',{key:index,staticClass:\"form-group\",class:{\n          'w-100': option.type === 'string' || option.type === 'position',\n          '-tight': option.type === 'boolean' || option.type === 'color',\n          '-inline': option.type === 'color' || option.type === 'boolean'\n        }},[(option.label !== false)?_c('label',[_vm._v(_vm._s(option.label))]):_vm._e(),(option.type === 'string' || option.type === 'number')?[_c('editable',{staticClass:\"form-control\",attrs:{\"content\":option.value},on:{\"output\":function($event){return _vm.validate(option, $event)}}})]:_vm._e(),(option.type === 'color')?[_c('verte',{attrs:{\"picker\":\"square\",\"menuPosition\":\"left\",\"model\":\"rgb\",\"value\":option.value,\"colorHistory\":_vm.colors},on:{\"input\":function($event){return _vm.validate(option, $event)}}})]:_vm._e(),(option.type === 'boolean')?[_c('label',{staticClass:\"checkbox-control\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":option.value},on:{\"change\":function($event){return _vm.validate(option, $event.target.checked)}}}),_c('div')])]:_vm._e(),(option.type === 'position')?[_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"-fill\"},[_c('div',{staticClass:\"text-center\"},[_vm._v(\"Start\")]),_vm._m(0,true),_c('input',{staticClass:\"w-100\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\".1\"},domProps:{\"value\":option.value.top},on:{\"input\":function($event){return _vm.setScale('top', $event.target.value)}}})]),_c('div',{staticClass:\"-fill\"},[_c('div',{staticClass:\"text-center\"},[_vm._v(\"End\")]),_vm._m(1,true),_c('input',{staticClass:\"w-100  -reverse\",attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"1\",\"step\":\".1\"},domProps:{\"value\":option.value.bottom},on:{\"input\":function($event){return _vm.setScale('bottom', $event.target.value)}}})])])]:_vm._e()],2)}),0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"column help-text\"},[_c('div',{staticClass:\"text-left\"},[_vm._v(\"Start at top\")]),_c('div',{staticClass:\"text-right\"},[_vm._v(\"Start at bottom\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"column help-text\"},[_c('div',{staticClass:\"text-left\"},[_vm._v(\"End at top\")]),_c('div',{staticClass:\"text-right\"},[_vm._v(\"End at bottom\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"serie-dialog dialog-mask\" @mousedown=\"cancelIfOutside($event)\">\n    <div class=\"dialog-content\">\n      <header>\n        <div class=\"title\">{{ title }}</div>\n        <div class=\"column -center\">\n          <dropdown\n            class=\"available-types -left -center\"\n            :selected=\"type\"\n            label=\"Type\"\n            :options=\"availableTypes\"\n            placeholder=\"type\"\n            @output=\"$store.commit('settings/SET_SERIE_TYPE', { id, value: $event })\"\n          ></dropdown>\n          <div class=\"form-group\">\n            <label\n              class=\"checkbox-control -on-off\"\n              v-tippy=\"{ placement: 'bottom' }\"\n              :title=\"!enabled ? 'Enable ' + id : 'Disable ' + id\"\n              @change=\"$store.commit('settings/TOGGLE_SERIE', { id, value: $event.target.checked })\"\n            >\n              <input type=\"checkbox\" class=\"form-control\" :checked=\"enabled\" />\n              <div></div>\n            </label>\n          </div>\n        </div>\n      </header>\n      <div class=\"dialog-body grid\">\n        <div\n          v-for=\"(option, index) in model\"\n          :key=\"index\"\n          class=\"form-group\"\n          :class=\"{\n            'w-100': option.type === 'string' || option.type === 'position',\n            '-tight': option.type === 'boolean' || option.type === 'color',\n            '-inline': option.type === 'color' || option.type === 'boolean'\n          }\"\n        >\n          <label v-if=\"option.label !== false\">{{ option.label }}</label>\n\n          <template v-if=\"option.type === 'string' || option.type === 'number'\">\n            <editable class=\"form-control\" :content=\"option.value\" @output=\"validate(option, $event)\"></editable>\n          </template>\n          <template v-if=\"option.type === 'color'\">\n            <verte\n              picker=\"square\"\n              menuPosition=\"left\"\n              model=\"rgb\"\n              :value=\"option.value\"\n              @input=\"validate(option, $event)\"\n              :colorHistory=\"colors\"\n            ></verte>\n          </template>\n          <template v-if=\"option.type === 'boolean'\">\n            <label class=\"checkbox-control\">\n              <input type=\"checkbox\" class=\"form-control\" :checked=\"option.value\" @change=\"validate(option, $event.target.checked)\" />\n              <div></div>\n            </label>\n          </template>\n          <template v-if=\"option.type === 'position'\">\n            <div class=\"column\">\n              <div class=\"-fill\">\n                <div class=\"text-center\">Start</div>\n                <div class=\"column help-text\">\n                  <div class=\"text-left\">Start at top</div>\n                  <div class=\"text-right\">Start at bottom</div>\n                </div>\n                <input class=\"w-100\" type=\"range\" min=\"0\" max=\"1\" step=\".1\" :value=\"option.value.top\" @input=\"setScale('top', $event.target.value)\" />\n              </div>\n              <div class=\"-fill\">\n                <div class=\"text-center\">End</div>\n                <div class=\"column help-text\">\n                  <div class=\"text-left\">End at top</div>\n                  <div class=\"text-right\">End at bottom</div>\n                </div>\n                <input\n                  class=\"w-100  -reverse\"\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"1\"\n                  step=\".1\"\n                  :value=\"option.value.bottom\"\n                  @input=\"setScale('bottom', $event.target.value)\"\n                />\n              </div>\n            </div>\n          </template>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport seriesData from '../../data/series'\nimport store from '../../store'\nimport { camelToSentence, snakeToSentence } from '../../utils/helpers'\nimport { PALETTE } from '../../utils/colors'\n\nconst labels = {\n  scaleMargins: false,\n  color: 'Couleur',\n  lineWidth: 'Line width',\n  length: 'Length'\n}\n\nexport default {\n  data: () => ({\n    title: 'Serie',\n    enabled: true,\n    type: 'line',\n    model: [],\n    options: [],\n    availableTypes: { line: 'Line', histogram: 'Histogram', candlestick: 'Candlestick', bar: 'Bar' }\n  }),\n  computed: {\n    colors: () => PALETTE,\n    userPreferences: function() {\n      const options = store.state.settings.series[this.id] || {}\n\n      return options\n    }\n  },\n  created() {\n    this.title = snakeToSentence(this.id)\n    this.enabled = typeof this.userPreferences.enabled === 'undefined' ? true : this.userPreferences.enabled\n    this.type = typeof this.userPreferences.type === 'undefined' ? seriesData[this.id].type : this.userPreferences.type\n\n    this.refreshModel()\n\n    if (module.hot) {\n      module.hot.dispose(() => {\n        debugger\n        this.$close(false)\n      })\n    }\n  },\n  methods: {\n    getType(value, key) {\n      let type = 'string'\n\n      try {\n        value = JSON.parse(value)\n      } catch (error) {\n        // empty\n      }\n\n      if (typeof value === 'number') {\n        type = 'number'\n      } else if (typeof value === 'boolean') {\n        type = 'boolean'\n      } else if (/^rgba?/.test(value) || /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(value)) {\n        type = 'color'\n      } else if (key === 'scaleMargins') {\n        type = 'position'\n      }\n\n      return type\n    },\n    refreshModel() {\n      this.model.splice(0, this.model.length)\n\n      for (let key in seriesData[this.id].options || {}) {\n        if (['overlay', 'scaleGroup'].indexOf(key) !== -1) {\n          continue\n        }\n\n        const defaultValue = seriesData[this.id].options[key]\n\n        let value\n\n        if (typeof this.userPreferences[key] !== 'undefined') {\n          value = this.userPreferences[key]\n        } else {\n          value = defaultValue\n        }\n\n        let label = labels[key]\n\n        if (typeof label === 'undefined') {\n          label = camelToSentence(key)\n        }\n\n        this.model.push({\n          key,\n          label,\n          value: value,\n          type: this.getType(defaultValue, key)\n        })\n      }\n    },\n    cancelIfOutside(event) {\n      if (event.target.classList.contains('dialog-mask')) {\n        this.$close(false)\n      }\n    },\n    validate(option, value) {\n      store.dispatch('settings/setSeriePreference', {\n        id: this.id,\n        key: typeof option === 'string' ? option : option.key,\n        value: value\n      })\n\n      const modelIndex = this.model.indexOf(option)\n\n      if (modelIndex !== -1) {\n        this.$set(this.model[modelIndex], 'value', value)\n      }\n    },\n    setScale(side, value) {\n      const option = this.getOptionByKey('scaleMargins')\n\n      const scale = {\n        top: option.value.top,\n        bottom: option.value.bottom\n      }\n\n      scale[side] = +value || 0\n\n      if (scale.top + scale.bottom > 1) {\n        scale[side] = 1 - scale[side === 'top' ? 'bottom' : 'top']\n      }\n\n      if (this.id === 'price') {\n        store.commit('settings/SET_CHART_PRICE_MARGINS', scale)\n      }\n\n      this.validate(option, scale)\n    },\n    getOptionByKey(key) {\n      for (let i = 0; i < this.model.length; i++) {\n        if (this.model[i].key === key) {\n          return this.model[i]\n        }\n      }\n    },\n    setType(type) {\n      this.validate('type', type)\n    },\n    getValue(key) {\n      const preferedValue = (store.state.settings.series[this.id] || {})[key]\n      const defaultValue = seriesData[this.id].options[key]\n\n      if (typeof preferedValue !== 'undefined') {\n        return preferedValue\n      } else {\n        return defaultValue\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SerieDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SerieDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SerieDialog.vue?vue&type=template&id=cad3cc2e&\"\nimport script from \"./SerieDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./SerieDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"serie\">\n    <div class=\"serie__name\" @click=\"edit\">{{ id }}</div>\n    <div v-if=\"legend\" class=\"serie__legend\">{{ legend }}</div>\n  </div>\n</template>\n\n<script>\nimport SerieDialog from './SerieDialog'\nimport { create } from 'vue-modal-dialogs'\n\nexport default {\n  props: ['id', 'legend'],\n  methods: {\n    edit() {\n      const dialog = create(SerieDialog, 'id')\n      dialog(this.id)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.serie {\n  display: flex;\n  align-items: center;\n\n  &__name {\n    position: relative;\n    cursor: pointer;\n\n    &:hover:before {\n      content: '';\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: -2px;\n      height: 2px;\n      background-color: white;\n    }\n  }\n\n  &__legend {\n    color: lighten($green, 20%);\n    margin-left: 0.4em;\n    font-family: monospace;\n    text-shadow: 1px 1px black;\n  }\n\n  &__control {\n    display: none;\n\n    a {\n      display: block;\n      margin: 0 0.2em;\n      color: white;\n\n      i {\n        font-size: 0.75em;\n      }\n    }\n  }\n\n  &:hover {\n    .serie__control {\n      display: flex;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SerieControl.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SerieControl.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SerieControl.vue?vue&type=template&id=501c7fc4&\"\nimport script from \"./SerieControl.vue?vue&type=script&lang=js&\"\nexport * from \"./SerieControl.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SerieControl.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"chart\">\r\n    <div class=\"chart__container\" ref=\"chartContainer\"></div>\r\n    <div\r\n      class=\"chart__handler -width\"\r\n      ref=\"chartWidthHandler\"\r\n      @mousedown=\"startManualResize($event, 'width')\"\r\n      @dblclick.stop.prevent=\"resetWidth\"\r\n    ></div>\r\n    <div\r\n      class=\"chart__handler -height\"\r\n      ref=\"chartHeightHandler\"\r\n      @mousedown=\"startManualResize($event, 'height')\"\r\n      @dblclick.stop.prevent=\"resetHeight\"\r\n    ></div>\r\n\r\n    <div class=\"chart__series\">\r\n      <SerieControl v-for=\"(serie, index) in activeSeries\" :key=\"index\" :id=\"serie\" :legend=\"legend[serie]\" />\r\n\r\n      <dropdown\r\n        class=\"available-series mt15 -left\"\r\n        v-if=\"availableSeries.length\"\r\n        :options=\"availableSeries\"\r\n        placeholder=\"+ serie\"\r\n        @output=\"$store.commit('settings/TOGGLE_SERIE', { id: availableSeries[$event], value: true })\"\r\n      ></dropdown>\r\n    </div>\r\n    <div class=\"chart__controls\">\r\n      <button class=\"btn -small\" @click=\"refreshChart\">Refresh</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport '../../data/typedef'\r\nimport { mapState } from 'vuex'\r\n// import VueGridLayout from 'vue-grid-layout';\r\nimport ChartController from './chartController'\r\nimport { cacheRange, saveChunk } from './chartCache'\r\nimport seriesData from '../../data/series'\r\nimport socket from '../../services/socket'\r\n\r\nimport { formatPrice, formatAmount, formatTime, getHms } from '../../utils/helpers'\r\n\r\nimport SerieControl from './SerieControl.vue'\r\n\r\n/**\r\n * @type {ChartController}\r\n */\r\nlet chart = null\r\n\r\nexport default {\r\n  components: {\r\n    SerieControl\r\n    /* GridLayout: VueGridLayout.GridLayout,\r\n    GridItem: VueGridLayout.GridItem */\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      resizing: {},\r\n      fetching: false,\r\n      legend: {},\r\n      seriesLayout: null\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('app', ['actives', 'activeSeries']),\r\n    ...mapState('settings', [\r\n      'debug',\r\n      'pair',\r\n      'timeframe',\r\n      'exchanges',\r\n      'chartHeight',\r\n      'sidebarWidth',\r\n      'chartRefreshRate',\r\n      'showExchangesBar',\r\n      'timezoneOffset',\r\n      'series'\r\n    ]),\r\n    availableSeries: function() {\r\n      return Object.keys(seriesData).filter(id => this.activeSeries.indexOf(id) === -1)\r\n    }\r\n  },\r\n\r\n  created() {\r\n    chart = new ChartController()\r\n\r\n    socket.$on('trades', this.onTrades)\r\n\r\n    this.onStoreMutation = this.$store.subscribe(mutation => {\r\n      switch (mutation.type) {\r\n        case 'settings/SET_TIMEZONE_OFFSET':\r\n          chart.clearChart()\r\n          chart.renderVisibleChunks()\r\n          break\r\n        case 'app/EXCHANGE_UPDATED':\r\n          chart.renderVisibleChunks()\r\n          break\r\n        case 'settings/SET_PAIR':\r\n          chart.clear()\r\n          break\r\n        case 'settings/SET_TIMEFRAME':\r\n          chart.clear()\r\n          this.fetch()\r\n          break\r\n        case 'settings/SET_CHART_REFRESH_RATE':\r\n          chart.clearQueue()\r\n          chart.setupQueue()\r\n          break\r\n        case 'settings/SET_SERIE_OPTION':\r\n          chart.setSerieOption(mutation.payload)\r\n          break\r\n        case 'settings/SET_SERIE_TYPE':\r\n          chart.rebuildSerie(mutation.payload.id)\r\n          break\r\n        case 'settings/TOGGLE_SERIE':\r\n          chart.toggleSerie(mutation.payload)\r\n          break\r\n        case 'settings/SET_CHART_PRICE_MARGINS':\r\n          chart.setPriceMargins(mutation.payload)\r\n          break\r\n        case 'settings/TOGGLE_EXCHANGES_BAR':\r\n          setTimeout(this.refreshChartDimensions.bind(this))\r\n          break\r\n        case 'app/SET_OPTIMAL_DECIMAL':\r\n        case 'settings/SET_DECIMAL_PRECISION':\r\n          // eslint-disable-next-line no-case-declarations\r\n          const priceFormat = { precision: mutation.payload, minMove: 1 / Math.pow(10, mutation.payload) }\r\n\r\n          chart.setSerieOption({\r\n            id: 'price',\r\n            key: 'priceFormat.precision',\r\n            value: priceFormat.precision\r\n          })\r\n\r\n          chart.setSerieOption({\r\n            id: 'price',\r\n            key: 'priceFormat.minMove',\r\n            value: priceFormat.minMove\r\n          })\r\n\r\n          if (!this.$store.state.settings.series['price']) {\r\n            this.$store.state.settings.series['price'] = {}\r\n          }\r\n\r\n          this.$store.state.settings.series['price'].priceFormat = priceFormat\r\n\r\n          break\r\n      }\r\n    })\r\n  },\r\n\r\n  mounted() {\r\n    console.log(`[chart.mounted]`)\r\n\r\n    chart.createChart(this.$refs.chartContainer, this.getChartDimensions())\r\n    chart.setupQueue()\r\n    this.keepAlive()\r\n\r\n    this.refreshSeriesLayout()\r\n\r\n    this.bindChartEvents()\r\n    this.bindBrowserResize()\r\n\r\n    this.fetch()\r\n  },\r\n\r\n  beforeDestroy() {\r\n    this.unbindChartEvents()\r\n    this.unbindBrowserResize()\r\n\r\n    this.onStoreMutation()\r\n\r\n    chart.destroy()\r\n\r\n    clearTimeout(this._keepAliveTimeout)\r\n\r\n    socket.$off('trades', this.onTrades)\r\n  },\r\n\r\n  methods: {\r\n    refreshSeriesLayout() {\r\n      const layout = []\r\n\r\n      for (let serie of chart.activeSeries) {\r\n        layout.push({\r\n          x: 0,\r\n          y: layout.length,\r\n          w: 1,\r\n          h: 1,\r\n          i: serie.id\r\n        })\r\n      }\r\n\r\n      this.seriesLayout = layout\r\n    },\r\n\r\n    /**\r\n     * fetch whatever is missing based on visiblerange\r\n     * @param {boolean} clear will clear the chart / initial fetch\r\n     */\r\n    fetch() {\r\n      if (!socket.canFetch()) {\r\n        return Promise.reject('Fetch is disabled')\r\n      }\r\n\r\n      const visibleRange = chart.getVisibleRange()\r\n      const isChartEmpty = chart.isEmpty()\r\n      let rangeToFetch\r\n\r\n      if (isChartEmpty) {\r\n        console.log(`[chart] fetch (real time range)`)\r\n\r\n        rangeToFetch = chart.getRealtimeRange()\r\n      } else if (visibleRange.from === cacheRange.from) {\r\n        console.log(`[chart] fetch (chunk on the left)`)\r\n\r\n        rangeToFetch = {\r\n          from: visibleRange.from - chart.getOptimalRangeLength(),\r\n          to: visibleRange.from\r\n        }\r\n      }\r\n\r\n      /* else if (false && visibleRange.to === cacheRange.to) {\r\n        console.log(`[chart] fetch (chunk on the right)`)\r\n\r\n        rangeToFetch = {\r\n          from: visibleRange.to,\r\n          to: visibleRange.to + chart.getOptimalRangeLength()\r\n        }\r\n      }*/\r\n\r\n      if (!rangeToFetch) {\r\n        return Promise.reject('Nothing to fetch')\r\n      }\r\n\r\n      chart.lockRender()\r\n\r\n      return socket\r\n        .fetchHistoricalData(parseInt(rangeToFetch.from * 1000), parseInt(rangeToFetch.to * 1000 - 1))\r\n        .then(({ data, from, to, format }) => {\r\n          let chunk\r\n\r\n          switch (format) {\r\n            case 'point':\r\n              chunk = {\r\n                from,\r\n                to,\r\n                bars: data\r\n              }\r\n              break\r\n            default:\r\n              chunk = chart.groupTradesIntoBars(data)\r\n              break\r\n          }\r\n\r\n          if (chunk) {\r\n            saveChunk(chunk)\r\n          }\r\n\r\n          console.log(`[fetch] success (${data.length} new ${format}s)`)\r\n\r\n          chart.renderVisibleChunks()\r\n        })\r\n        .catch(err => {\r\n          console.error(err)\r\n        })\r\n        .then(() => {\r\n          chart.unlockRender()\r\n        })\r\n    },\r\n\r\n    /* onClick(param) {\r\n      const time = param.time;\r\n      let trades = socket.getBarTrades(time)\r\n\r\n      if (!trades) {\r\n        trades = [];\r\n\r\n        for (let i = 0; i < cache.length; i++) {\r\n          if (time >= cache[i].from && time <= cache[i].to) {\r\n            for (let j = 0; j < cache[i].bars.length; j++) {\r\n              if (cache[i].bars[j].timestamp == time) {\r\n                trades.push(cache[i].bars[j]);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      \r\n      console.log('trades at bar', time, ':')\r\n\r\n      console.log(trades)\r\n\r\n      console.log('\\n')\r\n    }, */\r\n\r\n    /**\r\n     * TV chart mousemove event\r\n     * @param{TV.MouseEventParams} param tv mousemove param\r\n     */\r\n    onCrosshair(param) {\r\n      if (\r\n        param === undefined ||\r\n        param.time === undefined ||\r\n        param.point.x < 0 ||\r\n        param.point.x > this.$refs.chartContainer.clientWidth ||\r\n        param.point.y < 0 ||\r\n        param.point.y > this.$refs.chartContainer.clientHeight\r\n      ) {\r\n        this.legend = {}\r\n      } else {\r\n        for (let serie of chart.activeSeries) {\r\n          const data = param.seriesPrices.get(serie.api)\r\n\r\n          if (!data) {\r\n            this.$set(this.legend, serie.id, 'n/a')\r\n            continue\r\n          }\r\n\r\n          if (data.close) {\r\n            this.$set(\r\n              this.legend,\r\n              serie.id,\r\n              `O: ${formatPrice(data.open)} H: ${formatPrice(data.high)} L: ${formatPrice(data.low)} C: ${formatPrice(data.close)}`\r\n            )\r\n          } else {\r\n            this.$set(this.legend, serie.id, serie.options.formatVolume ? formatAmount(data) : formatPrice(data))\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * @param{Trade[]} trades trades to process\r\n     */\r\n    onTrades(trades) {\r\n      if (chart.preventRender || this.chartRefreshRate) {\r\n        chart.queueTrades(trades)\r\n        return\r\n      }\r\n\r\n      chart.renderRealtimeTrades(trades)\r\n    },\r\n\r\n    /**\r\n     * on click on height handler\r\n     * @param {MouseEvent} event mousedown event\r\n     */\r\n    startManualResize(event, side) {\r\n      if (event.which === 3) {\r\n        return\r\n      }\r\n\r\n      if (!this._doManualResize) {\r\n        this._doManualResize = this.doManualResize.bind(this)\r\n\r\n        window.addEventListener('mousemove', this._doManualResize, false)\r\n      }\r\n\r\n      if (!this._stopManualResize) {\r\n        this._stopManualResize = this.stopManualResize.bind(this)\r\n\r\n        window.addEventListener('mouseup', this._stopManualResize, false)\r\n      }\r\n\r\n      if (side === 'height') {\r\n        this.resizing[side] = event.pageY\r\n      } else {\r\n        this.resizing[side] = event.pageX\r\n      }\r\n\r\n      console.info(`[chart] lock pan until further notice`)\r\n      chart.panPrevented = true\r\n    },\r\n\r\n    /**\r\n     * on drag height handler\r\n     * @param {MouseEvent} event mousemove event\r\n     */\r\n    doManualResize(event) {\r\n      if (!isNaN(this.resizing.width)) {\r\n        let referenceWidth\r\n\r\n        if (this.sidebarWidth !== null) {\r\n          referenceWidth = window.innerWidth - this.sidebarWidth\r\n        } else {\r\n          referenceWidth = chart.chartInstance.options().width\r\n        }\r\n\r\n        this.refreshChartDimensions(referenceWidth + (event.pageX - this.resizing.width))\r\n      } else if (!isNaN(this.resizing.height)) {\r\n        this.refreshChartDimensions(null, (this.chartHeight || chart.options().height) + (event.pageY - this.resizing.height))\r\n      }\r\n    },\r\n\r\n    /**\r\n     * on end of drag height handler\r\n     * @param {MouseEvent} event mouseup event\r\n     */\r\n    stopManualResize() {\r\n      if (this.resizing.width) {\r\n        this.$store.commit('settings/SET_SIDEBAR_WIDTH', window.innerWidth - this.$refs.chartContainer.clientWidth)\r\n\r\n        delete this.resizing.width\r\n      } else if (this.resizing.height) {\r\n        this.$store.commit('settings/SET_CHART_HEIGHT', this.$refs.chartContainer.clientHeight)\r\n\r\n        delete this.resizing.height\r\n      }\r\n\r\n      if (this._doManualResize) {\r\n        window.removeEventListener('mousemove', this._doManualResize)\r\n        delete this._doManualResize\r\n      }\r\n\r\n      if (this._stopManualResize) {\r\n        window.removeEventListener('mouseup', this._stopManualResize)\r\n        delete this._stopManualResize\r\n      }\r\n\r\n      console.info(`[chart] unlock pan`)\r\n      chart.panPrevented = false\r\n    },\r\n\r\n    /**\r\n     * on dblclick on height handler\r\n     * @param {MouseEvent} event dbl click event\r\n     */\r\n    resetHeight() {\r\n      delete this.resizing.height\r\n\r\n      this.$store.commit('settings/SET_CHART_HEIGHT', null)\r\n\r\n      this.refreshChartDimensions()\r\n    },\r\n\r\n    /**\r\n     * on dblclick on width handler\r\n     * @param {MouseEvent} event dbl click event\r\n     */\r\n    resetWidth() {\r\n      delete this.resizing.width\r\n\r\n      this.$store.commit('settings/SET_SIDEBAR_WIDTH', null)\r\n\r\n      this.refreshChartDimensions()\r\n    },\r\n\r\n    /**\r\n     * refresh chart dimensions based on container dimensions\r\n     */\r\n    refreshChartDimensions(width, height) {\r\n      const dimensions = this.getChartDimensions()\r\n\r\n      chart.chartInstance.resize(width || dimensions.width, height || dimensions.height)\r\n\r\n      this.$el.parentElement.style.width = (width || dimensions.width) + 'px'\r\n    },\r\n\r\n    /**\r\n     * get chart height based on container dimensions\r\n     */\r\n    getChartDimensions() {\r\n      const w = document.documentElement.clientWidth\r\n      const h = document.documentElement.clientHeight\r\n\r\n      return {\r\n        width: window.innerWidth < 768 ? window.innerWidth : this.sidebarWidth > 0 ? window.innerWidth - this.sidebarWidth : w - 320,\r\n        height:\r\n          window.innerWidth >= 768\r\n            ? this.$el.parentElement.clientHeight - (this.showExchangesBar ? 24 : 0)\r\n            : this.chartHeight > 0\r\n            ? this.chartHeight\r\n            : +Math.min(w / 2, Math.max(300, h / 3)).toFixed()\r\n      }\r\n    },\r\n\r\n    /**\r\n     * on browser resize\r\n     * @param {Event} event resize event\r\n     */\r\n    doWindowResize() {\r\n      clearTimeout(this._resizeTimeout)\r\n\r\n      this._resizeTimeout = setTimeout(() => {\r\n        this.refreshChartDimensions()\r\n      }, 250)\r\n    },\r\n\r\n    /**\r\n     * on chart pan\r\n     */\r\n    onPan() {\r\n      if (chart.panPrevented) {\r\n        return\r\n      }\r\n\r\n      if (this._onPanTimeout) {\r\n        clearTimeout(this._onPanTimeout)\r\n        this._onPanTimeout = null\r\n      }\r\n\r\n      this._onPanTimeout = setTimeout(() => {\r\n        if (cacheRange.from === null) {\r\n          return\r\n        }\r\n\r\n        if (this._keepAliveTimeout) {\r\n          clearTimeout(this._keepAliveTimeout)\r\n          delete this._keepAliveTimeout\r\n        }\r\n\r\n        this.keepAlive()\r\n\r\n        const visibleRange = chart.getVisibleRange()\r\n\r\n        console.log(\r\n          '[pan] current scrollPosition',\r\n          getHms(chart.chartInstance.timeScale().scrollPosition() * 1000),\r\n          '(from:',\r\n          formatTime(visibleRange.from),\r\n          ' to:',\r\n          formatTime(visibleRange.to),\r\n          ')'\r\n        )\r\n\r\n        if (visibleRange.from <= cacheRange.from) {\r\n          this.panPrevented = true\r\n          this.fetch().then(() => {\r\n            this.panPrevented = false\r\n          })\r\n        } else if (\r\n          (visibleRange.from <= chart.renderedRange.from && cacheRange.from <= chart.renderedRange.from) ||\r\n          (visibleRange.to > chart.renderedRange.to && cacheRange.to > chart.renderedRange.to)\r\n        ) {\r\n          chart.renderVisibleChunks()\r\n        }\r\n      }, 200)\r\n    },\r\n\r\n    bindChartEvents() {\r\n      // chart.chartInstance.subscribeClick(this.onClick)\r\n      chart.chartInstance.subscribeCrosshairMove(this.onCrosshair)\r\n      chart.chartInstance.subscribeVisibleTimeRangeChange(this.onPan)\r\n    },\r\n\r\n    unbindChartEvents() {\r\n      // chart.chartInstance.unsubscribeClick(this.onClick)\r\n      chart.chartInstance.unsubscribeCrosshairMove(this.onCrosshair)\r\n      chart.chartInstance.unsubscribeVisibleTimeRangeChange(this.onPan)\r\n    },\r\n\r\n    bindBrowserResize() {\r\n      this._doWindowResize = this.doWindowResize.bind(this)\r\n      window.addEventListener('resize', this._doWindowResize, false)\r\n    },\r\n\r\n    unbindBrowserResize() {\r\n      window.removeEventListener('resize', this._doWindowResize)\r\n    },\r\n\r\n    keepAlive() {\r\n      if (this._keepAliveTimeout) {\r\n        chart.redraw(true)\r\n      } else {\r\n        console.log(`[chart] setup keepalive`)\r\n      }\r\n\r\n      this._keepAliveTimeout = setTimeout(this.keepAlive.bind(this), 1000 * 60 * 15)\r\n    },\r\n\r\n    refreshChart() {\r\n      chart.redraw()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n#chart {\r\n  position: relative;\r\n\r\n  &:hover .chart__series,\r\n  &:hover .chart__controls {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.chart__container {\r\n  position: relative;\r\n  width: calc(100% + 1px);\r\n\r\n  -webkit-touch-callout: none;\r\n  -webkit-user-select: none;\r\n  -khtml-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n\r\n  &.-fetching {\r\n    opacity: 0.5;\r\n  }\r\n}\r\n\r\n.chart__series {\r\n  position: absolute;\r\n  top: 1em;\r\n  left: 1em;\r\n  font-family: Roboto Condensed;\r\n  z-index: 2;\r\n  opacity: 0;\r\n  transition: opacity 0.2s $easeOutExpo;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n}\r\n\r\n.chart__layout {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 3;\r\n}\r\n\r\n.chart__handler {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 2;\r\n\r\n  &.-width {\r\n    top: 0;\r\n    left: auto;\r\n    width: 16px;\r\n    margin-right: -8px;\r\n    cursor: ew-resize;\r\n    display: none;\r\n\r\n    @media screen and (min-width: 768px) {\r\n      display: block;\r\n    }\r\n  }\r\n\r\n  &.-height {\r\n    height: 8px;\r\n    margin-top: -4px;\r\n    cursor: row-resize;\r\n\r\n    @media screen and (min-width: 768px) {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n\r\n.chart__controls {\r\n  position: absolute;\r\n  top: 1em;\r\n  right: 5em;\r\n  font-family: Roboto Condensed;\r\n  z-index: 2;\r\n  opacity: 0;\r\n  transition: opacity 0.2s $easeOutExpo;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: flex-start;\r\n\r\n  @media screen and (max-width: 767px) {\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chart.vue?vue&type=template&id=7dd1a394&\"\nimport script from \"./Chart.vue?vue&type=script&lang=js&\"\nexport * from \"./Chart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chart.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"counters\"},_vm._l((_vm.activeSteps),function(step,index){return _c('li',{key:index,staticClass:\"counter\",attrs:{\"duration\":step.duration}},[_c('div',{staticClass:\"counter__side -buy\",style:({ width: (step.buy / (step.buy + step.sell)) * 100 + '%' })},[(!_vm.countersCount)?_c('span',[_vm._v(_vm._s(_vm.$root.formatAmount(step.buy)))]):_c('span',[_vm._v(_vm._s(step.buy))])]),_c('div',{staticClass:\"counter__side -sell\",style:({ width: (step.sell / (step.buy + step.sell)) * 100 + '%' })},[(!_vm.countersCount)?_c('span',[_vm._v(_vm._s(_vm.$root.formatAmount(step.sell)))]):_c('span',[_vm._v(_vm._s(step.sell))])])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ul class=\"counters\">\n    <li v-for=\"(step, index) in activeSteps\" :key=\"index\" v-bind:duration=\"step.duration\" class=\"counter\">\n      <div class=\"counter__side -buy\" v-bind:style=\"{ width: (step.buy / (step.buy + step.sell)) * 100 + '%' }\">\n        <span v-if=\"!countersCount\">{{ $root.formatAmount(step.buy) }}</span>\n        <span v-else>{{ step.buy }}</span>\n      </div>\n      <div class=\"counter__side -sell\" v-bind:style=\"{ width: (step.sell / (step.buy + step.sell)) * 100 + '%' }\">\n        <span v-if=\"!countersCount\">{{ $root.formatAmount(step.sell) }}</span>\n        <span v-else>{{ step.sell }}</span>\n      </div>\n    </li>\n  </ul>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\n\nimport { getHms } from '../utils/helpers'\n\nimport socket from '../services/socket'\n\nconst CHUNK = {\n  timestamp: null,\n  buy: 0,\n  sell: 0\n}\n\nconst COUNTERS = []\n\nexport default {\n  data() {\n    return {\n      topElement: {},\n      steps: []\n    }\n  },\n  computed: {\n    ...mapState('app', ['actives']),\n    ...mapState('settings', ['preferQuoteCurrencySize', 'thresholds', 'liquidationsOnly', 'countersSteps', 'countersCount', 'countersGranularity']),\n    activeSteps: function() {\n      return this.steps.filter(a => a.hasData)\n    }\n  },\n  created() {\n    socket.$on('sums', this.onSums)\n\n    this.onStoreMutation = this.$store.subscribe(mutation => {\n      switch (mutation.type) {\n        case 'settings/SET_PAIR':\n          this.createCounters()\n          break\n        case 'settings/REPLACE_COUNTERS':\n        case 'settings/TOGGLE_LIQUIDATIONS_ONLY':\n        case 'settings/TOGGLE_COUNTERS_COUNT':\n          this.createCounters()\n          break\n      }\n    })\n\n    this.createCounters()\n\n    this._populateCountersInterval = setInterval(this.populateCounters.bind(this), this.countersGranularity)\n  },\n  mounted() {},\n  beforeDestroy() {\n    socket.$off('sums', this.onSums)\n\n    this.onStoreMutation()\n\n    clearInterval(this._populateCountersInterval)\n  },\n  methods: {\n    onSums(sums) {\n      const volume = {\n        buy: sums.vbuy,\n        sell: sums.vsell\n      }\n\n      if (this.liquidationsOnly) {\n        volume.buy = sums.lbuy\n        volume.sell = sums.lsell\n      } else if (this.countersCount) {\n        volume.buy = sums.cbuy\n        volume.sell = sums.csell\n      }\n\n      if (volume.buy || volume.sell) {\n        if (!CHUNK.timestamp) {\n          CHUNK.timestamp = sums.timestamp\n        }\n\n        CHUNK.buy += volume.buy\n        CHUNK.sell += volume.sell\n\n        for (let i = 0; i < this.steps.length; i++) {\n          this.steps[i].buy += volume.buy\n          this.steps[i].sell += volume.sell\n        }\n      }\n    },\n    clearCounters() {\n      COUNTERS.splice(0, COUNTERS.length)\n      CHUNK.timestamp = null\n      CHUNK.buy = CHUNK.sell = 0\n\n      this.steps.splice(0, this.steps.length)\n    },\n    createCounters() {\n      this.clearCounters()\n\n      for (let step of this.countersSteps) {\n        COUNTERS.push({\n          duration: step,\n          chunks: []\n        })\n      }\n\n      for (let counter of COUNTERS) {\n        const first = COUNTERS.indexOf(counter) === 0\n\n        this.steps.push({\n          duration: getHms(counter.duration),\n          buy: 0,\n          sell: 0,\n          hasData: first\n        })\n      }\n\n      setTimeout(() => {\n        const counterElement = this.$el.querySelector('.counter:first-child')\n        this.topElement.buy = counterElement.children[0]\n        this.topElement.sell = counterElement.children[1]\n      })\n    },\n    populateCounters() {\n      const now = +new Date()\n\n      if (CHUNK.timestamp) {\n        COUNTERS[0].chunks.push({\n          timestamp: CHUNK.timestamp,\n          buy: CHUNK.buy,\n          sell: CHUNK.sell\n        })\n\n        CHUNK.timestamp = null\n        CHUNK.buy = 0\n        CHUNK.sell = 0\n      }\n\n      let chunksToDecrease = []\n      let downgradeBuy\n      let downgradeSell\n\n      for (let i = 0; i < COUNTERS.length; i++) {\n        if (chunksToDecrease.length) {\n          Array.prototype.push.apply(COUNTERS[i].chunks, chunksToDecrease.splice(0, chunksToDecrease.length))\n\n          if (!this.steps[i].hasData) {\n            this.steps[i].hasData = true\n          }\n        }\n\n        downgradeBuy = 0\n        downgradeSell = 0\n\n        let to = 0\n\n        for (let j = 0; j < COUNTERS[i].chunks.length; j++) {\n          downgradeBuy += COUNTERS[i].chunks[j].buy\n          downgradeSell += COUNTERS[i].chunks[j].sell\n          if (COUNTERS[i].chunks[j].timestamp >= now - COUNTERS[i].duration) {\n            to = j\n            break\n          }\n        }\n\n        if (to) {\n          chunksToDecrease = COUNTERS[i].chunks.splice(0, to + 1)\n          if (isNaN(this.steps[i].buy - downgradeBuy) || isNaN(this.steps[i].sell - downgradeSell)) debugger\n          this.steps[i].buy -= downgradeBuy\n          this.steps[i].sell -= downgradeSell\n        }\n      }\n    }\n  },\n  getCountersRange() {\n    const now = +new Date()\n    return {\n      from: now - this.countersSteps[this.countersSteps.length - 1],\n      to: now\n    }\n  },\n  getFirstPoint() {\n    for (let i = COUNTERS.length - 1; i >= 0; i--) {\n      for (let j = COUNTERS[i].chunks.length - 1; j >= 0; j--) {\n        return COUNTERS[i].chunks[j].timestamp\n      }\n    }\n\n    return null\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.counters {\n  display: flex;\n  flex-direction: column;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  pointer-events: none;\n}\n\n.counter {\n  display: flex;\n  position: relative;\n\n  &:before {\n    content: attr(duration);\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n    margin-top: 0.55em;\n    background-color: rgba(black, 0.1);\n    border-radius: 2px;\n    padding: 0.34em 0.4em;\n    font-size: 0.85em;\n    text-align: center;\n    pointer-events: none;\n    line-height: 1;\n    color: rgba(white, 0.75);\n    font-family: monospace;\n  }\n\n  .highlight {\n    position: absolute;\n    top: -0.2em;\n    animation: fly-high 2s $easeInExpo;\n    opacity: 0;\n    padding: 0.3em 0.4em;\n    box-shadow: 0 1px 1px rgba(black, 0.5);\n    box-shadow: 0 1px 16px rgba(black, 0.1);\n    z-index: 10;\n    font-size: 0.5em;\n    font-weight: 600;\n    font-family: 'Roboto Condensed';\n\n    @keyframes fly-high {\n      0% {\n        opacity: 1;\n        transform: translateY(-10%);\n      }\n      75% {\n        opacity: 0.75;\n      }\n      100% {\n        transform: translateY(-2em);\n        opacity: 0;\n      }\n    }\n  }\n\n  &__side {\n    display: flex;\n    align-items: center;\n    flex-grow: 1;\n\n    span {\n      position: relative;\n      padding: 0.5em;\n      font-size: 0.9em;\n      display: block;\n    }\n\n    &.-buy {\n      background-color: $green;\n\n      .highlight {\n        background-color: lighten($green, 10%);\n\n        left: 0.5em;\n      }\n    }\n\n    &.-sell {\n      background-color: $red;\n      justify-content: flex-end;\n\n      .highlight {\n        background-color: lighten($red, 10%);\n\n        right: 0.5em;\n      }\n    }\n  }\n}\n\n$num: 0;\n\n@while $num < 10 {\n  .counter:nth-child(#{$num}) .counter__side.-buy {\n    background-color: desaturate(darken($green, if($num % 2 == 0, 1 * $num, 0.5 * $num)), $num);\n  }\n\n  .counter:nth-child(#{$num}) .counter__side.-sell {\n    background-color: desaturate(darken($red, if($num % 2 == 0, 1 * $num, 0.5 * $num)), $num);\n  }\n\n  $num: $num + 1;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Counters.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Counters.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Counters.vue?vue&type=template&id=0b54da5c&\"\nimport script from \"./Counters.vue?vue&type=script&lang=js&\"\nexport * from \"./Counters.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Counters.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"stats\",attrs:{\"id\":\"stats\"},on:{\"mouseenter\":_vm.stopKeepAlive,\"mouseleave\":function($event){_vm.statsChart && _vm.keepAlive()}}},[(_vm.statsChart)?_c('div',{ref:\"chart\",staticClass:\"stats__chart\"}):_vm._e(),_c('ul',{staticClass:\"stats__counters\"},_vm._l((_vm.data),function(value,name){return _c('li',{key:name,staticClass:\"stat-counter\",on:{\"click\":function($event){return _vm.editByName(name)}}},[_c('div',{staticClass:\"stat-counter__name\",style:({ color: _vm.colors[name] })},[_vm._v(_vm._s(name))]),_c('div',{staticClass:\"stat-counter__value\"},[_vm._v(_vm._s(value))])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import store from '../store'\n\nexport default class Counter {\n  constructor(outputFunction, { options, model } = {}) {\n    this.outputFunction = outputFunction\n    this.period = (!isNaN(options.period) ? +options.period : store.state.settings.statsPeriod) || 0\n    this.precision = options.precision\n    this.color = options.color\n    this.granularity = Math.max(store.state.settings.statsGranularity, this.period / 50)\n    this.type = options.type || 'line'\n\n    /**\n     * @type {TV.ISeriesApi<Line>}\n     */\n    this.serie = null\n\n    this.timeouts = []\n\n    if (typeof model !== 'undefined') {\n      this.model = model\n    }\n\n    console.log('[counter.js] create', {\n      outputFunction: this.outputFunction,\n      period: this.period,\n      granularity: this.granularity\n    })\n\n    this.clear()\n\n    if (module.hot) {\n      module.hot.dispose(() => {\n        this.unbind()\n      })\n    }\n  }\n\n  clear() {\n    this.live = this.getModel()\n    this.stacks = []\n\n    for (let i = 0; i < this.timeouts.length; i++) {\n      clearTimeout(this.timeouts[i])\n    }\n  }\n\n  unbind() {\n    console.log('[counter.js] unbind')\n\n    this.clear()\n  }\n\n  onStats(timestamp, stats) {\n    const data = this.outputFunction(stats)\n\n    if (!this.stacks.length || timestamp > this.timestamp + this.granularity) {\n      this.appendStack(timestamp)\n    }\n\n    this.addData(data)\n  }\n\n  appendStack(timestamp) {\n    if (!timestamp) {\n      timestamp = +new Date()\n    }\n\n    this.stacks.push(this.getModel())\n\n    this.timestamp = Math.floor(timestamp / 1000) * 1000\n\n    this.timeouts.push(setTimeout(this.shiftStack.bind(this), this.period))\n  }\n\n  shiftStack(index = 0) {\n    const stack = this.stacks.splice(index, 1)[0]\n\n    if (!stack) {\n      return\n    }\n\n    this.substractData(stack)\n\n    this.timeouts.shift()\n  }\n\n  getModel() {\n    return 0\n  }\n\n  addData(data) {\n    this.stacks[this.stacks.length - 1] += data\n    this.live += data\n  }\n\n  substractData(data) {\n    this.live -= data\n  }\n\n  getValue() {\n    return this.live\n  }\n}\n","import Counter from './counter'\n\nexport default class MultiCounter extends Counter {\n  getModel() {\n    return JSON.parse(JSON.stringify(this.model))\n  }\n\n  addData(data) {\n    for (let i = 0; i < data.length; i++) {\n      this.stacks[this.stacks.length - 1][i] += data[i]\n      this.live[i] += data[i]\n    }\n  }\n\n  substractData(data) {\n    for (let i = 0; i < data.length; i++) {\n      this.live[i] -= data[i]\n    }\n  }\n}\n","<template>\n  <div id=\"stats\" class=\"stats\" @mouseenter=\"stopKeepAlive\" @mouseleave=\"statsChart && keepAlive()\">\n    <div v-if=\"statsChart\" class=\"stats__chart\" ref=\"chart\"></div>\n    <ul class=\"stats__counters\">\n      <li v-for=\"(value, name) in data\" :key=\"name\" class=\"stat-counter\" @click=\"editByName(name)\">\n        <div class=\"stat-counter__name\" :style=\"{ color: colors[name] }\">{{ name }}</div>\n        <div class=\"stat-counter__value\">{{ value }}</div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport * as TV from 'lightweight-charts'\nimport socket from '../services/socket'\nimport Counter from '../utils/counter'\nimport MultiCounter from '../utils/multiCounter'\nimport { defaultChartOptions, defaultLineOptions } from './chart/chartOptions'\n\nconst chartOptions = JSON.parse(JSON.stringify(defaultChartOptions))\nchartOptions.priceScale.position = 'none'\nchartOptions.timeScale.rightOffset = 0\nchartOptions.timeScale.secondsVisible = true\nchartOptions.priceScale.mode = 0\n\nconst lineOptions = JSON.parse(JSON.stringify(defaultLineOptions))\nlineOptions.overlay = true\nlineOptions.lineWidth = 2\nlineOptions.priceLineVisible = false\nlineOptions.scaleMargins = {\n  top: 0.05,\n  bottom: 0.05\n}\n\nimport StatDialog from './StatDialog'\nimport { create } from 'vue-modal-dialogs'\n\nimport { formatAmount, getVisibleRange } from '../utils/helpers'\n/** @type {Counter[]} */\nconst counters = []\n/** @type {TV.IChartApi} */\nlet chart\n\nexport default {\n  data() {\n    return {\n      data: {}\n    }\n  },\n  computed: {\n    ...mapState('settings', ['statsPeriod', 'statsChart', 'statsCounters']),\n    ...mapState('app', ['actives']),\n    colors() {\n      return this.statsCounters.reduce((obj, counter) => {\n        obj[counter.name] = counter.color\n        return obj\n      }, {})\n    }\n  },\n  created() {\n    this.onStoreMutation = this.$store.subscribe(mutation => {\n      switch (mutation.type) {\n        case 'settings/TOGGLE_STAT':\n          if (mutation.payload.value) {\n            this.createCounter(this.statsCounters[mutation.payload.index])\n          } else {\n            this.removeCounter(this.statsCounters[mutation.payload.index].name)\n          }\n          break\n        case 'settings/SET_STAT_PERIOD':\n        case 'settings/SET_STAT_OUTPUT':\n        case 'settings/SET_STAT_PRECISION':\n          this.refreshCounter(this.statsCounters[mutation.payload.index].name)\n          break\n        case 'settings/SET_STAT_NAME':\n          this.renameCounter(mutation.payload.value)\n          break\n        case 'settings/SET_PAIR':\n        case 'settings/SET_STATS_PERIOD':\n          this.prepareCounters()\n          break\n        case 'settings/SET_STAT_COLOR':\n          this.recolorCounter(this.statsCounters[mutation.payload.index].name, mutation.payload.value)\n          break\n        case 'settings/TOGGLE_CHART':\n        case 'settings/SET_SIDEBAR_WIDTH':\n          this.refreshChartDimensions(mutation.payload)\n          break\n        case 'settings/TOGGLE_STATS_CHART':\n          if (mutation.payload) {\n            this.createChart()\n          } else {\n            this.removeChart()\n          }\n          break\n      }\n    })\n  },\n  mounted() {\n    if (this.statsChart) {\n      this.createChart()\n    }\n    this.prepareCounters()\n    socket.$on('sums', this.onSums)\n  },\n  beforeDestroy() {\n    socket.$off('sums', this.onSums)\n    this.clearCounters()\n    this.removeChart()\n    this.onStoreMutation()\n\n    chart = null\n  },\n  methods: {\n    createChart() {\n      setTimeout(() => {\n        chart = TV.createChart(this.$refs.chart, chartOptions)\n        for (let i = 0; i < counters.length; i++) {\n          this.createCounterSerie(counters[i])\n        }\n      })\n\n      this.keepAlive()\n      this.chartUpdate()\n    },\n    createCounterSerie(counter) {\n      if (counter.serie) {\n        return\n      }\n\n      let methodName = 'addLineSeries'\n\n      if (counter.type === 'histogram') {\n        counter.type = 'histogram'\n        methodName = 'addHistogramSeries'\n      }\n\n      counter.serie = chart[methodName](\n        Object.assign({}, lineOptions, {\n          color: counter.color\n        })\n      )\n    },\n    removeChart() {\n      if (!chart) {\n        return\n      }\n\n      this.stopKeepAlive()\n      this.stopChartUpdate()\n\n      for (let i = 0; i < counters.length; i++) {\n        if (counters[i].serie) {\n          chart.removeSeries(counters[i].serie)\n          delete counters[i].serie\n        }\n      }\n\n      chart.remove()\n    },\n    stopKeepAlive() {\n      if (this._keepAliveTimeout) {\n        clearTimeout(this._keepAliveTimeout)\n        delete this._keepAliveTimeout\n\n        console.log(`[stats] clear keep alive for chart`)\n      }\n    },\n    chartUpdate() {\n      if (!this._chartUpdateInterval) {\n        this._chartUpdateInterval = setInterval(this.chartUpdate.bind(this), 1000)\n      }\n\n      const now = Math.floor(+new Date() / 1000)\n\n      for (let i = 0; i < counters.length; i++) {\n        if (counters[i].stacks.length) {\n          if (!counters[i].serie) {\n            continue\n          }\n\n          let value = counters[i].getValue()\n\n          const point = {\n            time: now,\n            value: value.length ? value.reduce((sum, a) => sum + a, 0) : value\n          }\n\n          if (counters[i].type === 'histogram' && !point.value) {\n            return\n          }\n\n          counters[i].serie.update(point)\n        }\n      }\n    },\n    stopChartUpdate() {\n      if (this._chartUpdateInterval) {\n        clearInterval(this._chartUpdateInterval)\n        delete this._chartUpdateInterval\n\n        console.log(`[stats] clear chart interval`)\n      }\n    },\n    keepAlive(timerId) {\n      if (!timerId && this._keepAliveTimeout) {\n        return\n      }\n\n      if (this._keepAliveTimeout) {\n        const visibleRange = getVisibleRange(chart, 1)\n\n        if (visibleRange) {\n          const scrollPosition = chart.timeScale().scrollPosition()\n\n          const countersSeries = counters.filter(a => a.serie).map(a => a.serie._series)\n          const data = counters.map(() => [])\n\n          const points = Array.from(chart.we.oe)\n\n          for (let i = Math.max(0, points.length - 200); i < points.length; i++) {\n            const series = Array.from(points[i][1].mapping)\n\n            for (let j = 0; j < series.length; j++) {\n              const index = countersSeries.indexOf(series[j][0])\n\n              if (index === -1 || !data[index]) {\n                continue\n              }\n\n              data[index].push(series[j][1])\n            }\n          }\n\n          this.removeChart()\n          this.createChart()\n\n          setTimeout(() => {\n            for (let k = 0; k < counters.length; k++) {\n              if (counters[k].serie) {\n                console.log(`[stats.keepalive] set data to serie #${k} (${data[k].length} points)`)\n                counters[k].serie.setData(data[k])\n              }\n            }\n\n            if (visibleRange) {\n              chart.timeScale().scrollToPosition(scrollPosition)\n              chart.timeScale().setVisibleRange(visibleRange)\n            }\n          })\n        }\n      } else {\n        console.log(`[stats] setup keep alive for chart`)\n      }\n\n      this._keepAliveTimeout = setTimeout(this.keepAlive.bind(this, [this._keepAliveTimeout]), 1000 * 60 * 2)\n    },\n    refreshChartDimensions(w) {\n      if (!this.statsChart) {\n        return\n      }\n\n      clearTimeout(this._refreshChartDimensionsTimeout)\n\n      this._refreshChartDimensionsTimeout = setTimeout(() => {\n        if (!w) {\n          w = this.$el.clientWidth\n        }\n\n        chart && chart.resize(w, this.$el.clientHeight)\n      }, 500)\n    },\n    prepareCounters() {\n      console.log(`[stats.prepareCounters]`)\n      this.clearCounters()\n      for (let i = 0; i < this.statsCounters.length; i++) {\n        this.createCounter(this.statsCounters[i])\n      }\n    },\n    onSums(sums) {\n      const now = +new Date()\n\n      for (let i = 0; i < counters.length; i++) {\n        counters[i].onStats(now, sums)\n\n        if (counters[i].stacks.length) {\n          let value = counters[i].getValue()\n          if (value.length) {\n            this.$set(this.data, counters[i].name, value.map(a => formatAmount(a)).join('/'))\n          } else {\n            if (typeof counters[i].precision === 'number') {\n              value = value.toFixed(counters[i].precision)\n            } else {\n              value = formatAmount(value)\n            }\n\n            this.$set(this.data, counters[i].name, value)\n          }\n        }\n      }\n    },\n    clearCounters() {\n      for (let i = counters.length - 1; i >= 0; i--) {\n        if (!counters[i]) {\n          continue\n        }\n        this.removeCounter(i)\n      }\n    },\n    removeCounter(index) {\n      const counter = this.getCounter(index)\n      if (!counter) {\n        console.log(`[removeCounter] couldnt find counter ${index}`)\n        return\n      }\n      index = counters.indexOf(counter)\n      console.log(`\\tunbind counter ${counter.name} index ${index}`)\n      counter.unbind()\n      if (counter.serie) {\n        chart.removeSeries(counter.serie)\n      }\n      this.$delete(this.data, counter.name)\n      counters.splice(index, 1)\n    },\n    refreshCounter(index) {\n      const counter = this.getCounter(index)\n      if (!counter) {\n        console.log(`[refreshCounter] couldnt find counter ${index}`)\n        return\n      }\n      const options = this.statsCounters.filter(a => a.name === counter.name)[0]\n      if (!options) {\n        console.log(`[refreshCounter] couldnt find options for counter ${counter.name}`)\n        return\n      }\n      this.removeCounter(counter.name)\n      this.createCounter(options)\n    },\n    recolorCounter(index, color) {\n      const counter = this.getCounter(index)\n      if (!counter) {\n        console.log(`[refreshCounter] couldnt find counter ${index}`)\n        return\n      }\n      if (!counter.serie) {\n        return\n      }\n      console.log('[recolorCounter]', counter.name, color)\n\n      counter.color = color\n      counter.serie.applyOptions({\n        color: color\n      })\n    },\n    createCounter(counterOptions) {\n      if (counterOptions.enabled && typeof this.data[counterOptions.name] === 'undefined') {\n        const outputFunction = this.getCounterFunction(counterOptions.output)\n        const outputType = this.getOutputType(outputFunction)\n        let counter\n        if (typeof outputType === 'number') {\n          counter = new MultiCounter(outputFunction, {\n            options: counterOptions,\n            model: new Array(outputType).fill(0)\n          })\n        } else {\n          counter = new Counter(outputFunction, {\n            options: counterOptions\n          })\n        }\n\n        if (chart) {\n          this.createCounterSerie(counter)\n        }\n\n        counter.name = counterOptions.name\n        counters.push(counter)\n        this.$set(this.data, counter.name, 0)\n      }\n    },\n    renameCounter(name) {\n      const names = this.statsCounters.map(a => a.name)\n\n      let counter\n      for (let i = 0; i < counters.length; i++) {\n        if (names.indexOf(counters[i].name) === -1) {\n          counter = counters[i]\n          break\n        }\n      }\n\n      if (!counter) {\n        return\n      }\n\n      this.data[name] = this.data[counter.name]\n      delete this.data[counter.name]\n      counter.name = name\n    },\n    getCounter(name) {\n      if (typeof name === 'number') {\n        return counters[name]\n      }\n      let counter\n\n      for (let i = 0; i < counters.length; i++) {\n        if (counters[i].name === name) {\n          counter = counters[i]\n          break\n        }\n      }\n      return counter\n    },\n    editByName(name) {\n      let index\n      for (let i = 0; i < this.statsCounters.length; i++) {\n        if (this.statsCounters[i].name === name) {\n          index = i\n          break\n        }\n      }\n      if (typeof index !== 'number') {\n        return\n      }\n\n      const dialog = create(StatDialog, 'id')\n      dialog(index)\n    },\n    getCounterFunction(str) {\n      const litteral = str.replace(/([^.]|^)(vbuy|vsell|cbuy|csell|lbuy|lsell)/g, '$1stats.$2')\n      return new Function('stats', `'use strict'; return ${litteral};`)\n    },\n    getOutputType(fn) {\n      var stats = {\n        vbuy: 2000,\n        vsell: 2000,\n        cbuy: 10,\n        csell: 10,\n        lbuy: 10,\n        lsell: 2\n      }\n\n      const output = fn(stats)\n\n      if (Array.isArray(output)) {\n        return output.length\n      } else {\n        return false\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.stats {\n  position: relative;\n  background-color: rgba(white, 0.05);\n\n  &__chart {\n    width: 100%;\n    position: relative;\n\n    &:before {\n      content: '';\n      padding-top: 150px;\n      display: block;\n    }\n\n    > * {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n\n    + .stats__counters {\n      position: absolute;\n      margin: 0.25em;\n\n      .stat-counter {\n        flex-direction: row;\n        padding: 0.25em;\n\n        &__value {\n          text-align: left;\n          flex-grow: 0;\n        }\n\n        &__name {\n          font-size: 12px;\n          margin-left: 1em;\n          order: 2;\n          opacity: 0;\n          transform: translateX(8px);\n          transition: transform 0.2s $easeOutExpo, opacity 0.2s $easeOutExpo;\n        }\n\n        &:hover {\n          .stat-counter__name {\n            opacity: 1;\n            transform: none;\n          }\n        }\n      }\n    }\n  }\n\n  &__counters {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n    top: 0;\n    z-index: 11;\n  }\n\n  .stat-counter {\n    display: flex;\n    align-items: center;\n    padding: 0.75em;\n    cursor: pointer;\n\n    + .stat-counter {\n      padding-top: 0;\n    }\n\n    &__name {\n      color: rgba(white, 0.5);\n      letter-spacing: 0.4px;\n      transition: opacity 0.2s $easeOutExpo;\n    }\n\n    &__value {\n      text-align: right;\n      white-space: nowrap;\n      font-family: 'Roboto Condensed';\n      z-index: 1;\n      flex-grow: 1;\n    }\n\n    &:hover {\n      .custom-stat__name {\n        color: white;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div\n    id=\"app\"\n    :data-prefer=\"preferQuoteCurrencySize ? 'quote' : 'base'\"\n    :data-base=\"baseCurrency\"\n    :data-quote=\"quoteCurrency\"\n    :data-symbol=\"symbol\"\n    :data-pair=\"pair\"\n    :class=\"{\n      loading: isLoading\n    }\"\n  >\n    <div class=\"notices\">\n      <Notice v-for=\"(notice, index) in notices\" :key=\"index\" :notice=\"notice\" />\n    </div>\n    <Settings v-if=\"showSettings\" @close=\"showSettings = false\" />\n    <div class=\"app__wrapper\">\n      <div\n        v-if=\"showSearch\"\n        ref=\"searchWrapper\"\n        class=\"app__search\"\n        @click=\"$event.target === $refs.searchWrapper && $store.commit('app/TOGGLE_SEARCH', false)\"\n      >\n        <Autocomplete\n          :load=\"search\"\n          :selected=\"pairs\"\n          @submit=\"$store.commit('settings/SET_PAIR', $event.join('+')), $store.commit('app/TOGGLE_SEARCH', false)\"\n          v-slot=\"{ item }\"\n        >\n          <span\n            >{{ item.value }}\n            <div class=\"badge\">{{ item.exchanges.join(', ') }}</div></span\n          >\n        </Autocomplete>\n      </div>\n      <Header :price=\"price\" @toggleSettings=\"showSettings = !showSettings\" />\n      <div class=\"app__layout\">\n        <div class=\"app__left\">\n          <Chart v-if=\"showChart\" />\n          <Exchanges v-if=\"showChart && showExchangesBar\" />\n        </div>\n        <div class=\"app__right\">\n          <Counters v-if=\"showCounters\" />\n          <Stats v-if=\"showStats\" />\n          <TradeList />\n        </div>\n      </div>\n    </div>\n    <dialogs-wrapper></dialogs-wrapper>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { formatPrice, formatAmount, movingAverage, countDecimals } from './utils/helpers'\n\nimport socket from './services/socket'\n\nimport Notice from './components/ui/Notice.vue'\nimport Header from './components/ui/Header.vue'\nimport Autocomplete from './components/ui/Autocomplete.vue'\nimport Settings from './components/Settings.vue'\nimport TradeList from './components/TradeList.vue'\nimport Chart from './components/chart/Chart.vue'\nimport Counters from './components/Counters.vue'\nimport Stats from './components/Stats.vue'\nimport Exchanges from './components/Exchanges.vue'\nimport upFavicon from '../src/assets/up.png'\nimport downFavicon from '../src/assets/down.png'\n\nconst faviconDirection = {\n  direction: null,\n  index: 0,\n  avg: 0\n}\n\nlet searchLetter\n\nexport default {\n  components: {\n    Header,\n    Settings,\n    TradeList,\n    Chart,\n    Counters,\n    Notice,\n    Stats,\n    Exchanges,\n    Autocomplete\n  },\n  name: 'app',\n  data() {\n    return {\n      price: null,\n      baseCurrency: 'bitcoin',\n      quoteCurrency: 'dollar',\n      symbol: '$',\n\n      showSettings: false,\n      showStatistics: false\n    }\n  },\n  computed: {\n    ...mapState('app', ['isLoading', 'actives', 'notices', 'showSearch', 'pairs']),\n    ...mapState('settings', ['pair', 'showChart', 'showCounters', 'showStats', 'decimalPrecision', 'preferQuoteCurrencySize', 'showExchangesBar'])\n  },\n  created() {\n    this.$root.formatPrice = formatPrice\n    this.$root.formatAmount = formatAmount\n\n    if (this.decimalPrecision === null) {\n      this.calculateOptimalPrice = true\n    }\n\n    this.onStoreMutation = this.$store.subscribe(mutation => {\n      switch (mutation.type) {\n        case 'settings/SET_PAIR':\n          this.updatePairCurrency(mutation.payload)\n          socket.connectExchanges(mutation.payload)\n          this.calculateOptimalPrice = true\n          break\n        case 'app/TOGGLE_SEARCH':\n          if (mutation.payload) {\n            setTimeout(() => {\n              const input = this.$refs.searchWrapper.querySelector('.autocomplete__input')\n\n              if (searchLetter) {\n                input.innerText = searchLetter\n                searchLetter = null\n              }\n            })\n\n            this.bindSearchClickOutside()\n          } else {\n            this.unbindSearchClickOutside()\n          }\n          break\n      }\n    })\n\n    // Is request blocked by browser ?\n    // If true notice user that some of the exchanges may be unavailable\n    /*fetch('showads.js')\n      .then(() => {})\n      .catch((response, a) => {\n        socket.$emit('alert', {\n          type: 'error',\n          title: `Disable your AdBlocker`,\n          message: `Some adblockers may block access to exchanges api.\\nMake sure to turn it off, you wont find any ads here ever :-)`,\n          id: `adblock_error`\n        })\n      })*/\n\n    socket.initialize()\n\n    this.updatePrice()\n    this.updatePairCurrency(this.pair)\n  },\n  mounted() {\n    this.bindSearchOpenByKey()\n  },\n  beforeDestroy() {\n    this.unbindSearchOpenByKey()\n    clearTimeout(this._updatePriceTimeout)\n\n    this.onStoreMutation()\n  },\n  methods: {\n    search(query) {\n      return Object.values(this.$store.state.app.indexedProducts).filter(a => new RegExp(query, 'i').test(a.value))\n    },\n    bindSearchOpenByKey() {\n      this._autocompleteHandler = (event => {\n        if (\n          this.showSearch ||\n          document.activeElement.tagName === 'INPUT' ||\n          document.activeElement.tagName === 'SELECT' ||\n          document.activeElement.isContentEditable\n        ) {\n          return\n        }\n\n        event = event || window.event\n        const charCode = event.which || event.keyCode\n        const charStr = String.fromCharCode(charCode)\n\n        if (/[a-z0-9]/i.test(charStr)) {\n          searchLetter = charStr\n          this.$store.commit('app/TOGGLE_SEARCH', true)\n        }\n      }).bind(this)\n\n      document.addEventListener('keypress', this._autocompleteHandler)\n    },\n    unbindSearchOpenByKey() {\n      if (this._autocompleteHandler) {\n        document.removeEventListener('keypress', this._autocompleteHandler)\n        delete this._autocompleteHandler\n      }\n    },\n    updatePairCurrency(pair) {\n      const name = pair.replace(/-[\\w\\d]*$/, '')\n\n      const symbols = {\n        BTC: ['bitcoin', '฿'],\n        GBP: ['pound', '£'],\n        EUR: ['euro', '€'],\n        USD: ['dollar', '$'],\n        JPY: ['yen', '¥'],\n        ETH: ['ethereum', 'ETH'],\n        XRP: ['xrp', 'XRP'],\n        LTC: ['ltc', 'LTC'],\n        TRX: ['trx', 'TRX'],\n        ADA: ['ada', 'ADA'],\n        IOTA: ['iota', 'IOTA'],\n        XMR: ['xmr', 'XMR'],\n        NEO: ['neo', 'NEO'],\n        EOS: ['eos', 'EOS']\n      }\n\n      this.baseCurrency = 'coin'\n      this.quoteCurrency = 'dollar'\n      this.symbol = '$'\n\n      for (let symbol of Object.keys(symbols)) {\n        if (new RegExp(symbol + '$').test(name)) {\n          this.quoteCurrency = symbols[symbol][0]\n          this.symbol = symbols[symbol][1]\n        }\n\n        if (new RegExp('^' + symbol).test(name)) {\n          this.baseCurrency = symbols[symbol][0]\n        }\n      }\n\n      if (/^(?!XBT|BTC).*\\d+$/.test(name)) {\n        this.quoteCurrency = symbols.BTC[0]\n        this.symbol = symbols.BTC[1]\n      }\n    },\n    updatePrice() {\n      let price = 0\n      let total = 0\n      let decimals = null\n\n      const activesExchangesLength = this.actives.length\n\n      if (this.calculateOptimalPrice) {\n        decimals = []\n      }\n\n      for (let exchange of socket.exchanges) {\n        if (exchange.price === null) {\n          continue\n        }\n\n        if (this.calculateOptimalPrice) {\n          decimals.push(countDecimals(exchange.price))\n        }\n\n        if (this.actives.indexOf(exchange.id) === -1) {\n          continue\n        }\n\n        total++\n        price += exchange.price\n      }\n\n      if (total) {\n        price = price / total\n\n        if (this.calculateOptimalPrice && total >= activesExchangesLength / 2) {\n          const optimalDecimal = Math.round(decimals.reduce((a, b) => a + b, 0) / decimals.length)\n          this.$store.commit('app/SET_OPTIMAL_DECIMAL', optimalDecimal)\n\n          delete this.calculateOptimalPrice\n        }\n      }\n\n      if (price) {\n        this.updateFavicon(price)\n      }\n\n      this.price = formatPrice(price)\n\n      window.document.title = this.pair + ' ' + this.price.toString().replace(/<\\/?[^>]+(>|$)/g, '')\n\n      this._updatePriceTimeout = setTimeout(this.updatePrice, 1000)\n    },\n    updateFavicon(price) {\n      if (faviconDirection.index) {\n        faviconDirection.avg = movingAverage(faviconDirection.avg, price, 1 / (faviconDirection.index + 1))\n      } else {\n        faviconDirection.avg = price\n      }\n      faviconDirection.index++\n\n      const direction = price > faviconDirection.avg ? 'up' : 'down'\n\n      if (direction !== faviconDirection.direction) {\n        if (!faviconDirection.element) {\n          faviconDirection.element = document.createElement('link')\n          faviconDirection.element.id = 'favicon'\n          faviconDirection.element.rel = 'shortcut icon'\n\n          document.head.appendChild(faviconDirection.element)\n        }\n\n        if (direction === 'up') {\n          faviconDirection.element.href = upFavicon\n        } else {\n          faviconDirection.element.href = downFavicon\n        }\n      }\n    },\n    bindSearchClickOutside() {\n      if (this._clickSearchOutsideHandler) {\n        return\n      }\n\n      this._clickSearchOutsideHandler = (event => {\n        const element = this.$refs.searchWrapper.children[0]\n\n        if (element !== event.target && !element.contains(event.target)) {\n          this.$store.commit('app/TOGGLE_SEARCH', false)\n        }\n      }).bind(this)\n\n      document.addEventListener('mousedown', this._clickSearchOutsideHandler)\n    },\n    unbindSearchClickOutside() {\n      if (!this._clickSearchOutsideHandler) {\n        return\n      }\n\n      document.removeEventListener('mousedown', this._clickSearchOutsideHandler)\n      delete this._clickSearchOutsideHandler\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stats.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stats.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Stats.vue?vue&type=template&id=14e154c6&\"\nimport script from \"./Stats.vue?vue&type=script&lang=js&\"\nexport * from \"./Stats.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Stats.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"exchanges condensed\",attrs:{\"id\":\"exchanges\"},on:{\"mouseenter\":function($event){_vm.hovering = true},\"mouseleave\":function($event){_vm.hovering = false}}},_vm._l((_vm.list),function(id,index){return _c('div',{key:index,class:'-' + id + ' -' + _vm.status[id].status,attrs:{\"title\":id},on:{\"click\":function($event){return _vm.$store.commit('settings/TOGGLE_EXCHANGE_VISIBILITY', id)}}},[_c('div',{staticClass:\"exchange__price\",class:{ '-hidden': _vm.exchanges[id].hidden }},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.$root.formatPrice(_vm.status[id].price))}})])])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"exchanges\" class=\"exchanges condensed\" @mouseenter=\"hovering = true\" @mouseleave=\"hovering = false\">\n    <div\n      v-for=\"(id, index) in list\"\n      :key=\"index\"\n      :class=\"'-' + id + ' -' + status[id].status\"\n      :title=\"id\"\n      @click=\"$store.commit('settings/TOGGLE_EXCHANGE_VISIBILITY', id)\"\n    >\n      <div class=\"exchange__price\" :class=\"{ '-hidden': exchanges[id].hidden }\">\n        <span v-html=\"$root.formatPrice(status[id].price)\"></span> &nbsp;\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport socket from '../services/socket'\n\nexport default {\n  data() {\n    return {\n      hovering: false,\n      list: [],\n      status: {}\n    }\n  },\n  computed: {\n    ...mapState('app', ['actives']),\n    ...mapState('settings', ['exchanges'])\n  },\n  created() {\n    this.list = this.actives.slice(0, this.actives.length)\n    this.status = socket.exchanges.reduce((obj, exchange) => {\n      obj[exchange.id] = {\n        status: 'pending',\n        price: null\n      }\n      return obj\n    }, {})\n    this.onStoreMutation = this.$store.subscribe(mutation => {\n      if (mutation.type === 'app/EXCHANGE_UPDATED' && mutation.payload) {\n        const active = this.actives.indexOf(mutation.payload) !== -1\n        const listed = this.list.indexOf(mutation.payload) !== -1\n        if (active && !listed) {\n          this.list.push(mutation.payload)\n        } else if (!active && listed) {\n          this.list.splice(this.list.indexOf(mutation.payload), 1)\n        }\n      }\n    })\n    this.updateExchangesPrices()\n  },\n  beforeDestroy() {\n    this.onStoreMutation()\n    clearTimeout(this._updateExchangesPricesTimeout)\n  },\n  methods: {\n    updateExchangesPrices() {\n      this._updateExchangesPricesTimeout = setTimeout(this.updateExchangesPrices.bind(this), 1000 + Math.random() * 2000)\n      const now = +new Date()\n      for (let i = 0; i < socket.exchanges.length; i++) {\n        const id = socket.exchanges[i].id\n        if (this.actives.indexOf(socket.exchanges[i].id) === -1 || this.status[id].price === socket.exchanges[i].price) {\n          continue\n        }\n        if (!socket.exchanges[i].price) {\n          this.status[id].status = 'pending'\n        } else if (now - socket.exchanges[i].timestamp > 10000) {\n          this.status[id].status = 'idle'\n        } else if (this.status[id].price > socket.exchanges[i].price) {\n          this.status[id].status = 'down'\n        } else if (this.status[id].price < socket.exchanges[i].price) {\n          this.status[id].status = 'up'\n        } else {\n          this.status[id].status = 'neutral'\n        }\n        if (this.status[id].price !== socket.exchanges[i].price) {\n          this.status[id].price = socket.exchanges[i].price\n        }\n      }\n      if (this.hovering) {\n        return\n      }\n      this.list = this.list.sort((a, b) => this.status[a].price - this.status[b].price)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n#exchanges {\n  display: flex;\n  flex-direction: row;\n  height: 1.5em;\n  > div {\n    padding: 0.5em;\n    display: flex;\n    flex-direction: row;\n    font-size: 0.9em;\n    align-items: center;\n    flex-grow: 1;\n    flex-basis: 0;\n    position: relative;\n    line-height: 1;\n    background-position: 0.5em;\n    background-repeat: no-repeat;\n    background-size: 1em;\n    cursor: pointer;\n    .exchange__price {\n      margin-left: 1.25em;\n      white-space: nowrap;\n      &.-hidden {\n        text-decoration: line-through;\n      }\n    }\n    &.-up {\n      background-color: transparent;\n      color: lighten($green, 10%);\n    }\n    &.-down {\n      background-color: transparent;\n      color: $red;\n    }\n    &.-neutral {\n      color: rgba(white, 0.75);\n      font-style: italic;\n    }\n    &.-pending {\n      background-color: rgba(white, 0.2);\n      opacity: 0.5;\n    }\n    @each $exchange in $exchanges {\n      &.-#{$exchange} {\n        background-image: url('../assets/exchanges/#{$exchange}.svg');\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exchanges.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exchanges.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Exchanges.vue?vue&type=template&id=adbb8190&\"\nimport script from \"./Exchanges.vue?vue&type=script&lang=js&\"\nexport * from \"./Exchanges.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Exchanges.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4cabaa02&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"contenteditable\":\"true\"},on:{\"keydown\":_vm.onKeyDown,\"input\":function($event){_vm.changed = true},\"focus\":_vm.onFocus,\"blur\":_vm.onBlur,\"click\":_vm.onClick}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div contenteditable=\"true\" @keydown=\"onKeyDown\" @input=\"changed = true\" @focus=\"onFocus\" @blur=\"onBlur\" @click=\"onClick\"></div>\n</template>\n\n<script>\nexport default {\n  props: ['content'],\n  data() {\n    return {\n      changed: false\n    }\n  },\n  mounted: function() {\n    this.$el.innerText = this.content\n  },\n  watch: {\n    content: function() {\n      if (this.$el.innerText !== this.content) {\n        this.$el.innerText = this.content\n      }\n    }\n  },\n  methods: {\n    selectAll() {\n      window.setTimeout(() => {\n        var sel, range\n        if (window.getSelection && document.createRange) {\n          range = document.createRange()\n          range.selectNodeContents(this.$el)\n          sel = window.getSelection()\n          sel.removeAllRanges()\n          sel.addRange(range)\n        } else if (document.body.createTextRange) {\n          range = document.body.createTextRange()\n          range.moveToElementText(this.$el)\n          range.select()\n        }\n      }, 1)\n    },\n    onBlur($event) {\n      if ($event.which === 13) {\n        event.preventDefault()\n        return\n      }\n\n      this.changed && this.$emit('output', $event.target.innerText)\n      this.focused = false\n\n      if (window.getSelection) {\n        window.getSelection().removeAllRanges()\n      } else if (document.selection) {\n        document.selection.empty()\n      }\n    },\n    onKeyDown($event) {\n      if ($event.which === 13) {\n        event.preventDefault()\n\n        this.$el.blur()\n\n        return\n      }\n\n      if (!isNaN($event.target.innerText)) {\n        if ($event.which === 38) {\n          this.$emit('output', +$event.target.innerText + 1)\n        } else if ($event.which === 40) {\n          this.$emit('output', +$event.target.innerText - 1)\n        }\n      }\n    },\n    onFocus() {\n      !this.focused && this.selectAll()\n\n      this.changed = false\n      this.focused = true\n    },\n    onClick() {\n      const now = +new Date()\n\n      if (this.clickAt && now - this.clickAt < 250) {\n        this.selectAll()\n      }\n\n      this.clickAt = now\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editable.vue?vue&type=template&id=57d3f25a&\"\nimport script from \"./Editable.vue?vue&type=script&lang=js&\"\nexport * from \"./Editable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dropdown\"},[(_vm.label)?_c('div',{staticClass:\"dropdown__label\",domProps:{\"innerHTML\":_vm._s(_vm.label)},on:{\"click\":_vm.toggle}}):_vm._e(),_c('div',{staticClass:\"dropdown__selected\",domProps:{\"innerHTML\":_vm._s(_vm.options[_vm.selected] || _vm.placeholder || 'Selection')},on:{\"click\":_vm.toggle}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOpen),expression:\"isOpen\"}],staticClass:\"dropdown__options\"},_vm._l((_vm.options),function(value,index){return _c('div',{key:index,staticClass:\"dropdown__option\",class:{ active: index === _vm.selected },domProps:{\"innerHTML\":_vm._s(value)},on:{\"click\":function($event){return _vm.set(index)}}})}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"dropdown\">\n    <div v-if=\"label\" class=\"dropdown__label\" @click=\"toggle\" v-html=\"label\"></div>\n    <div class=\"dropdown__selected\" @click=\"toggle\" v-html=\"options[selected] || placeholder || 'Selection'\"></div>\n    <div class=\"dropdown__options\" v-show=\"isOpen\">\n      <div\n        class=\"dropdown__option\"\n        v-for=\"(value, index) in options\"\n        :key=\"index\"\n        :class=\"{ active: index === selected }\"\n        @click=\"set(index)\"\n        v-html=\"value\"\n      ></div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['options', 'label', 'selected', 'placeholder'],\n\n  data() {\n    return {\n      isOpen: false\n    }\n  },\n\n  methods: {\n    toggle() {\n      if (!this.isOpen) {\n        this.show()\n      } else {\n        this.hide()\n      }\n    },\n\n    show() {\n      this.isOpen = true\n\n      this.bindClickOutside()\n    },\n\n    hide() {\n      this.isOpen = false\n\n      this.unbindClickOutside()\n    },\n\n    bindClickOutside() {\n      if (!this._clickOutsideHandler) {\n        this._clickOutsideHandler = (event => {\n          if (!this.$el.contains(event.target)) {\n            this.hide()\n          }\n        }).bind(this)\n\n        document.addEventListener('mousedown', this._clickOutsideHandler)\n      }\n    },\n\n    unbindClickOutside() {\n      if (this._clickOutsideHandler) {\n        document.removeEventListener('mousedown', this._clickOutsideHandler)\n        delete this._clickOutsideHandler\n      }\n    },\n\n    set(index) {\n      this.selected = index\n      this.$emit('output', index)\n      this.hide()\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dropdown.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dropdown.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dropdown.vue?vue&type=template&id=202430d4&\"\nimport script from \"./Dropdown.vue?vue&type=script&lang=js&\"\nexport * from \"./Dropdown.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{attrs:{\"type\":\"range\",\"min\":_vm.min,\"max\":_vm.max,\"step\":_vm.step},domProps:{\"value\":_vm.value},on:{\"change\":function($event){return _vm.$emit('output', $event.target.value)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <input type=\"range\" :min=\"min\" :max=\"max\" :step=\"step\" :value=\"value\" @change=\"$emit('output', $event.target.value)\" />\n</template>\n\n<script>\nimport { TOUCH_SUPPORTED } from '../../utils/constants'\n\nexport default {\n  props: ['min', 'max', 'step', 'value'],\n\n  mounted() {\n    this._onMouseDownHandler = this.onMouseDown.bind(this)\n\n    this.$el.addEventListener(TOUCH_SUPPORTED ? 'touchstart' : 'mousedown', this._onMouseDownHandler, false)\n  },\n\n  beforeDestroy() {\n    this.$el.removeEventListener(TOUCH_SUPPORTED ? 'touchstart' : 'mousedown', this._onMouseDownHandler)\n  },\n\n  methods: {\n    onMouseDown() {\n      // handle double click\n      clearTimeout(this._dblClickTimeout)\n      if (this.pendingDblClick) {\n        this.pendingDblClick = false\n        this.$emit('reset')\n        return\n      }\n\n      this._onMouseMoveHandler = this.onMouseMove.bind(this)\n      document.addEventListener(TOUCH_SUPPORTED ? 'touchmove' : 'mousemove', this._onMouseMoveHandler, false)\n\n      this._onMouseUpHandler = this.onMouseUp.bind(this)\n      document.addEventListener(TOUCH_SUPPORTED ? 'touchend' : 'mouseup', this._onMouseUpHandler, false)\n\n      // next click might be double click, for the next 300ms\n      this.pendingDblClick = true\n      this._dblClickTimeout = window.setTimeout(() => {\n        this.pendingDblClick = false\n      }, 300)\n\n      setTimeout(() => {\n        this.$emit('output', this.$el.value)\n      })\n    },\n    onMouseMove() {\n      this.$emit('output', this.$el.value)\n    },\n    onMouseUp() {\n      document.removeEventListener(TOUCH_SUPPORTED ? 'touchmove' : 'mousemove', this._onMouseMoveHandler)\n      document.removeEventListener(TOUCH_SUPPORTED ? 'touchend' : 'mouseup', this._onMouseUpHandler)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Slider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Slider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Slider.vue?vue&type=template&id=7da7362d&\"\nimport script from \"./Slider.vue?vue&type=script&lang=js&\"\nexport * from \"./Slider.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport VueTippy from 'vue-tippy'\nimport * as ModalDialogs from 'vue-modal-dialogs'\nimport Verte from 'verte'\nimport 'verte/dist/verte.css'\nimport './assets/sass/app.scss'\nimport store from './store'\n\nconst vueEnv = process.env\n\nfor (let key in vueEnv) {\n  const match = key.match(/^VUE_APP_(.*)/)\n  if (match && match[1]) {\n    store.commit(`app/SET_${match[1]}`, vueEnv[key])\n  }\n}\n\nVue.use(ModalDialogs)\n\nVue.use(VueTippy, {\n  maxWidth: '200px',\n  duration: 200,\n  arrow: false,\n  animation: 'scale',\n  size: 'small',\n  delay: 0,\n  animateFill: false,\n  theme: 'blue'\n})\n\nVue.component('verte', Verte)\n\nimport Editable from './components/ui/Editable'\nimport Dropdown from './components/ui/Dropdown'\nimport Slider from './components/ui/Slider'\n\nVue.component('dropdown', Dropdown)\nVue.component('editable', Editable)\nVue.component('slider', Slider)\n\nnew Vue({\n  el: '#app',\n  store,\n  render: h => h(App),\n  props: ['initialized']\n})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chart.vue?vue&type=style&index=0&lang=scss&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAS5JREFUeNrsljEOgjAUQIuEGJ1c3D0C3kDdTTyCB3F09wgewl2OIEdwN5o6SFQM+Jt8TAeV/t8fF2zyQ4D+/15bKCjV9BZwExebSQyHBE/Hy+k2/ZmABe/hJc2VCATgykciEIKzJQIC3EB3EIOarnuIIUhol7otAjxxgCvsk2CO/wxY8Jj4uKS4HJot4AF3lqhbgpUHXGHumvUMwOhN4lxgs5thLfIMSMBftUBiRBVIBQW0cL1/a8j/QB8iEuLkEAfqWxAJDjTi7AOZoMDl043wS9IV7/vOhBnImSMgIZHhJqS4ApVE27Gv3e4Qp7pOrkWpEjnCSymBkiBh4EeIwqUwZVpdJEhwxVhXI3GD6L7ZxAoqnCNgS3QsiQr+oBYLma9XYUmUCM//XzZOewowABKyYnH/TytxAAAAAElFTkSuQmCC\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Counters.vue?vue&type=style&index=0&lang=scss&\"","export default {\n  price: {\n    type: 'candlestick',\n    input: `ohlc(bar)`,\n    options: {\n      upColor: '#c3a87a',\n      downColor: '#e53935',\n      borderUpColor: '#c3a87a',\n      borderDownColor: '#e53935',\n      wickUpColor: 'rgba(223, 195, 148, .8)',\n      wickDownColor: 'rgba(224, 91, 95, .8)',\n      priceLineColor: 'rgba(255, 255, 255, .5)',\n      priceLineWidth: 1,\n      priceLineStyle: 2,\n      lastValueVisible: true,\n      priceLineVisible: true,\n      borderVisible: false,\n      scaleMargins: {\n        top: 0,\n        bottom: 0\n      }\n    }\n  },\n  volume_sell_ema: {\n    type: 'line',\n    input: `ema(bar.vsell, options.ema_length)`,\n    options: {\n      formatVolume: true,\n      ema_length: 14,\n      scaleGroup: 'volume_ema',\n      color: '#c14047',\n      lineWidth: 2,\n      overlay: true,\n      scaleMargins: {\n        top: 0.8,\n        bottom: 0\n      }\n    }\n  },\n  volume_buy_ema: {\n    type: 'line',\n    input: `ema(bar.vbuy, options.ema_length)`,\n    options: {\n      formatVolume: true,\n      ema_length: 14,\n      scaleGroup: 'volume_ema',\n      color: '#c9b087',\n      lineWidth: 2,\n      overlay: true,\n      scaleMargins: {\n        top: 0.8,\n        bottom: 0\n      }\n    }\n  },\n  volume_delta: {\n    type: 'histogram',\n    input: `{\n      value: Math.abs(bar.vbuy - bar.vsell),\n      color: bar.vbuy - bar.vsell > 0 ? options.upColor : options.downColor\n    }`,\n    options: {\n      formatVolume: true,\n      upColor: '#c3a87a',\n      downColor: '#e53935',\n      scaleGroup: 'volume'\n    }\n  },\n  volume: {\n    type: 'histogram',\n    input: `bar.vbuy + bar.vsell`,\n    options: {\n      formatVolume: true,\n      color: 'rgba(255, 255, 255, .15)',\n      scaleGroup: 'volume'\n    }\n  },\n  liquidations: {\n    type: 'histogram',\n    input: `bar.lbuy + bar.lsell`,\n    options: {\n      formatVolume: true,\n      scaleGroup: 'volume',\n      color: '#9c27b0'\n    }\n  },\n  cvd: {\n    type: 'line',\n    input: `bar.series.cvd.value + (bar.vbuy - bar.vsell)`,\n    options: {\n      formatVolume: true,\n      color: '#ffffff',\n      lineWidth: 2,\n      overlay: true,\n      scaleMargins: {\n        top: 0.1,\n        bottom: 0.2\n      }\n    }\n  },\n  ctd: {\n    type: 'line',\n    input: `bar.series.ctd.value + (bar.cbuy - bar.csell)`,\n    options: {\n      formatVolume: true,\n      color: '#ffffff',\n      lineWidth: 1,\n      lineStyle: 2,\n      overlay: true,\n      scaleMargins: {\n        top: 0.1,\n        bottom: 0.2\n      }\n    }\n  },\n  price_sma: {\n    type: 'line',\n    input: `sma(bar.series.price.point.close, options.length)`,\n    options: {\n      color: 'rgba(52,100,69,0.38)',\n      length: 50,\n      lineWidth: 2\n    }\n  },\n  price_sma2: {\n    type: 'line',\n    input: `sma(bar.series.price.point.close, options.length)`,\n    options: {\n      color: 'rgba(52,100,69,0.38)',\n      length: 50,\n      lineWidth: 2\n    }\n  },\n  price_cma: {\n    type: 'line',\n    input: `cma(bar.series.price.point.close, options.length)`,\n    options: {\n      length: 21,\n      color: '#8c61f5',\n      lineWidth: 2\n    }\n  },\n  price_cma2: {\n    type: 'line',\n    input: `cma(bar.series.price.point.close, options.length)`,\n    options: {\n      length: 21,\n      color: '#8c61f5',\n      lineWidth: 2\n    }\n  }\n}\n","import '../../data/typedef'\nimport { formatTime } from '../../utils/helpers'\n\n/**\n * @type Chunk[]\n */\nexport const cache = []\n\n/**\n * @type Range\n */\nexport const cacheRange = { from: null, to: null }\n\n/**\n * append or prepend chunk to cache array\n * and recalculate cacheRange\n * @param{Chunk} chunk Chunk to add\n */\nexport function saveChunk(chunk) {\n  console.log(`[cache/saveChunk]`, formatTime(chunk.from), formatTime(chunk.to))\n\n  let index\n\n  if (!cache.length || cache[cache.length - 1].to <= chunk.from) {\n    index = cache.push(chunk) - 1\n  } else if (cache[0].from >= chunk.to) {\n    cache.unshift(chunk)\n    index = 0\n  }\n\n  if (index === 0) {\n    cacheRange.from = chunk.from\n  }\n\n  if (index === cache.length - 1) {\n    cacheRange.to = chunk.to\n  }\n\n  if (typeof index !== 'undefined') {\n    console.log(`[saveChunk] new cache range`, formatTime(cacheRange.from), ' -> ', formatTime(cacheRange.to))\n\n    return chunk\n  } else {\n    console.log(\n      `[saveChunk] couldn't save chunk\\n\\t`,\n      '- cachedRange [from: ' + formatTime(cacheRange.from),\n      ' -> to: ',\n      formatTime(cacheRange.to) + ']\\n\\t',\n      '- chunk range [from: ' + formatTime(chunk.from),\n      ' -> to: ',\n      formatTime(chunk.to) + ']'\n    )\n    debugger\n  }\n}\n\nexport function clearCache() {\n  console.log(`[chart/cache] clear cache`)\n\n  cache.splice(0, cache.length)\n  cacheRange.from = cacheRange.to = null\n}\n","import store from '../../store'\n\n/**\n * get 1 ohlc bar out of actives exchanges in bar\n * simple average\n * @param {Bar} bar\n */\nexport function ohlc(bar) {\n  let totalWeight = 0\n  let setOpen = false\n\n  if (bar.open === null) {\n    setOpen = true\n    bar.open = 0\n  }\n\n  bar.high = 0\n  bar.low = 0\n  bar.close = 0\n\n  const activeExchanges = store.state.app.actives\n\n  for (let exchange in bar.exchanges) {\n    if (activeExchanges.indexOf(exchange) === -1) {\n      continue\n    }\n\n    if (setOpen) {\n      bar.open += bar.exchanges[exchange].open\n    }\n\n    bar.high += bar.exchanges[exchange].high\n    bar.low += bar.exchanges[exchange].low\n    bar.close += bar.exchanges[exchange].close\n\n    totalWeight++\n  }\n\n  if (setOpen) {\n    bar.open /= totalWeight\n  }\n\n  bar.high /= totalWeight\n  bar.low /= totalWeight\n  bar.close /= totalWeight\n\n  return { open: bar.open, high: bar.high, low: bar.low, close: bar.close }\n}\n\n/**\n * exponential moving average\n * @param {SerieMemory} memory\n * @param {number} value\n */\nexport function ema(memory, value, length) {\n  const k = 2 / (length + 1)\n\n  if (memory.count) {\n    const last = memory.points[memory.points.length - 1]\n    memory.output = (value - last) * k + last\n  } else {\n    memory.output = value\n  }\n\n  return memory.output\n}\n\n/**\n * simple moving average\n * @param {SerieMemory} memory\n * @param {number} value\n */\nexport function sma(memory, value) {\n  const average = (memory.sum + value) / (memory.count + 1)\n  memory.output = value\n  return average\n}\n\n/**\n * cumulative moving average\n * @param {SerieMemory} memory\n * @param {number} value\n */\nexport function cma(memory, value) {\n  memory.output = (memory.sum + value) / (memory.count + 1)\n  return memory.output\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stats.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exchange.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TradeList.vue?vue&type=style&index=0&lang=scss&\"","export const APPLICATION_START_TIME = +new Date()\nexport const MASTER_DOMAIN = /aggr.trade$/.test(window.location.hostname)\nexport const TOUCH_SUPPORTED = (function() {\n  var prefixes = ' -webkit- -moz- -o- -ms- '.split(' ')\n  var mq = function(query) {\n    return window.matchMedia(query).matches\n  }\n\n  if ('ontouchstart' in window || (window.DocumentTouch && document instanceof window.DocumentTouch)) {\n    return true\n  }\n\n  // include the 'heartz' as a way to have a non matching MQ to help terminate the join\n  // https://git.io/vznFH\n  var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('')\n  return mq(query)\n})()\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thresholds.vue?vue&type=style&index=0&lang=scss&\"","import '../../data/typedef'\nimport store from '../../store'\nimport seriesData from '../../data/series'\nimport { cache, saveChunk, clearCache, cacheRange } from './chartCache'\nimport { formatTime, getHms, setValueByDotNotation, slugify } from '../../utils/helpers'\nimport { defaultChartOptions, defaultPlotsOptions } from './chartOptions'\nimport * as serieFunctions from './serieFunctions'\n\nimport * as TV from 'lightweight-charts'\n\nconst availableSerieFunctions = Object.keys(serieFunctions).reduce((obj, name) => {\n  obj[name] = {\n    needsMemory: ['cma', 'sma', 'ema'].indexOf(name) !== -1\n  }\n\n  return obj\n}, {})\n\nconst noRedrawOptions = [/priceFormat/i, /color/i, /width/i, 'priceLineStyle', 'lastValueVisible', 'priceLineVisible', 'borderVisible']\n\nexport default class ChartController {\n  constructor() {\n    /** @type {TV.IChartApi} */\n    this.chartInstance = null\n\n    /**\n     * @type {Element}\n     */\n    this.chartElement = null\n\n    /**\n     * @type ActiveSerie[]\n     */\n    this.activeSeries = []\n\n    /**\n     * @type Renderer\n     */\n    this.activeRenderer = null\n\n    /**\n     * @type Chunk\n     */\n    this.activeChunk = null\n\n    /**\n     * @type Range\n     */\n    this.renderedRange = { from: null, to: null }\n\n    /**\n     * @type Trade[]\n     */\n    this.queuedTrades = []\n  }\n\n  createChart(containerElement, chartDimensions) {\n    console.log(`[chart/controller] create chart`)\n\n    const options = Object.assign({}, defaultChartOptions, chartDimensions)\n\n    if (store.state.settings.series.price && store.state.settings.series.price.scaleMargins) {\n      options.priceScale.scaleMargins = store.state.settings.series.price.scaleMargins\n    }\n\n    this.chartInstance = TV.createChart(containerElement, options)\n    this.chartElement = containerElement\n\n    this.addEnabledSeries()\n  }\n\n  /**\n   * remove series, destroy this.chartInstance and cancel related events1\n   */\n  removeChart() {\n    console.log(`[chart/controller] remove chart`)\n\n    if (!this.chartInstance) {\n      return\n    }\n\n    while (this.activeSeries.length) {\n      this.removeSerie(this.activeSeries[0])\n    }\n\n    this.chartInstance.remove()\n\n    this.chartInstance = null\n  }\n\n  /**\n   * Get active serie by id\n   * @returns {ActiveSerie} serie\n   */\n  getSerie(id) {\n    for (let i = 0; i < this.activeSeries.length; i++) {\n      if (this.activeSeries[i].id === id) {\n        return this.activeSeries[i]\n      }\n    }\n  }\n\n  /**\n   * Update one serie's option\n   * @param {Object} obj vuex store payload\n   * @param {string} obj.id serie id\n   * @param {string} obj.key option key\n   * @param {any} obj.value serie id\n   */\n  setSerieOption({ id, key, value }) {\n    const serie = this.getSerie(id)\n\n    if (!serie) {\n      return\n    }\n\n    let firstKey = key\n\n    if (key.indexOf('.') !== -1) {\n      const path = key.split('.')\n      setValueByDotNotation(serie.options, path, value)\n      firstKey = path[0]\n    } else {\n      serie.options[key] = value\n    }\n\n    serie.api.applyOptions({\n      [firstKey]: serie.options[firstKey]\n    })\n\n    for (let i = 0; i < noRedrawOptions.length; i++) {\n      if (noRedrawOptions[i] === firstKey || (noRedrawOptions[i] instanceof RegExp && noRedrawOptions[i].test(firstKey))) {\n        return\n      }\n    }\n\n    this.redrawSerie(id)\n  }\n\n  /**\n   * Rebuild the whole serie\n   * @param {string} id serie id\n   */\n  rebuildSerie(id) {\n    this.removeSerie(this.getSerie(id))\n    this.addSerie(id)\n    this.redrawSerie(id)\n  }\n\n  /**\n   * Update chart main scale (priceScale) margins\n   * @param {{top: number, bottom: number}} margins\n   */\n  setPriceMargins(margins) {\n    this.chartInstance.applyOptions({\n      priceScale: {\n        scaleMargins: margins\n      }\n    })\n  }\n\n  /**\n   * Redraw one specific serie (and the series it depends on)\n   * @param {string} id\n   */\n  redrawSerie(id) {\n    let bars = []\n\n    for (let chunk of cache) {\n      if (chunk.rendered) {\n        bars = bars.concat(chunk.bars)\n      }\n    }\n\n    const series = this.getSerieDependencies(this.getSerie(id))\n\n    series.push(id)\n\n    this.renderBars(bars, series)\n  }\n\n  /**\n   * Redraw\n   * @param\n   */\n  redraw(silent) {\n    this.renderVisibleChunks(silent)\n  }\n\n  /**\n   * Return a list of available function that can be used in series inputs\n   * @returns {string[]} names of available functions\n   */\n  getAvailableSerieFunctions() {\n    return Object.keys(availableSerieFunctions)\n  }\n\n  /**\n   *\n   * @param {ActiveSerie} serie\n   */\n  prepareSerie(serie) {\n    let input = serie.input.toString().replace(/\\n/g, '')\n    const reg = new RegExp(`(${this.getAvailableSerieFunctions().join('|')})\\\\(([a-zA-Z0-9._,\\\\s]+)\\\\)`, 'g')\n\n    const memory = []\n    const helpers = []\n\n    let match\n\n    do {\n      if ((match = reg.exec(input))) {\n        if (helpers.indexOf(match[1]) === -1) {\n          helpers.push(match[1])\n        }\n\n        const args = match[2].split(',').map(a => a.trim())\n\n        const id = slugify(match[2])\n\n        if (availableSerieFunctions[match[1]].needsMemory) {\n          memory.push({\n            id,\n            args,\n            name: match[1],\n            input: match[2]\n          })\n\n          args.unshift(`bar.series.${serie.id}.memory[${memory.length - 1}]`)\n        }\n\n        input = input.replace(match[0], `this.${match[1]}(${args.join(',')})`)\n      }\n    } while (match)\n\n    serie.memory = memory\n\n    try {\n      serie.adapter = this.buildSerieFunction(serie, input)\n    } catch (error) {\n      this.$store.dispatch('app/showNotice', {\n        type: 'error',\n        title: 'BUILD FAILED ' + error.message\n      })\n      console.error(error)\n\n      return false\n    }\n\n    return serie\n  }\n\n  buildSerieFunction(serie, input) {\n    const timestamp = Math.floor(+new Date() / 1000 / store.state.settings.timeframe) * store.state.settings.timeframe\n    const bar = {\n      timestamp: timestamp,\n      exchanges: {},\n      open: null,\n      high: null,\n      low: null,\n      close: null,\n      vbuy: 0,\n      vsell: 0,\n      cbuy: 0,\n      csell: 0,\n      lbuy: 0,\n      lsell: 0,\n      series: {\n        [serie.id]: {\n          value: 0\n        }\n      }\n    }\n\n    const dependencies = this.getSerieDependencies(serie)\n    dependencies.push(serie.id)\n\n    for (let i = 0; i < dependencies.length; i++) {\n      bar.series[dependencies[i]] = {\n        value: 0\n      }\n\n      if (dependencies[i] === serie.id && serie.memory.length) {\n        bar.series[serie.id].memory = serie.memory\n      }\n    }\n\n    if (serie.memory) {\n      bar.series[serie.id]\n    }\n\n    // test run\n    const value = new Function('bar', 'options', 'return ' + input.replace(/bar\\.series\\.[a-zA-Z0-9_]+\\.point\\.[a-z]+/g, 1)).apply(\n      {\n        cma: () => 1,\n        ema: () => 1,\n        sma: () => 1,\n        ohlc: () => ({ open: 1, high: 1, low: 1, close: 1 })\n      },\n      [bar, serie.options]\n    )\n\n    if (value !== null && typeof value !== 'object') {\n      input = `{ value: ${input} }`\n    }\n\n    return new Function('bar', 'options', 'return ' + input).bind(serieFunctions)\n  }\n\n  bindSerie(serie, renderer) {\n    if (!renderer || typeof renderer.series[serie.id] !== 'undefined') {\n      return\n    }\n\n    renderer.series[serie.id] = {\n      value: null\n    }\n\n    if (serie.memory.length) {\n      renderer.series[serie.id].memory = []\n    }\n\n    for (let i = 0; i < serie.memory.length; i++) {\n      const fn = serie.memory[i]\n\n      renderer.series[serie.id].memory.push({\n        output: null,\n        length: eval(fn.args[2].toString().replace(/^options/, 'serie.options')),\n        points: [],\n        count: 0,\n        sum: 0\n      })\n    }\n  }\n\n  /**\n   * Detach serie from renderer\n   * @param {ActiveSerie} serie\n   * @param {Renderer} renderer\n   */\n  unbindSerie(serie, renderer) {\n    if (!renderer || typeof renderer.series[serie.id] === 'undefined') {\n      return\n    }\n\n    delete renderer.series[serie.id]\n  }\n\n  /**\n   * Add all enabled series\n   */\n  addEnabledSeries() {\n    for (let id in seriesData) {\n      if (!store.state.settings.series[id] || store.state.settings.series[id].enabled === false) {\n        continue\n      }\n\n      this.addSerie(id)\n    }\n  }\n\n  /**\n   * get series that depends on this serie\n   * @param {ActiveSerie} serie\n   * @returns {string[]} id of series\n   */\n  getSeriesDependendingOn(serie) {\n    const series = []\n\n    for (let i = 0; i < this.activeSeries.length; i++) {\n      const serieCompare = this.activeSeries[i]\n\n      if (serieCompare.id === serie.id) {\n        continue\n      }\n\n      if (this.isSerieReferencedIn(serie, serieCompare)) {\n        series.push(serieCompare.id)\n      }\n    }\n\n    return series\n  }\n\n  /**\n   * get dependencies of serie\n   * @param {ActiveSerie} serie\n   * @returns {string[]} id of series\n   */\n  getSerieDependencies(serie) {\n    const functionString = serie.input.toString()\n    const reg = new RegExp(`bar\\\\.series\\\\.([a-z0-9_]+)\\\\.`, 'g')\n\n    const depencencies = []\n\n    let match\n\n    do {\n      if ((match = reg.exec(functionString)) && match[1] !== serie.id) {\n        depencencies.push(match[1])\n      }\n    } while (match)\n\n    return depencencies\n  }\n\n  /**\n   * is serieA referenced in serieB\n   * @param {ActiveSerie} serieA\n   * @param {ActiveSerie} serieB\n   * @returns {boolean}\n   */\n  isSerieReferencedIn(serieA, serieB) {\n    const functionString = serieB.input.toString()\n    const reg = new RegExp(`bar\\\\.series\\\\.${serieA.id}\\\\.`, 'g')\n\n    return !!functionString.match(reg)\n  }\n  /**\n   * register serie and create serie api12\n   * @param {string} serieId serie id\n   * @returns {boolean} success if true\n   */\n  addSerie(id) {\n    const serieData = seriesData[id]\n    const serieOptions = Object.assign(\n      {},\n      defaultPlotsOptions[serieData.type] || {},\n      seriesData[id].options || {},\n      store.state.settings.series[id] || {}\n    )\n    const serieType = serieOptions.type || seriesData[id].type\n\n    const apiMethodName = 'add' + (serieType.charAt(0).toUpperCase() + serieType.slice(1)) + 'Series'\n\n    const serie = this.prepareSerie({\n      id,\n      type: serieType,\n      input: serieData.input,\n      options: serieOptions\n    })\n\n    if (!serie) {\n      return false\n    }\n\n    serie.api = this.chartInstance[apiMethodName](serieOptions)\n\n    this.activeSeries.push(serie)\n\n    store.state.app.activeSeries.push(id)\n\n    this.bindSerie(serie, this.activeRenderer)\n\n    return true\n  }\n\n  /**\n   * Derender serie\n   * if there is series depending on this serie, they will be also removed\n   * @param {ActiveSerie} serie\n   */\n  removeSerie(serie) {\n    if (!serie) {\n      return\n    }\n\n    // remove from chart instance (derender)\n    this.chartInstance.removeSeries(serie.api)\n\n    // unbind from activebar (remove serie meta data like sma memory etc)\n    this.unbindSerie(serie, this.activeRenderer)\n\n    // update store (runtime prop)\n    store.state.app.activeSeries.splice(store.state.app.activeSeries.indexOf(serie.id), 1)\n    store.state.app.activeSeries = store.state.app.activeSeries.slice(0, store.state.app.activeSeries.length)\n\n    // recursive remove of dependent series\n    for (let dependentId of this.getSeriesDependendingOn(serie)) {\n      this.removeSerie(this.getSerie(dependentId))\n    }\n\n    // remove from active series model\n    this.activeSeries.splice(this.activeSeries.indexOf(serie), 1)\n  }\n\n  /**\n   * toggle serie on or off\n   * if turn on it will try redraw serie\n   * @param {Object} obj vuex store payload\n   * @param {string} obj.id serie id\n   * @param {boolean} obj.value true = enable serie, false = disable\n   */\n  toggleSerie({ id, value }) {\n    if (!value) {\n      this.removeSerie(this.getSerie(id))\n    } else {\n      if (this.addSerie(id)) {\n        this.redrawSerie(id)\n      }\n    }\n  }\n\n  /**\n   * get visible range (or optimal range if this.chartInstance has no range0)\n   * @return {Range} range\n   */\n  getVisibleRange() {\n    const visibleRange = this.getUTCVisibleRange()\n\n    if (visibleRange) {\n      const scrollPosition = this.chartInstance.timeScale().scrollPosition()\n      if (scrollPosition > 0) {\n        visibleRange.to =\n          Math.floor((visibleRange.to + scrollPosition * store.state.settings.timeframe) / store.state.settings.timeframe) *\n          store.state.settings.timeframe\n      }\n\n      return { from: visibleRange.from, to: visibleRange.to, median: visibleRange.from + (visibleRange.to - visibleRange.from) / 2 }\n    } else {\n      return this.getRealtimeRange()\n    }\n  }\n\n  getUTCVisibleRange() {\n    const visibleRange = this.chartInstance.timeScale().getVisibleRange()\n    const offset = store.state.settings.timezoneOffset / 1000\n\n    return visibleRange\n      ? {\n          from: visibleRange.from - offset,\n          to: visibleRange.to - offset\n        }\n      : null\n  }\n\n  /**\n   * get the optimal range for realtime bars\n   * @return {number} range\n   */\n  getRealtimeRange() {\n    const optimalRange = this.getOptimalRangeLength()\n    let to = +new Date() / 1000\n    let from = Math.ceil(to / store.state.settings.timeframe) * store.state.settings.timeframe - optimalRange\n\n    return { from, to, median: from + (to - from) / 2, incomplete: true }\n  }\n\n  /**\n   * get optimal range (difference between to and from) based on current timeframe, container dimensions and bar width\n   * @return {number} range\n   */\n  getOptimalRangeLength() {\n    return (\n      Math.floor(((this.chartElement.offsetWidth / 3) * store.state.settings.timeframe) / store.state.settings.timeframe) *\n      store.state.settings.timeframe\n    )\n  }\n\n  /**\n   * is chart contains rendered stuff\n   */\n  isEmpty() {\n    return !this.chartInstance.timeScale().getVisibleRange()\n  }\n\n  /**\n   * clear rendered stuff\n   */\n  clearChart() {\n    console.log(`[chart/controller] clear chart (all series emptyed)`)\n\n    this.preventPan()\n\n    for (let serie of this.activeSeries) {\n      this.clearSerie(serie)\n    }\n\n    this.renderedRange.from = this.renderedRange.to = null\n  }\n\n  /**\n   * clear active data\n   */\n  clearData() {\n    console.log(`[chart/controller] clear data (activeRenderer+activeChunk+queuedTrades1)`)\n\n    this.activeRenderer = null\n    this.activeChunk = null\n    this.queuedTrades.splice(0, this.queuedTrades.length)\n  }\n\n  /**\n   * clear data and rendered stuff\n   */\n  clear() {\n    console.log(`[chart/controller] clear all (cache+activedata+chart)`)\n\n    clearCache()\n    this.clearData()\n    this.clearChart()\n  }\n\n  /**\n   * clear everything\n   */\n  destroy() {\n    console.log(`[chart/controller] destroy`)\n\n    clearCache()\n    this.clearData()\n    this.clearChart()\n    this.removeChart()\n    this.clearQueue()\n  }\n\n  /**\n   * @param {ActiveSerie} serie serie to clear\n   */\n  clearSerie(serie) {\n    serie.api.setData([])\n  }\n\n  /**\n   * start queuing next trades\n   */\n  setupQueue() {\n    if (this._releaseQueueInterval || !store.state.settings.chartRefreshRate) {\n      return\n    }\n\n    console.log(`[chart/controller] setup queue (${getHms(store.state.settings.chartRefreshRate)})`)\n\n    this._releaseQueueInterval = setInterval(() => {\n      if (!this.preventImmediateRender) {\n        this.releaseQueue()\n      }\n    }, store.state.settings.chartRefreshRate)\n  }\n\n  /**\n   * release queue and stop queuing next trades\n   */\n  clearQueue() {\n    if (!this._releaseQueueInterval) {\n      return\n    }\n\n    console.log(`[chart/controller] clear queue`)\n\n    clearInterval(this._releaseQueueInterval)\n    delete this._releaseQueueInterval\n\n    this.releaseQueue()\n  }\n\n  /**\n   * pull trades from queue and render them immediately\n   */\n  releaseQueue() {\n    if (!this.queuedTrades.length || this.preventRender) {\n      return\n    }\n\n    this.renderRealtimeTrades(this.queuedTrades)\n    this.queuedTrades.splice(0, this.queuedTrades.length)\n  }\n\n  /**\n   * unlock render, will release queue on next queueInterval\n   */\n  unlockRender() {\n    this.preventRender = false\n  }\n\n  /**\n   * temporarily disable render to avoid issues\n   */\n  lockRender() {\n    this.preventRender = true\n  }\n\n  /**\n   * push a set of trades to queue in order to render them later\n   * @param {Trades[]} trades\n   */\n  queueTrades(trades) {\n    Array.prototype.push.apply(this.queuedTrades, trades)\n  }\n\n  /**\n   * take a set of trades, group them into bars while using activeRenderer for reference and render them\n   * also cache finished bar\n   * @param {Trade[]} trades trades to render\n   */\n  renderRealtimeTrades(trades) {\n    const formatedBars = []\n\n    if (!trades.length) {\n      return\n    }\n\n    let canRender = !this.activeChunk || this.activeChunk.rendered\n\n    let i = 0\n\n    for (i; i < trades.length; i++) {\n      const trade = trades[i]\n      const timestamp = Math.floor(trade.timestamp / 1000 / store.state.settings.timeframe) * store.state.settings.timeframe\n\n      if (!this.activeRenderer || this.activeRenderer.timestamp < timestamp) {\n        if (this.activeRenderer) {\n          if (!this.activeChunk || (this.activeChunk.to < this.activeRenderer.timestamp && this.activeChunk.bars.length > 500)) {\n            // first time storing bar from realtime trades\n            const visibleRange = this.getVisibleRange()\n\n            canRender = this.activeRenderer.timestamp >= visibleRange.from && this.activeRenderer.timestamp <= visibleRange.to\n\n            if (this.activeChunk) {\n              this.activeChunk.active = false\n            }\n\n            this.activeChunk = saveChunk({\n              from: this.activeRenderer.timestamp,\n              to: this.activeRenderer.timestamp,\n              active: true,\n              rendered: canRender,\n              bars: []\n            })\n          }\n\n          if (canRender && this.activeRenderer.hasData) {\n            formatedBars.push(this.computeBar(this.activeRenderer))\n          }\n\n          // feed activeChunk with active bar exchange snapshot\n          for (let exchange in this.activeRenderer.exchanges) {\n            if (this.activeRenderer.exchanges[exchange].hasData) {\n              this.activeChunk.bars.push(this.cloneBar(this.activeRenderer.exchanges[exchange], this.activeRenderer.timestamp))\n            }\n          }\n\n          this.activeChunk.to = cacheRange.to = this.activeRenderer.timestamp\n\n          if (canRender && this.renderedRange.to < this.activeRenderer.timestamp) {\n            this.renderedRange.to = this.activeRenderer.timestamp\n          }\n\n          this.nextBar(timestamp, this.activeRenderer)\n        } else {\n          this.activeRenderer = this.newBar(timestamp)\n        }\n\n        this.preventPan()\n      }\n\n      const amount = trade.price * trade.size\n\n      if (!this.activeRenderer.exchanges[trade.exchange]) {\n        this.activeRenderer.exchanges[trade.exchange] = {\n          exchange: trade.exchange,\n          close: +trade.price\n        }\n\n        this.resetBar(this.activeRenderer.exchanges[trade.exchange])\n      }\n\n      this.activeRenderer.exchanges[trade.exchange].hasData = true\n\n      const isActive = store.state.app.actives.indexOf(trade.exchange) !== -1\n\n      if (trade.liquidation) {\n        this.activeRenderer.exchanges[trade.exchange]['l' + trade.side] += amount\n\n        if (isActive) {\n          this.activeRenderer['l' + trade.side] += amount\n          this.activeRenderer.hasData = true\n        }\n\n        continue\n      }\n\n      this.activeRenderer.exchanges[trade.exchange].high = Math.max(this.activeRenderer.exchanges[trade.exchange].high, +trade.price)\n      this.activeRenderer.exchanges[trade.exchange].low = Math.min(this.activeRenderer.exchanges[trade.exchange].low, +trade.price)\n      this.activeRenderer.exchanges[trade.exchange].close = +trade.price\n\n      this.activeRenderer.exchanges[trade.exchange]['c' + trade.side]++\n      this.activeRenderer.exchanges[trade.exchange]['v' + trade.side] += amount\n\n      if (isActive) {\n        this.activeRenderer['v' + trade.side] += amount\n        this.activeRenderer['c' + trade.side]++\n        this.activeRenderer.hasData = true\n      }\n    }\n\n    if (canRender && this.activeRenderer.hasData) {\n      formatedBars.push(this.computeBar(this.activeRenderer))\n\n      if (this.renderedRange.to < this.activeRenderer.timestamp) {\n        this.renderedRange.to = this.activeRenderer.timestamp\n      }\n    }\n\n    for (let i = 0; i < formatedBars.length; i++) {\n      this.updateBar(formatedBars[i])\n    }\n  }\n\n  /**\n   * turn a set of trades into a set of bars according to current timeframe\n   * @param {Trade[]} trades trades to group\n   * @returns {Bar[]} bars to cache / render\n   */\n  groupTradesIntoBars(trades) {\n    if (!trades.length) {\n      return\n    }\n\n    let bar = {\n      timestamp: null,\n      exchanges: {}\n    }\n\n    let exchangesCount = 0\n    const enabledExchanges = Object.keys(store.state.settings.exchanges).filter(a => !store.state.settings.exchanges[a].disabled)\n\n    for (let i = 0; i < trades.length; i++) {\n      if (!bar.exchanges[trades[i][0]] && enabledExchanges.indexOf(trades[i][0]) !== -1) {\n        exchangesCount++\n        bar.exchanges[trades[i][0]] = {\n          exchange: trades[i][0],\n          close: +trades[i][2]\n        }\n\n        this.resetBar(bar.exchanges[trades[i][0]])\n        if (exchangesCount === enabledExchanges.length) {\n          break\n        }\n      }\n    }\n\n    if (exchangesCount !== enabledExchanges.length) {\n      console.log(`[groupTradesIntoBars] couldn't find all exchange's first price (${trades.length} processed)`)\n    }\n\n    const bars = []\n\n    // loop through bars in range\n    for (let j = 0; j <= trades.length; j++) {\n      const timestamp = trades[j] ? Math.floor(trades[j][1] / 1000 / store.state.settings.timeframe) * store.state.settings.timeframe : Infinity\n\n      if (bar.timestamp < timestamp) {\n        if (bar.timestamp && this.activeRenderer && bar.timestamp > this.activeRenderer.timestamp) {\n          debugger\n        }\n        for (let exchange in bar.exchanges) {\n          if (bar.timestamp && bar.exchanges[exchange].hasData) {\n            bars.push(this.cloneBar(bar.exchanges[exchange], bar.timestamp))\n            this.resetBar(bar.exchanges[exchange])\n          }\n        }\n\n        if (!trades[j]) {\n          break\n        }\n\n        bar.timestamp = timestamp\n      }\n\n      const exchange = trades[j][0]\n\n      if (!bar.exchanges[exchange]) {\n        continue\n      }\n\n      const side = trades[j][4] > 0 ? 'buy' : 'sell'\n\n      bar.exchanges[exchange].hasData = true\n\n      if (trades[j][5] === 1) {\n        bar.exchanges[exchange]['l' + side] += trades[j][3] * trades[j][2]\n        continue\n      }\n\n      bar.exchanges[exchange].high = Math.max(bar.exchanges[exchange].high, +trades[j][2])\n      bar.exchanges[exchange].low = Math.min(bar.exchanges[exchange].low, +trades[j][2])\n      bar.exchanges[exchange].close = +trades[j][2]\n\n      bar.exchanges[exchange]['c' + side]++\n      bar.exchanges[exchange]['v' + side] += trades[j][3] * trades[j][2]\n    }\n\n    if (!bars.length) {\n      return false\n    }\n\n    const from = Math.floor(bars[0].timestamp / store.state.settings.timeframe) * store.state.settings.timeframe\n    const to = Math.floor(bars[bars.length - 1].timestamp / store.state.settings.timeframe) * store.state.settings.timeframe\n    const median = from + (to - from) / 2\n\n    const lastTimestamp = trades[trades.length - 1][1] / 1000\n\n    return { from, to, median, bars, lastTimestamp }\n  }\n\n  /**\n   * create a new object from an existing bar\n   * to avoid reference when storing finished bar data to cache\n   * @param {Bar} bar do copy\n   * @param {number} [timestamp] apply timestamp to returned bar\n   */\n  cloneBar(bar, timestamp) {\n    return {\n      exchange: bar.exchange,\n      timestamp: timestamp || bar.timestamp,\n      open: bar.open,\n      high: bar.high,\n      low: bar.low,\n      close: bar.close,\n      vbuy: bar.vbuy,\n      vsell: bar.vsell,\n      cbuy: bar.cbuy,\n      csell: bar.csell,\n      lbuy: bar.lbuy,\n      lsell: bar.lsell\n    }\n  }\n\n  /**\n   * Render a set of bars\n   *\n   * @param {Bar[]} bars bars to render\n   * @param {string[]} [series] render only theses series\n   */\n  renderBars(bars, series) {\n    console.log(`[chart/controller] render bars`, '(', series ? 'specific serie(s): ' + series.join(',') : 'all series', ')', bars.length, 'bar(s)')\n\n    if (!bars.length) {\n      return\n    }\n\n    const visibleRange = this.getVisibleRange()\n\n    const computedSeries = {}\n    let from = null\n    let to = null\n    let length = 0\n\n    let temporaryRenderer\n\n    for (let i = 0; i <= bars.length; i++) {\n      const bar = bars[i]\n\n      if (!bar || !temporaryRenderer || bar.timestamp > temporaryRenderer.timestamp) {\n        if (temporaryRenderer && temporaryRenderer.hasData) {\n          if (from === null) {\n            from = temporaryRenderer.timestamp\n          }\n\n          to = temporaryRenderer.timestamp\n\n          const computedBar = this.computeBar(temporaryRenderer, series)\n\n          for (let id in computedBar) {\n            if (typeof computedSeries[id] === 'undefined') {\n              computedSeries[id] = []\n            }\n\n            computedSeries[id].push(computedBar[id])\n          }\n\n          if (temporaryRenderer.timestamp > visibleRange.to) {\n            length++\n          }\n        }\n\n        if (!bar) {\n          break\n        }\n\n        if (temporaryRenderer) {\n          this.nextBar(bar.timestamp, temporaryRenderer)\n        } else {\n          temporaryRenderer = this.newBar(bar.timestamp, series)\n        }\n      }\n\n      if (store.state.app.actives.indexOf(bar.exchange) === -1) {\n        continue\n      }\n\n      temporaryRenderer.hasData = true\n      temporaryRenderer.vbuy += bar.vbuy\n      temporaryRenderer.vsell += bar.vsell\n      temporaryRenderer.cbuy += bar.cbuy\n      temporaryRenderer.csell += bar.csell\n      temporaryRenderer.lbuy += bar.lbuy\n      temporaryRenderer.lsell += bar.lsell\n\n      temporaryRenderer.exchanges[bar.exchange] = this.cloneBar(bar)\n    }\n\n    if (!series) {\n      this.clearChart()\n\n      if (!bars.length) {\n        this.renderedRange.from = this.renderedRange.to = null\n      } else {\n        this.renderedRange.from = from\n        this.renderedRange.to = to\n      }\n    }\n\n    this.replaceData(computedSeries)\n\n    if (!series) {\n      const setSP = length * -1 || 16\n\n      this.chartInstance.timeScale().scrollToPosition(setSP)\n    }\n\n    if (!this.activeChunk || (this.activeChunk.rendered && this.activeChunk.to === temporaryRenderer.timestamp)) {\n      if (!series || !this.activeRenderer) {\n        if (this.activeRenderer) {\n          temporaryRenderer.vbuy = this.activeRenderer.vbuy\n          temporaryRenderer.vsell = this.activeRenderer.vsell\n          temporaryRenderer.lbuy = this.activeRenderer.lbuy\n          temporaryRenderer.lsell = this.activeRenderer.lsell\n          temporaryRenderer.cbuy = this.activeRenderer.cbuy\n          temporaryRenderer.csell = this.activeRenderer.csell\n          temporaryRenderer.open = this.activeRenderer.open\n          for (let exchange in this.activeRenderer.exchanges) {\n            temporaryRenderer.exchanges[exchange] = this.activeRenderer.exchanges[exchange]\n          }\n          temporaryRenderer.timestamp = this.activeRenderer.timestamp\n        }\n        this.activeRenderer = temporaryRenderer\n      } else if (series) {\n        for (let id of series) {\n          this.activeRenderer.series[id] = temporaryRenderer.series[id]\n        }\n      }\n    }\n  }\n\n  /**\n   * Renders chunks that collides with visible range\n   */\n  renderVisibleChunks(silent) {\n    if (!cache.length) {\n      return\n    }\n\n    const visibleRange = this.getVisibleRange()\n\n    visibleRange.from -= +store.state.settings.timeframe\n    visibleRange.to += +store.state.settings.timeframe\n\n    let bars = []\n\n    console.log('[renderVisibleChunks]', `from: ${formatTime(visibleRange.from)} -> to: ${formatTime(visibleRange.to)}`)\n\n    for (let i = cache.length - 1; i >= 0; i--) {\n      const chunk = cache[i]\n\n      if (\n        (chunk.from >= visibleRange.from && chunk.from <= visibleRange.to) ||\n        (chunk.to >= visibleRange.from && chunk.to <= visibleRange.to) ||\n        (chunk.from <= visibleRange.from && chunk.to >= visibleRange.to)\n      ) {\n        let reasons = []\n\n        if (chunk.from >= visibleRange.from && chunk.from <= visibleRange.to) {\n          reasons.push('start of chunk visible')\n        }\n        if (chunk.to >= visibleRange.from && chunk.to <= visibleRange.to) {\n          reasons.push('end of chunk visible')\n        }\n        if (chunk.from <= visibleRange.from && chunk.to >= visibleRange.to) {\n          reasons.push('larger than (or equal to) view')\n        }\n        console.log(\n          `[renderVisibleChunks] select chunk ${chunk.active ? '(active chunk)' : ''} n°${cache.indexOf(chunk)} from: ${formatTime(\n            chunk.from\n          )} -> to: ${formatTime(chunk.to)}\\n\\t->${reasons}`\n        )\n        bars = chunk.bars.concat(bars)\n        chunk.rendered = true\n      } else {\n        chunk.rendered = false\n        console.log(\n          `[renderVisibleChunks] ignore chunk ${chunk.active ? '(active chunk)' : ''} n°${cache.indexOf(chunk)} from: ${formatTime(\n            chunk.from\n          )} -> to: ${formatTime(chunk.to)}`\n        )\n      }\n    }\n\n    this.renderBars(bars, null, silent)\n  }\n\n  /**\n   * Attach marker to serie\n   * @param {ActiveSerie} serie serie\n   */\n  setMarkers(serie, marker) {\n    if (!serie.markers) {\n      serie.markers = []\n    }\n\n    for (let i = serie.markers.length - 1; i >= 0; i--) {\n      if (serie.markers[i].time === marker.time) {\n        serie.markers.splice(i, 1)\n        break\n      }\n    }\n\n    serie.markers.push(marker)\n\n    setTimeout(() => {\n      serie.api.setMarkers(serie.markers)\n    }, 100)\n  }\n\n  /**\n   * disable \"fetch on pan\" until current operation (serie.update / serie.setData) is finished\n   */\n  preventPan() {\n    if (this.panPrevented) {\n      return\n    }\n\n    const delay = 1000\n\n    // console.info(`[chart/controller] prevent pan for next ${getHms(delay)}`)\n\n    if (typeof this._releasePanTimeout !== 'undefined') {\n      clearTimeout(this._releasePanTimeout)\n    }\n\n    this.panPrevented = true\n\n    this._releasePanTimeout = window.setTimeout(() => {\n      if (!this.panPrevented) {\n        // console.warn(`[chart/controller] pan already released (before timeout fired)`)\n      } else {\n        // console.info(`[chart/controller] pan released (by timeout)`)\n\n        this.panPrevented = false\n      }\n    }, delay)\n  }\n\n  /**\n   * replace whole chart with a set of bars\n   * @param {Bar[]} bars bars to render\n   */\n  replaceData(computedSeries) {\n    this.preventPan()\n\n    for (let serie of this.activeSeries) {\n      if (computedSeries[serie.id] && computedSeries[serie.id].length) {\n        serie.api.setData(computedSeries[serie.id])\n      }\n    }\n  }\n\n  /**\n   * update last or add new bar to this.chartInstance\n   * @param {Bar} bar\n   */\n  updateBar(bar) {\n    for (let serie of this.activeSeries) {\n      if (bar[serie.id]) {\n        serie.api.update(bar[serie.id])\n      }\n    }\n  }\n\n  /**\n   * Process bar data and compute series values for this bar\n   * @param {Bar} bar\n   * @param {{[id: string]: TV.BarData | TV.LineData}} series\n   */\n  computeBar(bar, series) {\n    const points = {}\n\n    for (let serie of this.activeSeries) {\n      if (series && series.indexOf(serie.id) === -1) {\n        continue\n      }\n\n      const serieData = bar.series[serie.id]\n\n      serieData.point = serie.adapter(bar, serie.options)\n\n      if (serieData.point.value || serieData.point.open) {\n        points[serie.id] = { time: bar.timestamp + store.state.settings.timezoneOffset / 1000, ...serieData.point }\n      }\n    }\n\n    return points\n  }\n\n  /**\n   * Create empty renderer\n   * @param {number} timestamp start timestamp\n   * @param {string[]} series series to bind\n   */\n  newBar(timestamp, series) {\n    const renderer = {\n      timestamp: timestamp,\n      series: {},\n      exchanges: {},\n      open: null,\n      high: null,\n      low: null,\n      close: null,\n      vbuy: 0,\n      vsell: 0,\n      cbuy: 0,\n      csell: 0,\n      lbuy: 0,\n      lsell: 0\n    }\n\n    for (let serie of this.activeSeries) {\n      if (series && series.indexOf(serie.id) === -1) {\n        continue\n      }\n\n      this.bindSerie(serie, renderer)\n    }\n\n    return renderer\n  }\n\n  /**\n   * prepare bar for next timestamp\n   * @param {number} timestamp timestamp of the next bar\n   * @param {Renderer?} renderer bar to use as reference\n   */\n  nextBar(timestamp, renderer) {\n    if (renderer.hasData) {\n      for (let i = 0; i < this.activeSeries.length; i++) {\n        const barSerieData = renderer.series[this.activeSeries[i].id]\n\n        if (!barSerieData) {\n          continue\n        }\n\n        barSerieData.value = barSerieData.point.value || barSerieData.point.close\n\n        if (barSerieData.memory) {\n          for (let i = 0; i < barSerieData.memory.length; i++) {\n            const fn = barSerieData.memory[i]\n\n            fn.points.push(fn.output)\n            fn.sum += fn.output\n            fn.count++\n\n            if (fn.count > fn.length) {\n              fn.sum -= fn.points.shift()\n              fn.count--\n            }\n          }\n        }\n      }\n    }\n\n    renderer.timestamp = timestamp\n\n    this.resetBar(renderer)\n  }\n\n  /**\n   * @param {Bar | ActiveBar} bar bar to clear for next timestamp\n   */\n  resetBar(bar) {\n    bar.open = bar.close\n    bar.high = bar.close\n    bar.low = bar.close\n    bar.vbuy = 0\n    bar.vsell = 0\n    bar.cbuy = 0\n    bar.csell = 0\n    bar.lbuy = 0\n    bar.lsell = 0\n    bar.hasData = false\n\n    if (bar.exchanges) {\n      for (let exchange in bar.exchanges) {\n        this.resetBar(bar.exchanges[exchange])\n      }\n    }\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exchanges.vue?vue&type=style&index=0&lang=scss&\"","export const defaultChartOptions = {\n  crosshair: {\n    vertLine: {\n      color: 'rgba(255, 255, 255, .75)',\n      width: 0.5,\n      style: 2,\n      visible: true,\n      labelVisible: true\n    },\n    horzLine: {\n      color: 'rgba(255, 255, 255, .75)',\n      width: 0.5,\n      style: 2,\n      visible: true,\n      labelBackgroundColor: 'white',\n      labelVisible: true\n    },\n    mode: 0\n  },\n  layout: {\n    backgroundColor: 'transparent',\n    textColor: 'white',\n    fontFamily: 'Roboto Condensed'\n  },\n  grid: {\n    horzLines: {\n      visible: false\n    },\n    vertLines: {\n      visible: false\n    }\n  },\n  timeScale: {\n    barSpacing: 3,\n    rightOffset: 12,\n    lockVisibleTimeRangeOnResize: true,\n    rightBarStaysOnScroll: true,\n    borderVisible: true,\n    borderColor: 'rgba(255, 255, 255, .2)',\n    visible: true,\n    timeVisible: true,\n    secondsVisible: true\n  },\n  priceScale: {\n    position: 'right',\n    mode: 0,\n    borderColor: 'rgba(255, 255, 255, .2)'\n  }\n}\n\nexport const defaultLineOptions = {\n  crosshairMarkerVisible: false,\n  lastValueVisible: false,\n  priceLineVisible: false\n}\n\nexport const defaultCandlestickOptions = {\n  baseLineStyle: false,\n  lastValueVisible: true,\n  priceLineVisible: true,\n  priceLineWidth: 1,\n  priceLineColor: 'rgba(255, 255, 255, .5)',\n  priceLineStyle: 2,\n  priceFormat: {\n    type: 'price',\n    precision: 2\n  },\n  overlay: false,\n  borderVisible: false,\n  upColor: '#c3a87a',\n  downColor: '#e53935',\n  wickUpColor: 'rgba(223, 195, 148, .8)',\n  wickDownColor: 'rgba(224, 91, 95, .8)'\n}\n\nexport const defaultHistogramOptions = {\n  color: '#c3a87a',\n  lastValueVisible: false,\n  priceLineVisible: false,\n  overlay: true,\n  scaleMargins: {\n    top: 0.8,\n    bottom: 0\n  }\n}\n\nexport const defaultPlotsOptions = {\n  line: defaultLineOptions,\n  candlestick: defaultCandlestickOptions,\n  histogram: defaultHistogramOptions\n}\n"],"sourceRoot":""}